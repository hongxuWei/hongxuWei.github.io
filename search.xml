<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>é“¾è¡¨2</title>
      <link href="/2019/07/31/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A82/"/>
      <url>/2019/07/31/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A82/</url>
      <content type="html"><![CDATA[<h2 id="ç¯å½¢é“¾è¡¨-II-LeetCode-142"><a href="#ç¯å½¢é“¾è¡¨-II-LeetCode-142" class="headerlink" title="ç¯å½¢é“¾è¡¨ II LeetCode#142"></a>ç¯å½¢é“¾è¡¨ II LeetCode#142</h2><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚<br>ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚<br>è¯´æ˜ï¼šä¸å…è®¸ä¿®æ”¹ç»™å®šçš„é“¾è¡¨ã€‚</p><pre><code>ç¤ºä¾‹ 1ï¼šè¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1è¾“å‡ºï¼štail connects to node index 1è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</code></pre><p><img src="/2019/07/31/ç®—æ³•/é“¾è¡¨2/LeetCode142Question1.png" alt="LeetCode142Question1"></p><pre><code>ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼šhead = [1,2], pos = 0è¾“å‡ºï¼štail connects to node index 0è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</code></pre><p><img src="/2019/07/31/ç®—æ³•/é“¾è¡¨2/LeetCode142Question2.png" alt="LeetCode142Question2"></p><pre><code>ç¤ºä¾‹ 3ï¼šè¾“å…¥ï¼šhead = [1], pos = -1è¾“å‡ºï¼šno cycleè§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚</code></pre><p><img src="/2019/07/31/ç®—æ³•/é“¾è¡¨2/LeetCode142Question3.png" alt="LeetCode142Question3"><br>è¿›é˜¶ï¼š<br>ä½ æ˜¯å¦å¯ä»¥ä¸ç”¨é¢å¤–ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ</p></blockquote><h4 id="1-ç¼“å­˜æ³•"><a href="#1-ç¼“å­˜æ³•" class="headerlink" title="1. ç¼“å­˜æ³•"></a>1. ç¼“å­˜æ³•</h4><p>è¯¥è§£æ³•ä¸ LeetCode 141 çš„è§£æ³•ä¸€æ ·ï¼Œç”¨ç¼“å­˜æŠŠæ¯ä¸ªèŠ‚ç‚¹ç¼“å­˜èµ·æ¥ï¼Œç„¶åä¸æ–­éå†é“¾è¡¨å¹¶åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœå·²ç»å­˜åœ¨å°±è¿”å›è¯¥èŠ‚ç‚¹ã€‚<br>è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹ä¹Ÿæ˜æ˜¾ï¼Œæ—¶é—´å¤æ‚åº¦é«˜ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿé«˜</p><pre><code class="javascript">// arrary memoryconst hasCycle = (head) =&gt; {  if(head === null) {    return false  }  const memory = []  while (head !== null) {    if (memory.indexOf(head) &gt; -1) {      return true    }    memory.push(head)    head = head.next  }  return false}// set memoryconst detectCycle = (head) =&gt; {  if(head === null) {    return head  }  // ç”¨ set æ¨¡æ‹Ÿ hash table  const memory = new Set()  while (head !== null) {    if (memory.has(head)) {      return head    }    memory.add(head)    head = head.next  }  return head}</code></pre><h4 id="2-Floyd-ç®—æ³•"><a href="#2-Floyd-ç®—æ³•" class="headerlink" title="2. Floyd ç®—æ³•"></a>2. Floyd ç®—æ³•</h4><p>è¯¥è§£æ³•æ˜¯åœ¨ LeetCode 141 åŒæŒ‡é’ˆæ³•çš„åŸºç¡€ä¸Šå˜åŒ–è€Œæ¥çš„ã€‚å¦‚æœä¸çœ‹ç­”æ¡ˆï¼Œæˆ‘æ˜¯æƒ³ä¸å‡ºè¿™ç§çº¯æ•°å­¦çš„è§£æ³•çš„ã€‚</p><p>åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ</p><ul><li>åˆ¤æ–­æ˜¯å¦æœ‰ç¯</li><li>æ‰¾å‡ºç¯å…¥å£ï¼ˆè¿™é‡Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå·§å¦™çš„æ•°å­¦è§£æ³•ï¼‰</li></ul><p>å…·ä½“è¯æ˜ -&gt; <a href="https://leetcode-cn.com/problems/linked-list-cycle-ii/solution/huan-xing-lian-biao-ii-by-leetcode/" target="_blank" rel="noopener">LeetCode 142 Floyd ç®—æ³•</a></p><pre><code class="javascript">const detectCycle = (head) =&gt; {  // è¿™é‡Œå’Œ LeetCode çš„åŒæŒ‡é’ˆæ³•æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œå› ä¸ºè¿™é‡Œéœ€è¦ä¸¥æ ¼çš„ä½ç½®æ ¡éªŒ  let fast = head  let slow = head  let pointer = head  // å¾ªç¯ä½¿å¿«æ…¢æŒ‡é’ˆç›¸é‡  for(;;) {    if (fast === null || fast.next === null) {       return null     }    slow = slow.next    fast = fast.next.next    // ç›¸é‡æ—¶é€€å‡º    if (slow === fast) {      break    }  }  // æ­¤æ—¶ slow å¤šèµ°çš„è·ç¦»åˆšå¥½æ˜¯æˆç¯å‰çš„è·ç¦»ï¼Œæ‰€ä»¥æ­¤æ—¶ç”¨ä¸€ä¸ªå¤´æŒ‡é’ˆä¾æ¬¡å’Œ slow ä¾æ¬¡å‘åèµ°å°±ä¼šåœ¨ç¯çš„å…¥å£ç›¸é‡  while (pointer !== slow) {    pointer = pointer.next    slow = slow.next  }  return slow}</code></pre><h2 id="é‡æ’é“¾è¡¨-LeetCode-143"><a href="#é‡æ’é“¾è¡¨-LeetCode-143" class="headerlink" title="é‡æ’é“¾è¡¨ LeetCode#143"></a>é‡æ’é“¾è¡¨ LeetCode#143</h2><blockquote><p>ç»™å®šä¸€ä¸ªå•é“¾è¡¨ Lï¼šL0â†’L1â†’â€¦â†’Ln-1â†’Ln ï¼Œ<br>å°†å…¶é‡æ–°æ’åˆ—åå˜ä¸ºï¼š L0â†’Lnâ†’L1â†’Ln-1â†’L2â†’Ln-2â†’â€¦<br>ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p><pre><code>ç¤ºä¾‹ 1:ç»™å®šé“¾è¡¨ 1-&gt;2-&gt;3-&gt;4, é‡æ–°æ’åˆ—ä¸º 1-&gt;4-&gt;2-&gt;3.ç¤ºä¾‹ 2:ç»™å®šé“¾è¡¨ 1-&gt;2-&gt;3-&gt;4-&gt;5, é‡æ–°æ’åˆ—ä¸º 1-&gt;5-&gt;2-&gt;4-&gt;3.</code></pre></blockquote><h4 id="1-æš´åŠ›è§£æ³•"><a href="#1-æš´åŠ›è§£æ³•" class="headerlink" title="1. æš´åŠ›è§£æ³•"></a>1. æš´åŠ›è§£æ³•</h4><p>æ€è·¯ï¼šé¦–å…ˆéå†ä¸€éé“¾è¡¨å¹¶æŠŠæ¯ä¸ªèŠ‚ç‚¹æŒ‰é¡ºåºå­˜æ”¾èµ·æ¥ï¼Œç¬¬äºŒéæŒ‰ç…§è¦æ±‚ä»æ•°ç»„ä¸­å–å€¼å¹¶æ‹¼æ¥èµ·æ¥é“¾è¡¨</p><p>æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦O(n)</p><pre><code class="javascript">const reorderList = (head) =&gt; {  if (head === null) {    return head  }  const memory = []  let pointer = head  // éå†å¹¶å­˜æ”¾èŠ‚ç‚¹ä¿¡æ¯  while (pointer !== null) {    memory.push(pointer)    pointer = pointer.next  }  const pRes = new ListNode()  pointer = pRes   const len = memory.length  // æŒ‰è¦æ±‚ä¸æ–­æ‹¼æ¥ list  while(memory.length &gt; 0) {    pointer.next = memory.shift()    pointer = pointer.next    if (memory.length &gt; 0) {      pointer.next = memory.pop()      pointer = pointer.next    }  }  // æ³¨æ„å¤„ç†æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ next å¼•ç”¨å€¼ï¼Œå¦åˆ™ä¼šæº¢å‡º  pointer.next = null  return pRes.next}</code></pre><h4 id="2-åè½¬åˆå¹¶æ³•"><a href="#2-åè½¬åˆå¹¶æ³•" class="headerlink" title="2. åè½¬åˆå¹¶æ³•"></a>2. åè½¬åˆå¹¶æ³•</h4><p>æ€è·¯ï¼š</p><ol><li>ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹</li><li>åè½¬ä¸­ç‚¹åˆ°é“¾å°¾çš„é“¾</li><li>åˆå¹¶ä¸­ç‚¹å‰çš„é“¾å’Œä¸­ç‚¹åçš„é“¾</li></ol><p>æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦O(1)</p><pre><code class="javascript">const reorderList = (head) =&gt; {  if (head === null) {    return head  }  // fast èµ°ä¸¤æ­¥ï¼Œslow èµ°ä¸€æ­¥ï¼Œfast èµ°å®Œå…¨é“¾æ—¶ slow çš„ä½ç½®å°±æ˜¯ä¸­ç‚¹  let fast = head  let slow = head  while (fast !== null &amp;&amp; fast.next !== null) {    slow = slow.next    fast = fast.next.next  }  // åè½¬ä¸­ç‚¹åˆ°é“¾å°¾  const revertedList = revert(slow.next)  // åˆ†å‰²é“¾è¡¨  slow.next = null  // åˆå¹¶é“¾è¡¨  let p1 = head  let p2 = revertedList  const pRes = new ListNode()  let pointer = pRes  while (p2 !== null) {    pointer.next = p1    pointer = pointer.next    p1 = p1.next    pointer.next = p2    pointer = pointer.next    p2 = p2.next  }  // å› ä¸º p1 çš„é•¿åº¦æ€»æ˜¯å’Œ p2 ç›¸ç­‰æˆ–è€…æ¯” p2 å¤§ 1 ä¸ª  // æ‰€ä»¥è¿™é‡Œè¦å¯¹ p1.length &gt; p2.length åšå¤„ç†  if (p1) {    pointer.next = p1  }  return pRes.next}const revert = (head) =&gt; {  if (head === null) {    return null  }  const pRes = new ListNode()  let pointer = head  while (pointer !== null) {    const next = pointer.next    const resNext = pRes.next    // åè½¬é“¾è¡¨    // æŒ‚è½½å¤´èŠ‚ç‚¹    pRes.next = pointer    // æŒ‚è½½å½“å‰èŠ‚ç‚¹    pointer.next = resNext    // ç§»åŠ¨èŠ‚ç‚¹    pointer = next  }  return pRes.next}</code></pre><h2 id="å¯¹é“¾è¡¨è¿›è¡Œæ’å…¥æ’åº-LeetCode-147"><a href="#å¯¹é“¾è¡¨è¿›è¡Œæ’å…¥æ’åº-LeetCode-147" class="headerlink" title="å¯¹é“¾è¡¨è¿›è¡Œæ’å…¥æ’åº LeetCode#147"></a>å¯¹é“¾è¡¨è¿›è¡Œæ’å…¥æ’åº LeetCode#147</h2><p class="center"><img src="/2019/07/31/ç®—æ³•/é“¾è¡¨2/LeetCode147Question.gif" alt="LeetCode147Question"></p><blockquote><p>æ’å…¥æ’åºçš„åŠ¨ç”»æ¼”ç¤ºå¦‚ä¸Šã€‚ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥é“¾è¡¨å¯ä»¥è¢«è®¤ä¸ºå·²ç»éƒ¨åˆ†æ’åºï¼ˆç”¨é»‘è‰²è¡¨ç¤ºï¼‰ã€‚<br>æ¯æ¬¡è¿­ä»£æ—¶ï¼Œä»è¾“å…¥æ•°æ®ä¸­ç§»é™¤ä¸€ä¸ªå…ƒç´ ï¼ˆç”¨çº¢è‰²è¡¨ç¤ºï¼‰ï¼Œå¹¶åŸåœ°å°†å…¶æ’å…¥åˆ°å·²æ’å¥½åºçš„é“¾è¡¨ä¸­ã€‚<br>æ’å…¥æ’åºç®—æ³•ï¼š</p><ol><li>æ’å…¥æ’åºæ˜¯è¿­ä»£çš„ï¼Œæ¯æ¬¡åªç§»åŠ¨ä¸€ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å¯ä»¥å½¢æˆä¸€ä¸ªæœ‰åºçš„è¾“å‡ºåˆ—è¡¨ã€‚</li><li>æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæ’å…¥æ’åºåªä»è¾“å…¥æ•°æ®ä¸­ç§»é™¤ä¸€ä¸ªå¾…æ’åºçš„å…ƒç´ ï¼Œæ‰¾åˆ°å®ƒåœ¨åºåˆ—ä¸­é€‚å½“çš„ä½ç½®ï¼Œå¹¶å°†å…¶æ’å…¥ã€‚</li><li>é‡å¤ç›´åˆ°æ‰€æœ‰è¾“å…¥æ•°æ®æ’å…¥å®Œä¸ºæ­¢ã€‚<pre><code>ç¤ºä¾‹ 1ï¼šè¾“å…¥: 4-&gt;2-&gt;1-&gt;3è¾“å‡º: 1-&gt;2-&gt;3-&gt;4</code></pre><pre><code>ç¤ºä¾‹ 2ï¼šè¾“å…¥: -1-&gt;5-&gt;3-&gt;4-&gt;0è¾“å‡º: -1-&gt;0-&gt;3-&gt;4-&gt;5</code></pre></li></ol></blockquote><p>é¢˜ç›®å·²ç»é™åˆ¶äº†è§£æ³•ã€‚å¦‚ä¸‹ â†“</p><pre><code class="javascript">const insertionSortList = (head) =&gt; {    // ç‰¹æ®Šå¤„ç†  if(head === null || head.next === null) {    return head  }  // æ„é€ è¾…åŠ©é“¾è¡¨  const first = new ListNode(0)  first.next = head  // åˆå§‹åŒ–  let currentNode = head   let prevNode = null  // éå†é“¾è¡¨  while(currentNode !== null) {    // ä¸æ˜¯æœ‰åºæ•°æ®    if (currentNode.next &amp;&amp; currentNode.next.val &lt; currentNode.val) {      // æ‰¾åˆ°æ’å…¥ä½ç½®      prevNode = first      while (currentNode.next &amp;&amp; prevNode.next &amp;&amp; currentNode.next.val &gt; prevNode.next.val) {        prevNode = prevNode.next      }      // ç¼“å­˜åç»­èŠ‚ç‚¹      let temp = currentNode.next      // æ’å…¥èŠ‚ç‚¹      currentNode.next = temp.next;      temp.next = prevNode.next;      prevNode.next = temp    } else {      // é¡ºåºåˆç† æˆ– æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹      currentNode = currentNode.next    }  }  return first.next}</code></pre>]]></content>
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>é“¾è¡¨</title>
      <link href="/2019/07/14/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/"/>
      <url>/2019/07/14/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/</url>
      <content type="html"><![CDATA[<h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><blockquote><p>é“¾è¡¨æ˜¯ä¸€ç§ç‰©ç†å­˜å‚¨å•å…ƒä¸Šéè¿ç»­ã€éé¡ºåºçš„å­˜å‚¨ç»“æ„ï¼Œæ•°æ®å…ƒç´ çš„é€»è¾‘é¡ºåºæ˜¯é€šè¿‡é“¾è¡¨ä¸­çš„æŒ‡é’ˆé“¾æ¥æ¬¡åºå®ç°çš„ã€‚é“¾è¡¨ç”±ä¸€ç³»åˆ—ç»“ç‚¹ï¼ˆé“¾è¡¨ä¸­æ¯ä¸€ä¸ªå…ƒç´ ç§°ä¸ºç»“ç‚¹ï¼‰ç»„æˆï¼Œç»“ç‚¹å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆã€‚æ¯ä¸ªç»“ç‚¹åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªæ˜¯å­˜å‚¨æ•°æ®å…ƒç´ çš„æ•°æ®åŸŸï¼Œå¦ä¸€ä¸ªæ˜¯å­˜å‚¨ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€çš„æŒ‡é’ˆåŸŸã€‚ ç›¸æ¯”äºçº¿æ€§è¡¨é¡ºåºç»“æ„ï¼Œæ“ä½œå¤æ‚ã€‚ç”±äºä¸å¿…é¡»æŒ‰é¡ºåºå­˜å‚¨ï¼Œé“¾è¡¨åœ¨æ’å…¥çš„æ—¶å€™å¯ä»¥è¾¾åˆ°O(1)çš„å¤æ‚åº¦ï¼Œæ¯”å¦ä¸€ç§çº¿æ€§è¡¨é¡ºåºè¡¨å¿«å¾—å¤šï¼Œä½†æ˜¯æŸ¥æ‰¾ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…è®¿é—®ç‰¹å®šç¼–å·çš„èŠ‚ç‚¹åˆ™éœ€è¦O(n)çš„æ—¶é—´ï¼Œè€Œçº¿æ€§è¡¨å’Œé¡ºåºè¡¨ç›¸åº”çš„æ—¶é—´å¤æ‚åº¦åˆ†åˆ«æ˜¯O(logn)å’ŒO(1)ã€‚<br>ä½¿ç”¨é“¾è¡¨ç»“æ„å¯ä»¥å…‹æœæ•°ç»„é“¾è¡¨éœ€è¦é¢„å…ˆçŸ¥é“æ•°æ®å¤§å°çš„ç¼ºç‚¹ï¼Œé“¾è¡¨ç»“æ„å¯ä»¥å……åˆ†åˆ©ç”¨è®¡ç®—æœºå†…å­˜ç©ºé—´ï¼Œå®ç°çµæ´»çš„å†…å­˜åŠ¨æ€ç®¡ç†ã€‚ä½†æ˜¯é“¾è¡¨å¤±å»äº†æ•°ç»„éšæœºè¯»å–çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶é“¾è¡¨ç”±äºå¢åŠ äº†ç»“ç‚¹çš„æŒ‡é’ˆåŸŸï¼Œç©ºé—´å¼€é”€æ¯”è¾ƒå¤§ã€‚é“¾è¡¨æœ€æ˜æ˜¾çš„å¥½å¤„å°±æ˜¯ï¼Œå¸¸è§„æ•°ç»„æ’åˆ—å…³è”é¡¹ç›®çš„æ–¹å¼å¯èƒ½ä¸åŒäºè¿™äº›æ•°æ®é¡¹ç›®åœ¨è®°å¿†ä½“æˆ–ç£ç›˜ä¸Šé¡ºåºï¼Œæ•°æ®çš„å­˜å–å¾€å¾€è¦åœ¨ä¸åŒçš„æ’åˆ—é¡ºåºä¸­è½¬æ¢ã€‚é“¾è¡¨å…è®¸æ’å…¥å’Œç§»é™¤è¡¨ä¸Šä»»æ„ä½ç½®ä¸Šçš„èŠ‚ç‚¹ï¼Œä½†æ˜¯ä¸å…è®¸éšæœºå­˜å–ã€‚é“¾è¡¨æœ‰å¾ˆå¤šç§ä¸åŒçš„ç±»å‹ï¼šå•å‘é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨ä»¥åŠå¾ªç¯é“¾è¡¨ã€‚</p></blockquote><p class="center"><img src="/2019/07/14/ç®—æ³•/é“¾è¡¨/define.png" alt="å®šä¹‰"></p><br><p class="center">å®šä¹‰</p><h1 id="LeetCode-ç»ƒä¹ é¢˜"><a href="#LeetCode-ç»ƒä¹ é¢˜" class="headerlink" title="LeetCode ç»ƒä¹ é¢˜"></a>LeetCode ç»ƒä¹ é¢˜</h1><h2 id="ä¸¤æ•°ç›¸åŠ -LeetCode-2"><a href="#ä¸¤æ•°ç›¸åŠ -LeetCode-2" class="headerlink" title="ä¸¤æ•°ç›¸åŠ  LeetCode#2"></a>ä¸¤æ•°ç›¸åŠ  LeetCode#2</h2><blockquote><p>ç»™å‡ºä¸¤ä¸ª éç©º çš„é“¾è¡¨ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å…¶ä¸­ï¼Œå®ƒä»¬å„è‡ªçš„ä½æ•°æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚<br>å¦‚æœï¼Œæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªæ•°ç›¸åŠ èµ·æ¥ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„é“¾è¡¨æ¥è¡¨ç¤ºå®ƒä»¬çš„å’Œã€‚<br>æ‚¨å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚<br>ç¤ºä¾‹ï¼š</p><pre><code>è¾“å…¥ï¼š(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)è¾“å‡ºï¼š7 -&gt; 0 -&gt; 8åŸå› ï¼š342 + 465 = 807</code></pre></blockquote><h4 id="1-å…ˆæ±‚è§£å†è½¬ä¸ºé“¾è¡¨"><a href="#1-å…ˆæ±‚è§£å†è½¬ä¸ºé“¾è¡¨" class="headerlink" title="1. å…ˆæ±‚è§£å†è½¬ä¸ºé“¾è¡¨"></a><del>1. å…ˆæ±‚è§£å†è½¬ä¸ºé“¾è¡¨</del></h4><ul><li>éå†ä¸¤é“¾è¡¨æ±‚å‡ºä¸¤æ•°</li><li>ä¸¤æ•°ç›¸åŠ æ±‚å’Œ</li><li>æ•°å­—å†è½¬ä¸ºé“¾è¡¨</li></ul><p>è¿™æ˜¯ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç›´è§‚çš„ä¸€ç§è§£æ³•ï¼Œå…³é”®å°±åœ¨é“¾è¡¨è½¬æ•°å­—ä»¥åŠæ•°å­—è½¬é“¾è¡¨</p><p>ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦éƒ½ä¸æ˜¯å¾ˆç†æƒ³</p><pre><code class="javascript">const ListNode = (val) =&gt; {  this.val = val  this.next = null}const number2List = (num) =&gt; {  const numArr = String(num).split(&#39;&#39;).map(item =&gt; Number(item))  const head = new ListNode()  let curNode = head  const len = numArr.length  for (let i = len; i &gt; 0; i--) {    curNode.val = numArr[i - 1]    curNode.next = i === 1 ? null : new ListNode()    curNode = curNode.next  }  return head}const list2Number = (list) =&gt; {  let weight = 0  let num = 0  while(list !== null) {    const curNum = list.val * Math.pow(10, weight)    num += curNum    weight += 1    list = list.next   }  return num}const addTwoNumbers = (l1, l2) =&gt; {  if (l1 === null) {    return l2  }  if (l2 === null) {    return l1  }  const number1 = list2Number(l1)  const number2 = list2Number(l2)  const sum = number1 + number2  return number2List(sum)}</code></pre><p>ä½†æ˜¯å‡ºé”™å•¦ TAT</p><p class="center"><img src="/2019/07/14/ç®—æ³•/é“¾è¡¨/LeetCode2Error.png" alt="LeetCode2Error"></p><p>è¿™å°±æ˜¯æ²¡æœ‰è€ƒè™‘åˆ°è¶…å¤§æ•°å­—ã€‚<br>ä¸ä»…å¦‚æ­¤ï¼Œå¦‚æœæœ€åçš„ç»“æœæ˜¯ <code>Infinity</code> è¿™ä¸ªæ–¹æ³•å°±ä¸èµ·ä½œç”¨äº†ã€‚</p><h4 id="2-éå†ä¸¤é“¾è¡¨ï¼Œç”¨å˜é‡è¡¨ç¤ºæ˜¯å¦è¿›ä½"><a href="#2-éå†ä¸¤é“¾è¡¨ï¼Œç”¨å˜é‡è¡¨ç¤ºæ˜¯å¦è¿›ä½" class="headerlink" title="2. éå†ä¸¤é“¾è¡¨ï¼Œç”¨å˜é‡è¡¨ç¤ºæ˜¯å¦è¿›ä½"></a>2. éå†ä¸¤é“¾è¡¨ï¼Œç”¨å˜é‡è¡¨ç¤ºæ˜¯å¦è¿›ä½</h4><ul><li>ä¸¤é“¾è¡¨å¯¹åº”ä½ç½®å€¼ç›¸åŠ </li><li>æ ‡å¿—ä½æœ‰è¿›ä½è®¾ä¸º 1 æ— è¿›ä½å°±è®¾ä¸º 0ï¼ˆä»…é™ä¸¤é“¾è¡¨ç›¸åŠ ï¼‰</li></ul><p>æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)</p><p><strong>è¿™é‡Œéœ€è¦æ³¨æ„å‡ ç§æƒ…å†µ</strong></p><ol><li>é“¾è¡¨ä½æ•°ä¸ç›¸åŒ</li><li>æœ€ç»ˆç»“æœå€¼å¤§äºä¸¤é“¾è¡¨æœ€å¤§ä½æ•°</li></ol><pre><code class="javascript">const addTwoNumbers = (l1, l2) =&gt; {  if (l1 === null) {      return l2  }  if (l2 === null) {      return l1  }  const head = new ListNode(0)  let list1 = l1  let list2 = l2  let curNode = head  let carry = 0  while (list1 !== null || list2 !== null) {    const num1 = list1 === null ? 0 : list1.val    const num2 = list2 === null ? 0 : list2.val    // è¿™é‡Œæ³¨æ„ä¸è¦å¿˜è®°åŠ è¿›ä½çš„æ•°    const sum = num1 + num2 + carry    // å¤„ç†è¿›ä½    carry = sum &gt;= 10 ? 1 : 0    curNode.next = new ListNode(sum % 10)    curNode = curNode.next    // list é•¿åº¦ä¸ä¸€è‡´çš„æ—¶å€™çš„ç‰¹æ®Šå¤„ç†    if (list1 !== null) {      list1 = list1.next    }    if (list2 !== null) {      list2 = list2.next    }  }  // éå†å®Œåè¿˜æœ‰æ•°å­—çš„ç‰¹æ®Šå¤„ç†  if (carry !== 0) {    curNode.next = new ListNode(carry)  }  // è¿™é‡Œæ³¨æ„è¦è¿”å› head çš„ next åº”ä¸ºåˆšå¼€å§‹æˆ‘ä»¬æ„é€ äº†ä¸€ä¸ªæ— æ•ˆçš„ Node æ¥è¾…åŠ©æˆ‘ä»¬è§£é¢˜  return head.next}</code></pre><h2 id="åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹-LeetCode-19"><a href="#åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹-LeetCode-19" class="headerlink" title="åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ LeetCode#19"></a>åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹ LeetCode#19</h2><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚<br>ç¤ºä¾‹ï¼š</p><pre><code>ç»™å®šä¸€ä¸ªé“¾è¡¨: 1-&gt;2-&gt;3-&gt;4-&gt;5, å’Œ n = 2.å½“åˆ é™¤äº†å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹åï¼Œé“¾è¡¨å˜ä¸º 1-&gt;2-&gt;3-&gt;5.</code></pre><p>è¯´æ˜ï¼š<br>ç»™å®šçš„ n ä¿è¯æ˜¯æœ‰æ•ˆçš„ã€‚<br>è¿›é˜¶ï¼š<br>ä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ</p></blockquote><p>æ€»ä¹‹å°±æ˜¯æœ‰ä¸€ä¸ª ListNode<br><strong>éœ€è¦å°† LN(n - 1) çš„ next æŒ‡é’ˆ æŒ‡å‘ LN(n + 1)</strong> å³<br><strong>LN(n - 1).next = LN(n + 1)</strong> å³<br><strong>LN(n - 1).next = LN(n - 1).next.next</strong></p><h4 id="1-æ•°ç»„å­˜æ”¾é“¾è¡¨ä¿¡æ¯"><a href="#1-æ•°ç»„å­˜æ”¾é“¾è¡¨ä¿¡æ¯" class="headerlink" title="1. æ•°ç»„å­˜æ”¾é“¾è¡¨ä¿¡æ¯"></a>1. æ•°ç»„å­˜æ”¾é“¾è¡¨ä¿¡æ¯</h4><p>æˆ‘é¦–å…ˆæƒ³åˆ°çš„æ˜¯è¿™ä¹ˆè§£</p><ul><li>éå†ä¸€éé“¾è¡¨å¹¶æŒ¨ä¸ªæ”¾åˆ°æ•°ç»„é‡Œé¢</li><li>å¯¹åº”ä¿®æ”¹ n - 1 çš„ next èŠ‚ç‚¹åˆ° n + 1</li></ul><p><strong>è¿™é‡Œè¦æ³¨æ„</strong></p><ol><li>n - 1 å’Œ n + 1 æ˜¯å¦å­˜åœ¨</li></ol><p>è¿™ä¹ˆè§£æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ä½†æ˜¯ç”±äºå¼•å…¥ä¸€ä¸ªæ•°ç»„æ‰€ä»¥æ˜¯ O(n) çš„ç©ºé—´å¤æ‚åº¦</p><pre><code class="javascript">const removeNthFromEnd = (head, n) =&gt; {  if (head === null) {    return head  }  // éå†ä¸€éå¹¶å­˜æ”¾é“¾è¡¨æ•°æ®  const memory = []  while (head !== null) {    memory.push(head)    head = head.next  }  // å½“åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„ç‰¹æ®Šå¤„ç†  const len = memory.length  if (len === 1) {    return memory[0].next  }  const index = len - n  // å½“ n = 0 çš„ç‰¹æ®Šæƒ…å†µï¼Œæ­¤æ—¶ä¸åˆ é™¤ä»»ä½•èŠ‚ç‚¹ï¼ˆå› ä¸ºé¢˜ç›®è¯´ä¿è¯ n æœ‰æ•ˆï¼Œæ‰€ä»¥å…ˆæ³¨é‡Šæ‰ï¼‰  // if (index === len) {  //   return memory[0]  // }  // å½“ n = é“¾è¡¨æ€»é•¿åº¦çš„ç‰¹æ®Šæƒ…å†µï¼Œæ­¤æ—¶æ—  n - 1  if (index === 0) {    return memory[1]  }  // æ³¨æ„è¿™é‡Œçš„ memory[index + 1] || null æ˜¯ä¸ºäº†å¤„ç† n + 1 ä¸å­˜åœ¨çš„æƒ…å†µ  memory[index - 1].next = memory[index + 1] || null  return memory[0]}</code></pre><p>ä½†æ˜¯æœ‰æ²¡æœ‰æ›´å¥½çš„è§£æ³•</p><h4 id="2-åŒæŒ‡é’ˆæ³•"><a href="#2-åŒæŒ‡é’ˆæ³•" class="headerlink" title="2. åŒæŒ‡é’ˆæ³•"></a>2. åŒæŒ‡é’ˆæ³•</h4><p>è¿™æ˜¯ LeetCode ä¸­æ–‡å®˜æ–¹çš„ä¸€ä¸ªè§£<br>æ€è·¯å°±æ˜¯æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œç¬¬ä¸€ä¸ªåœ¨å‰æ˜¯ forwardP å¦ä¸€ä¸ªæ»åä¸ä»– n + 1 ä¸ª Node<br>è¿™æ ·å½“ç¬¬ä¸€ä¸ªæŒ‡é’ˆè·‘åˆ°æœ€åæ—¶ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆåˆšå¥½å°±åœ¨å€’æ•°ç¬¬ n - 1 ä¸ªä½ç½®</p><p>è¿™æ ·å°±ä¼˜åŒ–äº†ä¹‹å‰å­˜æ”¾ä¸´æ—¶æ•°æ®çš„æ•°ç»„çš„ç©ºé—´</p><p>æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)</p><ul><li>ä¸¤ä¸ªæŒ‡é’ˆåˆå§‹ä½ç½®éƒ½åœ¨å¤´èŠ‚ç‚¹</li><li>æŒ‡é’ˆ 1 å…ˆå‘å‰èµ° n ä¸ªèŠ‚ç‚¹</li><li>ä¸¤æŒ‡é’ˆåŒæ—¶å‰è¿›ï¼Œå½“æŒ‡é’ˆ 1 è·‘åˆ°é“¾è¡¨å°¾æ—¶æ›´æ”¹æŒ‡é’ˆ 2 æŒ‡å‘</li></ul><p class="center"><img src="/2019/07/14/ç®—æ³•/é“¾è¡¨/LeetCode12Solution2.png" alt="LeetCode12Solution2"></p><pre><code class="javascript">const removeNthFromEnd = (head, n) =&gt; {  // å¼•å…¥ä¸€ä¸ª head node å¯ä»¥é¿å…ä¸‹é¢çš„å¾ˆå¤šåˆ¤æ–­  const _head = new ListNode()  _head.next = head  let forwardPointer = _head;  let pointer = _head;  // æŒ‡é’ˆ 1 å‰è¿› n + 1æ­¥  for (let step = 1; step &lt;= n + 1; step++) {    forwardPointer = forwardPointer.next  }  // åŒæŒ‡é’ˆåŒæ—¶å‰è¿›  while (forwardPointer !== null) {    forwardPointer = forwardPointer.next    pointer = pointer.next  }  // åˆ é™¤ç¬¬ n ä¸ªä½ç½®çš„å€¼  pointer.next = pointer.next.next  return _head.next}</code></pre><h2 id="åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨-LeetCode-21"><a href="#åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨-LeetCode-21" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ LeetCode#21"></a>åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ LeetCode#21</h2><blockquote><p>å°†ä¸¤ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºé“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚<br>ç¤ºä¾‹ï¼š</p><pre><code>è¾“å…¥ï¼š1-&gt;2-&gt;4, 1-&gt;3-&gt;4è¾“å‡ºï¼š1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4</code></pre></blockquote><h4 id="1-éå†ä¸¤é“¾è¡¨"><a href="#1-éå†ä¸¤é“¾è¡¨" class="headerlink" title="1. éå†ä¸¤é“¾è¡¨"></a>1. éå†ä¸¤é“¾è¡¨</h4><p>é¦–å…ˆæƒ³åˆ°çš„æ˜¯å¦‚ä¸‹æ€è·¯<br>æ€è·¯ï¼šå¢åŠ ä¸€ä¸ªä¸»é“¾è¡¨ï¼Œä¾æ¬¡æ¯”è¾ƒä¸¤é“¾è¡¨çš„å°†å°çš„èŠ‚ç‚¹åŠ å…¥ä¸»é“¾è¡¨ï¼Œæœ€åå°†ä¸»é“¾è¡¨è¿”å›</p><p>æ—¶é—´å¤æ‚åº¦æ˜¯ O(m + n) ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)</p><ul><li>æ¯”è¾ƒä¸¤é“¾è¡¨çš„å½“å‰èŠ‚ç‚¹</li><li>å°†å€¼å°çš„èŠ‚ç‚¹åŠ å…¥ä¸»é“¾è¡¨</li><li>å½“æœ‰ä¸€ä¸ªèŠ‚ç‚¹éå†åˆ°æœ€åæ—¶å°†å¦ä¸€ä¸ªé“¾è¡¨çš„å½“å‰èŠ‚ç‚¹åŠ å…¥ä¸»é“¾è¡¨</li></ul><pre><code class="javascript">const mergeTwoLists = (l1, l2) =&gt; {  // l1 l2 ä¸ºç©ºçš„ç‰¹æ®Šå¤„ç†  if (l1 === null) {      return l2  }  if (l2 === null) {      return l1  }  const _head = new ListNode();  let pointer = _head  // æ³¨æ„è¿™é‡Œçš„éå†æ¡ä»¶å½“æœ‰ä¸€ä¸ªå·²ç»éå†å®Œäº†ä¹‹åå°±åœæ­¢  while (l1 !== null &amp;&amp; l2 !== null) {    const l1IsMin = l1.val &lt; l2.val    pointer.next = l1IsMin ? l1 : l2    if (l1IsMin) {      l1 = l1.next    } else {      l2 = l2.next    }    pointer = pointer.next  }  pointer.next = l1 === null ? l2 : l1  return _head.next}</code></pre><h4 id="2-é€’å½’æ³•-LeetCode-è§£æ³•1"><a href="#2-é€’å½’æ³•-LeetCode-è§£æ³•1" class="headerlink" title="2. é€’å½’æ³• - LeetCode è§£æ³•1"></a>2. é€’å½’æ³• - LeetCode è§£æ³•1</h4><p>é€’å½’æ³•åªéœ€è¦å…³æ³¨è¾¹ç•Œæ¡ä»¶å·²ç»å¤„ç†å•èŠ‚ç‚¹é€»è¾‘ï¼Œè¿™æ ·çš„è¯ä»£ç ç»“æ„ä¼šæ¯”è¾ƒæ¸…æ™°</p><p><strong>æ³¨æ„ç»ˆæ­¢æ¡ä»¶æ˜¯ node === null</strong></p><p>æ—¶é—´å¤æ‚åº¦æ˜¯ O(m + n) ç©ºé—´å¤æ‚åº¦æ˜¯ O(m + n)</p><pre><code class="javascript">const mergeTwoLists = (l1, l2) =&gt; {  // l1 l2 ä¸ºç©ºçš„ç‰¹æ®Šå¤„ç†  if (l1 === null) {      return l2  }  if (l2 === null) {      return l1  }  // é€‰æ‹©å€¼å°çš„èŠ‚ç‚¹è¿”å›å¹¶å¤„ç† next æŒ‡å‘ä¸ºé€’å½’ç»“æœ  if (l1.val &lt; l2.val) {    l1.next = mergeTwoLists(l1.next, l2)    return l1  }  l2.next = mergeTwoLists(l1, l2.next)  return l2}</code></pre><h2 id="åˆå¹¶Kä¸ªæ’åºé“¾è¡¨-LeetCode-23"><a href="#åˆå¹¶Kä¸ªæ’åºé“¾è¡¨-LeetCode-23" class="headerlink" title="åˆå¹¶Kä¸ªæ’åºé“¾è¡¨ LeetCode#23"></a>åˆå¹¶Kä¸ªæ’åºé“¾è¡¨ LeetCode#23</h2><p>è¿™é¢˜æ˜¯ <a href="#åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨-LeetCode-21">åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</a>çš„å˜ç§ï¼Œæˆ‘é¦–å…ˆæƒ³åˆ°çš„æ–¹æ³•ä¸ #21-1 æ˜¯åŒæ ·çš„è§£æ³•ï¼Œåªä¸è¿‡ç”±æ¯”è¾ƒä¸¤ä¸ªæ•°çš„å¤§å°æ”¹ä¸ºæ¯”è¾ƒ K ä¸ªæ•°çš„å¤§å°ã€‚</p><h4 id="1-éå†-K-ä¸ªé“¾è¡¨"><a href="#1-éå†-K-ä¸ªé“¾è¡¨" class="headerlink" title="1. éå† K ä¸ªé“¾è¡¨"></a>1. éå† K ä¸ªé“¾è¡¨</h4><p>è¿™ç§è§£æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(k * n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(n)</p><pre><code class="javascript">const findMinIndex = (lists) =&gt; {  const len = lists.length  let min = null  let minIndex = -1  for (let i = 0; i &lt; len; i++) {    if (lists[i] === null) {      continue    }    if (min === null) {      min = lists[i].val      minIndex = i      continue    }    const curVal = lists[i].val    if (curVal &lt; min) {      minIndex = i      min = curVal    }  }  return minIndex}var mergeKLists = function(lists) {  let listLen = lists.length  // å¤„ç†ç‰¹æ®Šæƒ…å†µ  if (listLen === 0) {    return null  }  const head = new ListNode()  let pointer = head  while (listLen &gt; 0) {    minIndex = findMinIndex(lists)    if (minIndex &lt; 0) {      return head.next    }    pointer.next = lists[minIndex]    pointer = pointer.next    lists[minIndex] = lists[minIndex].next  }  return head.next}</code></pre><h4 id="2-åˆ†æ²»æ€æƒ³"><a href="#2-åˆ†æ²»æ€æƒ³" class="headerlink" title="2. åˆ†æ²»æ€æƒ³"></a>2. åˆ†æ²»æ€æƒ³</h4><p>è¿™æ˜¯ LeetCode å®˜æ–¹è§£ç­”ä¹‹ä¸€</p><p class="center"><img src="/2019/07/14/ç®—æ³•/é“¾è¡¨/LeetCode23Solution2.png" alt="LeetCode23Solution2"></p><pre><code class="javascript">const mergeKLists = (lists) =&gt; {  const len =  lists.length    let interval = 1    while (interval &lt; len) {      for(let i = 0; i &lt; len - interval; i = i + interval * 2) {        lists[i] = mergeTwoLists(lists[i], lists[i + interval])      }      interval = interval * 2    }    return len &gt; 0 ? lists[0] : null}</code></pre><h2 id="ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹-LeetCode-24"><a href="#ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹-LeetCode-24" class="headerlink" title="ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ LeetCode#24"></a>ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ LeetCode#24</h2><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åçš„é“¾è¡¨ã€‚<br>ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚<br>ç¤ºä¾‹:</p><pre><code>ç»™å®š 1-&gt;2-&gt;3-&gt;4, ä½ åº”è¯¥è¿”å› 2-&gt;1-&gt;4-&gt;3.</code></pre></blockquote><h4 id="1-éå†"><a href="#1-éå†" class="headerlink" title="1. éå†"></a>1. éå†</h4><p><strong>æ¯æ¬¡å¾ªç¯çš„ step ç›¸å½“äºç­‰äº 2</strong><br><strong>æ³¨æ„ç»ˆæ­¢æ¡ä»¶æœ‰ä¸¤ä¸ª<code>ä¸€ä¸ªæ˜¯å½“å‰èŠ‚ç‚¹ä¸º null</code> å¦ä¸€ä¸ªæ˜¯ <code>next èŠ‚ç‚¹ä¸º null</code></strong></p><p>è¯¥æ–¹æ³•æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ï¼Œç”±äºåˆ›å»ºæ–°çš„é“¾è¡¨é¡¾ç©ºé—´å¤æ‚åº¦ä¹Ÿä¸º O(n)</p><pre><code class="javascript">const swapPairs = (head) =&gt; {  if (head === null) {    return head  }  const _head = new ListNode()  // æŒ‡å‘è¿”å›é“¾è¡¨çš„å½“å‰èŠ‚ç‚¹  let cursor = _head  // æŒ‡å‘åŸå§‹é“¾è¡¨çš„å½“å‰èŠ‚ç‚¹  let pointer = head  while (pointer !== null) {    if (pointer.next === null) {      cursor.next = new ListNode(pointer.val)      cursor = cursor.next      break    }    // äº¤æ¢é“¾è¡¨èŠ‚ç‚¹å€¼    cursor.next = new ListNode(pointer.next.val)    cursor.next.next = new ListNode(pointer.val)    // å¾ªç¯æ­¥é•¿ä¸º 2    cursor = cursor.next.next    pointer = pointer.next.next  }  // æ³¨æ„å¤„ç†å°¾èŠ‚ç‚¹çš„ next ä¸º null  cursor.next = null  return _head.next}</code></pre><h4 id="2-é€’å½’æ³•"><a href="#2-é€’å½’æ³•" class="headerlink" title="2. é€’å½’æ³•"></a>2. é€’å½’æ³•</h4><pre><code class="javascript">const swapPairs = (head) =&gt; {  // ç‰¹æ®Šå¤„ç†  if (head === null || head.next === null) {    return head  }  const next = head.next  head.next = swapPairs(next.next)  next.next = head  return next}</code></pre><h2 id="K-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨-LeetCode-25"><a href="#K-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨-LeetCode-25" class="headerlink" title="K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ LeetCode#25"></a>K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ LeetCode#25</h2><blockquote><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ k ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ç¿»è½¬åçš„é“¾è¡¨ã€‚<br>k æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚<br>å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ k çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚<br>ç¤ºä¾‹:</p><pre><code>ç»™å®šè¿™ä¸ªé“¾è¡¨ï¼š1-&gt;2-&gt;3-&gt;4-&gt;5å½“ k = 2 æ—¶ï¼Œåº”å½“è¿”å›: 2-&gt;1-&gt;4-&gt;3-&gt;5å½“ k = 3 æ—¶ï¼Œåº”å½“è¿”å›: 3-&gt;2-&gt;1-&gt;4-&gt;5</code></pre><p>è¯´æ˜:<br>ä½ çš„ç®—æ³•åªèƒ½ä½¿ç”¨å¸¸æ•°çš„é¢å¤–ç©ºé—´ã€‚<br>ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚</p></blockquote><p>è¿™é¢˜æˆ‘çš„æƒ³æ³•æ˜¯ä¸¤ä¸ªæŒ‡é’ˆ ä¸€ä¸ªæŒ‡å‘æ¯æ¬¡è¦ç¿»è½¬çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹è®°ä¸º lastNodeï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆä»å½“å‰è¦åè½¬çš„èµ·å§‹ä½ç½®å¼€å§‹ä¸€ç›´èµ°åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹ è®°ä¸º curNodeï¼Œæ¯æ¬¡èµ°çš„æ—¶å€™ lastNode -&gt; curNodeï¼Œæ¥å®ç°ç¿»è½¬çš„ç›®çš„ã€‚<br>ä½†æ˜¯æäº¤çš„æ—¶å€™å„ç§è¾¹ç•Œæ¡ä»¶æ²¡æœ‰è€ƒè™‘æ¸…æ¥šï¼Œæäº¤äº†å¾ˆå¤šæ¬¡éƒ½æ²¡ acã€‚</p><h4 id="1-éå†-1"><a href="#1-éå†-1" class="headerlink" title="1. éå†"></a>1. éå†</h4><p>å¥½å§è¿™é¢˜å¤ªéš¾äº†ï¼Œä¸‹æ¬¡å†åš ğŸ˜<br>å›½é™…æƒ¯ä¾‹è®°ä¸€ä¸ª <em>TODO</em></p><h2 id="æ—‹è½¬é“¾è¡¨-LeetCode-61"><a href="#æ—‹è½¬é“¾è¡¨-LeetCode-61" class="headerlink" title="æ—‹è½¬é“¾è¡¨ LeetCode#61"></a>æ—‹è½¬é“¾è¡¨ LeetCode#61</h2><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œæ—‹è½¬é“¾è¡¨ï¼Œå°†é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹å‘å³ç§»åŠ¨ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°ã€‚<br>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL, k = 2è¾“å‡º: 4-&gt;5-&gt;1-&gt;2-&gt;3-&gt;NULLè§£é‡Š:å‘å³æ—‹è½¬ 1 æ­¥: 5-&gt;1-&gt;2-&gt;3-&gt;4-&gt;NULLå‘å³æ—‹è½¬ 2 æ­¥: 4-&gt;5-&gt;1-&gt;2-&gt;3-&gt;NULL</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: 0-&gt;1-&gt;2-&gt;NULL, k = 4è¾“å‡º: 2-&gt;0-&gt;1-&gt;NULLè§£é‡Š:å‘å³æ—‹è½¬ 1 æ­¥: 2-&gt;0-&gt;1-&gt;NULLå‘å³æ—‹è½¬ 2 æ­¥: 1-&gt;2-&gt;0-&gt;NULLå‘å³æ—‹è½¬ 3 æ­¥: 0-&gt;1-&gt;2-&gt;NULLå‘å³æ—‹è½¬ 4 æ­¥: 2-&gt;0-&gt;1-&gt;NULL</code></pre></blockquote><h4 id="1-æš´åŠ›è§£æ³•"><a href="#1-æš´åŠ›è§£æ³•" class="headerlink" title="1. æš´åŠ›è§£æ³•"></a>1. æš´åŠ›è§£æ³•</h4><p>è¿™æ˜¯æˆ‘æœ€å…ˆæƒ³åˆ°çš„è§£æ³•ï¼ŒæŠŠnode ä¿¡æ¯æ”¾åˆ°ä¸€ä¸ªæ•°ç»„é‡Œ<br>æ›´å…· k ä¾æ¬¡éå†å¯¹åº” Node è¿›è¡Œæ—‹è½¬</p><p>æ—¶é—´å¤æ‚åº¦ O(n + k) ç©ºé—´å¤æ‚åº¦ O(n)</p><pre><code class="javascript">// æ ¹æ®å³æ—‹å€¼ i è®¡ç®—åº”å½“ç§»åŠ¨çš„èŠ‚ç‚¹åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½®const calcIndex = (len, i) =&gt; {  if(len &gt; i) {    return len - i  }  const rest = i % len  let index = 0  if (rest) {    index = len - rest  }  return index}const rotateRight = (head, k) =&gt; {  // ç‰¹æ®Šæƒ…å†µ  if (k === 0) {    return head  }  const allLinks = []  let pointer = head  // è·å–é“¾è¡¨çš„æ‰€æœ‰ä¿¡æ¯  while (pointer !== null) {    allLinks.push(pointer)    pointer = pointer.next  }  const linksLen = allLinks.length  // æ— é“¾è¡¨æ•°æ®åŠåªæœ‰ 1 ä¸ªé“¾è¡¨æ•°æ®  if (linksLen === 0 || linksLen === 1) {    return head  }  // æ— æ•ˆå³æ—‹è¿‡æ»¤  k = k % linksLen  let _head = head  // å¼€å§‹å³æ—‹  for (let i = 1; i &lt;= k; i++) {    const index = calcIndex(linksLen, i)    const prevNodexIndex = calcIndex(linksLen, i + 1)    const curNode = allLinks[index]    const prevNode = allLinks[prevNodexIndex]    curNode.next = _head    prevNode.next = null    _head = curNode  }  return _head}</code></pre><h4 id="2-å½¢æˆç¯é“¾è¡¨æ³•"><a href="#2-å½¢æˆç¯é“¾è¡¨æ³•" class="headerlink" title="2. å½¢æˆç¯é“¾è¡¨æ³•"></a>2. å½¢æˆç¯é“¾è¡¨æ³•</h4><p>è¿™ç§è§£æ³•ä¹Ÿæ˜¯ LeetCode å®˜æ–¹è§£æ³•ä¹‹ä¸€ã€‚<br>å…¶æ€è·¯å°±æ˜¯å°†é“¾è¡¨æ„æˆä¸€ä¸ªç¯ï¼Œå†åœ¨å¯¹åº”çš„åœ°æ–¹åˆ‡æ–­ã€‚å°±è‡ªç„¶è€Œç„¶çš„å½¢æˆäº†å³ç§»</p><p>æ—¶é—´å¤æ‚åº¦ O(2n - k) ç©ºé—´å¤æ‚åº¦ O(1)</p><pre><code class="javascript">const rotateRight = (head, k) =&gt; {  // ç‰¹æ®Šæƒ…å†µå¤„ç†  if(head === null || head.next === null || k === 0) {    return head  }  // ç•™ä½å¤´ç»“ç‚¹ç¿»éæˆç¯  const _head = head  let linkLen = 1;  // å…ˆæ‰¾åˆ°å°¾èŠ‚ç‚¹ï¼Œå¹¶å¾—å‡ºé“¾è¡¨é•¿åº¦ç”¨äºåç»­è®¡ç®— æ‹†å¼€èŠ‚ç‚¹ä½ç½®  while (head.next !== null) {    head = head.next    linkLen += 1  }  // å½¢æˆé—­ç¯  head.next = _head  // è®¡ç®—åœ¨ä½•å¤„æ‹†å¼€èŠ‚ç‚¹  // è¿™ä¸€æ­¥å†³å®šäº†ç»“æœæ˜¯å¦æ­£ç¡®éå¸¸é‡è¦  // è¿™é‡Œè®¡ç®—è¦ç§»åŠ¨çš„ä½ç½®æ˜¯è¿”å›å€¼çš„è¡¨å°¾ï¼Œè¡¨å°¾ next å°±æ˜¯è¿”å›å€¼çš„ è¡¨å¤´  const breakKey = linkLen &lt; k ? linkLen - (k % linkLen) : linkLen - k  // ç§»åŠ¨åˆ°è¯¥èŠ‚ç‚¹  for (let i = 1; i &lt;= breakKey; i++) {    head = head.next  }  // æ‹†å¼€ç¯é“¾è¡¨  const rHead = head.next  head.next = null  return rHead}</code></pre><h2 id="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -II-LeetCode-82"><a href="#åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -II-LeetCode-82" class="headerlink" title="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II LeetCode#82"></a>åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II LeetCode#82</h2><blockquote><p>ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„èŠ‚ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­ æ²¡æœ‰é‡å¤å‡ºç° çš„æ•°å­—ã€‚<br>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: 1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5è¾“å‡º: 1-&gt;2-&gt;5</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: 1-&gt;1-&gt;1-&gt;2-&gt;3è¾“å‡º: 2-&gt;3</code></pre></blockquote><p>å› ä¸ºæ˜¯æœ‰åºé“¾è¡¨ï¼Œæ‰€ä»¥ä¾æ¬¡éå†ï¼Œæ¯”è¾ƒå½“å‰èŠ‚ç‚¹ä¸ä¸Šä¸€ä¸ªèŠ‚ç‚¹å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸€è‡´å¦‚æœæœ‰é‡å¤å°±ä¸è¿”å›</p><p>æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦ O(1)</p><pre><code class="javascript">const deleteDuplicates = (head) =&gt; {  const result = new ListNode()  let point = result  let cur = head  let prev = new ListNode(null)  while (cur !== null) {    /* ä¸¤ç§æƒ…å†µå¯è®¤ä¸ºè¯¥èŠ‚ç‚¹æœ‰æ•ˆ      1. å‰ç»§èŠ‚ç‚¹å€¼å’Œå½“å‰èŠ‚ç‚¹å€¼ä¸ä¸€æ · ä¸” åç»§å‡ ç‚¹ä¸º null      2. å‰ç»§èŠ‚ç‚¹å€¼å’Œå½“å‰èŠ‚ç‚¹å€¼ä¸ä¸€æ · ä¸” å½“å‰èŠ‚ç‚¹å€¼å’Œåç»§èŠ‚ç‚¹å€¼ä¸ä¸€æ · */    if (( prev.val !== cur.val &amp;&amp; cur.next === null)      || (prev.val !== cur.val &amp;&amp; cur.val !== cur.next.val)    ) {      // å°†å½“å‰èŠ‚ç‚¹åŠ å…¥      point.next = cur      point = point.next    }    prev = cur    cur = cur.next  }  // ï¼ï¼æ³¨æ„è¿™é‡Œè¦ å°¾èŠ‚ç‚¹ next ç½®ä¸º null  point.next = null  return result.next}</code></pre><h2 id="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -LeetCode-83"><a href="#åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -LeetCode-83" class="headerlink" title="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  LeetCode#83"></a>åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  LeetCode#83</h2><blockquote><p>ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚<br>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: 1-&gt;1-&gt;2è¾“å‡º: 1-&gt;2</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: 1-&gt;1-&gt;2-&gt;3-&gt;3è¾“å‡º: 1-&gt;2-&gt;3</code></pre></blockquote><p>è¿™é¢˜å’Œ #82 å¾ˆåƒæ€è·¯ä¹Ÿå·®ä¸å¤š<br>å› ä¸ºæ˜¯æœ‰åºçš„ï¼Œç›´æ¥æ¯”è¾ƒå½“å‰å€¼å’Œä¸‹ä¸€ä¸ªå€¼æ˜¯å¦ä¸€æ ·<br>å¦‚æœä¸€æ ·å°±æŠŠå½“å‰èŠ‚ç‚¹ next è½¬ä¸ºå…¶å­™å­èŠ‚ç‚¹ è¿™æ ·å°±å®ç°äº†åˆ é™¤é‡å¤èŠ‚ç‚¹</p><p>æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦ O(1)</p><pre><code class="javascript">const deleteDuplicates = (head) =&gt; {  let _head = head  while(_head) {    // ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹é‡å¤    if(_head.next &amp;&amp; _head.val === _head.next.val) {      // åˆ é™¤ä¸‹ä¸€ä¸ªé‡å¤èŠ‚ç‚¹      _head.next = _head.next.next      // ä¸ç§»åŠ¨ _head æŒ‡é’ˆï¼Œä¸‹ä¸€ä¸ªå€¼ç»§ç»­ä¸å½“å‰å¾ªç¯ _head æ¯”è¾ƒ      continue    }    _head = _head.next  }  return head}</code></pre><h2 id="åˆ†éš”é“¾è¡¨-LeetCode-86"><a href="#åˆ†éš”é“¾è¡¨-LeetCode-86" class="headerlink" title="åˆ†éš”é“¾è¡¨ LeetCode#86"></a>åˆ†éš”é“¾è¡¨ LeetCode#86</h2><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨å’Œä¸€ä¸ªç‰¹å®šå€¼ xï¼Œå¯¹é“¾è¡¨è¿›è¡Œåˆ†éš”ï¼Œä½¿å¾—æ‰€æœ‰å°äº x çš„èŠ‚ç‚¹éƒ½åœ¨å¤§äºæˆ–ç­‰äº x çš„èŠ‚ç‚¹ä¹‹å‰ã€‚<br>ä½ åº”å½“ä¿ç•™ä¸¤ä¸ªåˆ†åŒºä¸­æ¯ä¸ªèŠ‚ç‚¹çš„åˆå§‹ç›¸å¯¹ä½ç½®ã€‚<br>ç¤ºä¾‹:</p><pre><code>è¾“å…¥: head = 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;2, x = 3è¾“å‡º: 1-&gt;2-&gt;2-&gt;4-&gt;3-&gt;5</code></pre></blockquote><p>æ€è·¯ï¼š<br>ä¸¤ä¸ªæŒ‡é’ˆä¸€ä¸ªå« prev ä¸€ä¸ªå« nextï¼Œéå†é“¾è¡¨çš„åŒæ—¶åˆ†åˆ«å°†å€¼å¯¹åº”åˆ° prev å’Œ next é‡Œé¢<br>æœ€ç»ˆç»“æŸçš„æ—¶å€™å†è®² prev å’Œ next æ‹¼æ¥èµ·æ¥å¹¶è¿”å›</p><p>æ—¶é—´å¤æ‚åº¦ O(n) ç©ºé—´å¤æ‚åº¦ O(1)</p><pre><code class="javascript">const partition = (head, x) =&gt; {  // ç‰¹æ®Šå¤„ç†  if (head === null || head.next === null) {    return head  }  // å»ºä¸¤ä¸ªæŒ‡é’ˆ prev æ”¾ &lt; x çš„èŠ‚ç‚¹  let prev = new ListNode()  const prevHead = prev  // next æ”¾ &gt;= x çš„ èŠ‚ç‚¹  let next = new ListNode()  const nextHead = next  // éå†èŠ‚ç‚¹  while (head !== null) {    // åˆ¤æ–­å¹¶æ”¾å…¥èŠ‚ç‚¹åˆ°å¯¹åº”é“¾è¡¨    if (head.val &lt; x) {      prev.next = head      prev = prev.next    } else {      next.next = head      next = next.next    }    head = head.next  }  // ï¼ï¼å¤„ç†å°¾èŠ‚ç‚¹ next å€¼  next.next = null  // åˆå¹¶  prev.next = nextHead  return prevHead};</code></pre><h2 id="åè½¬é“¾è¡¨-II-LeetCode-92"><a href="#åè½¬é“¾è¡¨-II-LeetCode-92" class="headerlink" title="åè½¬é“¾è¡¨ II LeetCode#92"></a>åè½¬é“¾è¡¨ II LeetCode#92</h2><blockquote><p>åè½¬ä»ä½ç½® m åˆ° n çš„é“¾è¡¨ã€‚è¯·ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®Œæˆåè½¬ã€‚<br>è¯´æ˜:<br>1 â‰¤ m â‰¤ n â‰¤ é“¾è¡¨é•¿åº¦ã€‚<br>ç¤ºä¾‹:</p><pre><code>è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL, m = 2, n = 4è¾“å‡º: 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;NULL</code></pre></blockquote><h4 id="1-æ‹¼æ¥æ³•"><a href="#1-æ‹¼æ¥æ³•" class="headerlink" title="1. æ‹¼æ¥æ³•"></a>1. æ‹¼æ¥æ³•</h4><p>ä¾æ¬¡éå†ï¼Œå¹¶è®°å½•å…³é”®èŠ‚ç‚¹å’Œé“¾è¡¨</p><p>x &lt; m æ—¶è®°å½• prev<br>x = m æ—¶è®°å½• mNode<br>å½“ m &lt; x &lt;= n æ—¶å°†å½“å‰èŠ‚ç‚¹æ’å…¥ mNode ä¹‹å‰<br>x = n æ—¶è®°å½• nNode<br>è®°å½• nNode.next ä¸º next</p><p>é‚£æœ€ç»ˆç»“æœå°±æ˜¯ prev -&gt; nNode ~ mNode -&gt; next ä¸” nNode ~ mNode å·²ç»åè½¬å¥½äº†</p><p>æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)</p><pre><code class="javascript">const reverseBetween = (head, m, n) =&gt; {  if (m === n || head === null) {    return head  }  const _head = new ListNode()  let currentKey = 1  // ç¬¬ m ä¸ªèŠ‚ç‚¹å‰é¢çš„æ‰€æœ‰èŠ‚ç‚¹  let prev = _head  // ç¬¬ m ä¸ªèŠ‚ç‚¹  let mNode = null  // ç¬¬ n ä¸ªèŠ‚ç‚¹  let nNode = null  // ç¬¬ n ä¸ªå‡ ç‚¹çš„åä¸€ä¸ªèŠ‚ç‚¹  let next = null  // å½“å‰èŠ‚ç‚¹  let curNode = head  // åå‘æ’å…¥çš„å‡ ç‚¹  let point = null // æœ€ç»ˆç»“æœ å¯ä»¥è¿‘ä¼¼ä¸º // prev -&gt; nNode -&gt; n - m - 1 ä¸ª point ç¿»è½¬è€Œæˆçš„èŠ‚ç‚¹ -&gt; mNode -&gt; next  while (curNode !== null) {    const cNext = curNode.next    // ä¿å­˜ prev é“¾    if (currentKey &lt; m) {      prev.next = curNode      prev = prev.next    }    // ä¿å­˜ m èŠ‚ç‚¹ï¼Œåˆå§‹åŒ– point èŠ‚ç‚¹    if (currentKey === m) {      mNode = curNode      point = mNode    }    // ä¿å­˜ n èŠ‚ç‚¹ï¼Œnext èŠ‚ç‚¹    if (currentKey === n) {      nNode = curNode      next = cNext    }    // åè½¬èŠ‚ç‚¹    if(currentKey &gt; m &amp;&amp; currentKey &lt;= n) {      curNode.next = point      point = curNode    }    curNode = cNext    currentKey++  }  // æ‹¼æ¥åˆå¹¶èŠ‚ç‚¹  prev.next = nNode  mNode.next = next  return _head.next}</code></pre><h4 id="2-gt-LeetCode-å®˜æ–¹è§£ç­”"><a href="#2-gt-LeetCode-å®˜æ–¹è§£ç­”" class="headerlink" title="2. -&gt; LeetCode å®˜æ–¹è§£ç­”"></a>2. -&gt; <a href="https://leetcode-cn.com/problems/reverse-linked-list-ii/solution/fan-zhuan-lian-biao-ii-by-leetcode/" target="_blank" rel="noopener">LeetCode å®˜æ–¹è§£ç­”</a></h4><h2 id="ç¯å½¢é“¾è¡¨-LeetCode-141"><a href="#ç¯å½¢é“¾è¡¨-LeetCode-141" class="headerlink" title="ç¯å½¢é“¾è¡¨ LeetCode#141"></a>ç¯å½¢é“¾è¡¨ LeetCode#141</h2><blockquote><p>ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚<br>ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚</p><pre><code>ç¤ºä¾‹ 1ï¼šè¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1è¾“å‡ºï¼štrueè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚</code></pre><p><img src="/2019/07/14/ç®—æ³•/é“¾è¡¨/LeetCode141Question1.png" alt="LeetCode141Question1"></p><pre><code>ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼šhead = [1,2], pos = 0è¾“å‡ºï¼štrueè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</code></pre><p><img src="/2019/07/14/ç®—æ³•/é“¾è¡¨/LeetCode141Question2.png" alt="LeetCode141Question2"></p><pre><code>ç¤ºä¾‹ 3ï¼šè¾“å…¥ï¼šhead = [1], pos = -1è¾“å‡ºï¼šfalseè§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚</code></pre><p><img src="/2019/07/14/ç®—æ³•/é“¾è¡¨/LeetCode141Question3.png" alt="LeetCode141Question3"><br>è¿›é˜¶ï¼š<br>ä½ èƒ½ç”¨ O(1)ï¼ˆå³ï¼Œå¸¸é‡ï¼‰å†…å­˜è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ</p></blockquote><h4 id="1-ç¼“å­˜æ³•"><a href="#1-ç¼“å­˜æ³•" class="headerlink" title="1. ç¼“å­˜æ³•"></a>1. ç¼“å­˜æ³•</h4><p>æˆ‘çš„è§£æ³•æ˜¯ç”¨ä¸€ä¸ªæ•°ç»„ä¿å­˜æ¯ä¸ªèŠ‚ç‚¹ï¼Œç„¶ååˆ¤æ–­ Node æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œå¦‚æœå­˜åœ¨äº†å³ä¸ºæœ‰ç¯å½¢<br>ä½†æ˜¯è¿™ç§ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n ^ n) ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)</p><p>å¦‚æœå¯ä»¥ç”¨ hash è¡¨å¼€å­˜å‚¨å°±å¯ä»¥å°†æ—¶é—´å¤æ‚å˜ä¸º O(n)</p><pre><code class="javascript">// arrary memoryconst hasCycle = (head) =&gt; {  if(head === null) {    return false  }  const memory = []  while (head !== null) {    if (memory.indexOf(head) &gt; -1) {      return true    }    memory.push(head)    head = head.next  }  return false}// hash memoryconst hasCycle = (head) =&gt; {  if(head === null) {    return false  }  // set æ¨¡æ‹Ÿ hash table  const memory = new Set()  while (head !== null) {    if (memory.has(head)) {      return true    }    memory.add(head)    head = head.next  }  return false}</code></pre><h4 id="2-åŒæŒ‡é’ˆæ³•-1"><a href="#2-åŒæŒ‡é’ˆæ³•-1" class="headerlink" title="2. åŒæŒ‡é’ˆæ³•"></a>2. åŒæŒ‡é’ˆæ³•</h4><p>LeetCode è§£æ³•ä¹‹äºŒï¼Œè¿™ç§è§£æ³•æ²¡æœ‰æƒ³åˆ°ã€‚è¿™é‡Œå°±è¯´ä¸‹ LeetCode å®˜æ–¹çš„è§£é‡Šã€‚</p><p>é€šè¿‡ä½¿ç”¨å…·æœ‰ ä¸åŒé€Ÿåº¦ çš„å¿«ã€æ…¢ä¸¤ä¸ªæŒ‡é’ˆéå†é“¾è¡¨ï¼Œç©ºé—´å¤æ‚åº¦å¯ä»¥è¢«é™ä½è‡³ O(1)ã€‚æ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼Œè€Œå¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ã€‚</p><p>å¦‚æœåˆ—è¡¨ä¸­ä¸å­˜åœ¨ç¯ï¼Œæœ€ç»ˆå¿«æŒ‡é’ˆå°†ä¼šæœ€å…ˆåˆ°è¾¾å°¾éƒ¨ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¿”å› falseã€‚</p><p>ç°åœ¨è€ƒè™‘ä¸€ä¸ªç¯å½¢é“¾è¡¨ï¼ŒæŠŠæ…¢æŒ‡é’ˆå’Œå¿«æŒ‡é’ˆæƒ³è±¡æˆä¸¤ä¸ªåœ¨ç¯å½¢èµ›é“ä¸Šè·‘æ­¥çš„è¿åŠ¨å‘˜ï¼ˆåˆ†åˆ«ç§°ä¹‹ä¸ºæ…¢è·‘è€…ä¸å¿«è·‘è€…ï¼‰ã€‚è€Œå¿«è·‘è€…æœ€ç»ˆä¸€å®šä¼šè¿½ä¸Šæ…¢è·‘è€…ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè€ƒè™‘ä¸‹é¢è¿™ç§æƒ…å†µï¼ˆè®°ä½œæƒ…å†µ Aï¼‰- å‡å¦‚å¿«è·‘è€…åªè½åæ…¢è·‘è€…ä¸€æ­¥ï¼Œåœ¨ä¸‹ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œå®ƒä»¬å°±ä¼šåˆ†åˆ«è·‘äº†ä¸€æ­¥æˆ–ä¸¤æ­¥å¹¶ç›¸é‡ã€‚</p><pre><code class="javascript">const hasCycle = (head) =&gt; {  if (head === null || head.next === null) {    return false  }  let slow = head  let fast = head.next  while (slow !== fast) {    // å¿«æŒ‡é’ˆç»“æŸè¡¨ç¤ºæ— ç¯    if (fast === null || fast.next === null) {      return false    }    // æ…¢æŒ‡é’ˆèµ°ä¸€æ­¥    slow = slow.next    // å¿«æŒ‡é’ˆèµ°ä¸¤æ­¥    fast = fast.next.next  }  // æ…¢æŒ‡é’ˆå’Œå¿«æŒ‡é’ˆç›¸é‡  return true}</code></pre>]]></content>
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å‰ç«¯æ€§èƒ½ä¼˜åŒ–</title>
      <link href="/2019/06/17/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2019/06/17/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<h1 id="å‰ç«¯æ€§èƒ½ä¼˜åŒ–"><a href="#å‰ç«¯æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="å‰ç«¯æ€§èƒ½ä¼˜åŒ–"></a>å‰ç«¯æ€§èƒ½ä¼˜åŒ–</h1><blockquote><p>ã€å‰è¨€ã€‘<br>ä¹‹å‰é¢è¯•ä¸€ç›´è¢«é—®åˆ°ä¸€ä¸ªé—®é¢˜å°±æ˜¯å‰ç«¯æœ‰å“ªäº›æ€§èƒ½ä¼˜åŒ–çš„ç‚¹ï¼Œä½†æ˜¯æ¯æ¬¡å›ç­”è‡ªå·±éƒ½è§‰å¾—ä¸æ»¡æ„ ( 1. å›ç­”ä¸å®Œæ•´ï¼Œæœ‰æ‰€é—æ¼ 2. å›ç­”æ²¡æ¡ç†ï¼Œæƒ³åˆ°å“ªå°±è¯´åˆ°å“ª )<br>æ•…å¼€æ­¤ä¸€ç¯‡æ¢³ç†ä¸€ä¸‹ã€‚</p></blockquote><p>å…·ä½“ä¼˜åŒ–æ–¹å‘å¯ä»¥æ ¹æ®æµè§ˆå™¨ <code>performance</code> api ç»“åˆ Chrome DevelopTool Performance é¢æ¿è¿›è¡Œåˆ†æ</p><p>è¿™é‡Œå°±ä»‹ç»ä¸€äº›é€šç”¨çš„ä¼˜åŒ–æŠ€å·§</p><h3 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h3><p>å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚é€ æˆçš„å»¶è¿Ÿï¼Œç­‰å¾…ç­‰é—®é¢˜</p><h5 id="1-é™æ€èµ„æºéƒ¨ç½²åˆ°-CDN-Content-Delivery-Network"><a href="#1-é™æ€èµ„æºéƒ¨ç½²åˆ°-CDN-Content-Delivery-Network" class="headerlink" title="1. é™æ€èµ„æºéƒ¨ç½²åˆ° CDN (Content Delivery Network)"></a>1. é™æ€èµ„æºéƒ¨ç½²åˆ° CDN (Content Delivery Network)</h5><h5 id="2-DNS-Prefetch"><a href="#2-DNS-Prefetch" class="headerlink" title="2. DNS Prefetch"></a>2. DNS Prefetch</h5><p>ç”±äºæµè§ˆå™¨å¯¹å•ä¸ªåŸŸåçš„æœ€å¤§å¹¶å‘è¿æ¥æ•°æœ‰ä¸€å®šçš„é™åˆ¶ï¼ˆHTTP/1.0 å’Œ HTTP/1.1ï¼‰æ‰€ä»¥æœ‰çš„ç½‘ç«™ä¼šå¯¹èµ„æºçš„åŸŸååšæ‹†åˆ†ä»¥è¾¾åˆ°æœ€å¤§çš„è¯·æ±‚æ•°ä¼˜åŒ–ï¼Œè¿™å°±å¯¼è‡´éœ€è¦å¯¹è¿™äº›ä¸åŒçš„åŸŸåéœ€è¦åšå¤šæ¬¡ DNS è§£æã€‚DNS è¯·æ±‚éœ€è¦çš„å¸¦å®½éå¸¸å°ï¼Œä½†æ˜¯å»¶è¿Ÿå´æœ‰ç‚¹é«˜ï¼Œè¿™ç‚¹åœ¨æ‰‹æœºç½‘ç»œä¸Šç‰¹åˆ«æ˜æ˜¾ã€‚é¢„è¯»å– DNS èƒ½è®©å»¶è¿Ÿæ˜æ˜¾å‡å°‘ä¸€äº›ï¼Œä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»é“¾æ¥æ—¶ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå»¶è¿Ÿèƒ½å‡å°‘ä¸€ç§’é’Ÿã€‚ </p><p><code>dns-prefetch</code> å¯ä»¥è®©æµè§ˆå™¨å¯¹ç›¸åº”çš„åŸŸååšé¢„è§£æå¤„ç†ï¼Œæå‡åŠ è½½é€Ÿåº¦ã€‚</p><ul><li>æ‰“å¼€å’Œå…³é—­ DNS Prefetch</li></ul><pre><code class="html">&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot;&gt;&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;off&quot;&gt;</code></pre><ul><li>å¼ºåˆ¶æŸ¥è¯¢ç‰¹å®šä¸»æœºå</li></ul><pre><code class="html">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//www.example.com&quot;&gt;</code></pre><p><em>åŒç±»çš„æ ‡ç­¾å±æ€§è¿˜æœ‰ Preload, Prefetch</em></p><h5 id="3-åˆç†è®¾ç½®ç¼“å­˜"><a href="#3-åˆç†è®¾ç½®ç¼“å­˜" class="headerlink" title="3. åˆç†è®¾ç½®ç¼“å­˜"></a>3. åˆç†è®¾ç½®ç¼“å­˜</h5><p>å› ä¸ºç¼“å­˜çš„é—®é¢˜æ¯”è¾ƒå¹¿æ³›ï¼Œè¿™é‡Œåªæä¸€ä¸‹ï¼Œåç»­æ›´æ–°</p><h5 id="4-å‡å°‘-HTTP-è¯·æ±‚"><a href="#4-å‡å°‘-HTTP-è¯·æ±‚" class="headerlink" title="4. å‡å°‘ HTTP è¯·æ±‚"></a>4. å‡å°‘ HTTP è¯·æ±‚</h5><ul><li>åˆå¹¶ js/css</li><li>é›ªç¢§å›¾</li><li>base 64 å›¾ç‰‡</li><li>iconfont</li><li>å»¶æ—¶åŠ è½½</li><li>é¿å…ç©º href å’Œ src</li></ul><h5 id="5-å‡å°‘èµ„æºä½“ç§¯"><a href="#5-å‡å°‘èµ„æºä½“ç§¯" class="headerlink" title="5. å‡å°‘èµ„æºä½“ç§¯"></a>5. å‡å°‘èµ„æºä½“ç§¯</h5><ul><li>gzip å‹ç¼©</li><li>html/css/js å‹ç¼©</li><li>å›¾ç‰‡å‹ç¼©</li><li>å›¾ç‰‡æœåŠ¡å™¨åŠ¨æ€å“åº”</li></ul><h5 id="6-å‡å°‘é¡µé¢é‡å®šå‘"><a href="#6-å‡å°‘é¡µé¢é‡å®šå‘" class="headerlink" title="6. å‡å°‘é¡µé¢é‡å®šå‘"></a>6. å‡å°‘é¡µé¢é‡å®šå‘</h5><h5 id="7-åŸŸååˆ‡åˆ†"><a href="#7-åŸŸååˆ‡åˆ†" class="headerlink" title="7. åŸŸååˆ‡åˆ†"></a>7. åŸŸååˆ‡åˆ†</h5><p>å¦‚ #2 æè¿°ä½†æ˜¯åªé™ HTTP/1.0 HTTP/1.1 ä¸‹æœ‰æ„ä¹‰ï¼Œ HTTP/2.0 ååè€Œä¼šå½±å“é¡µé¢åŠ è½½é€Ÿåº¦</p><h3 id="æµè§ˆå™¨è§£ææ¸²æŸ“"><a href="#æµè§ˆå™¨è§£ææ¸²æŸ“" class="headerlink" title="æµè§ˆå™¨è§£ææ¸²æŸ“"></a>æµè§ˆå™¨è§£ææ¸²æŸ“</h3><h5 id="1-åˆç†çš„-HTML-ç»“æ„"><a href="#1-åˆç†çš„-HTML-ç»“æ„" class="headerlink" title="1. åˆç†çš„ HTML ç»“æ„"></a>1. åˆç†çš„ HTML ç»“æ„</h5><ul><li>css å¤´éƒ¨åŠ è½½ï¼Œjsæ”¾åœ¨å°¾éƒ¨</li><li>é¿å…å†…è”æ ·å¼</li><li>é¿å…ä½¿ç”¨ @import åŠ è½½ css</li></ul><h5 id="2-åˆç†ä½¿ç”¨å¼‚æ­¥è„šæœ¬åŠ è½½å’ŒåŠ¨æ€è„šæœ¬åŠ è½½"><a href="#2-åˆç†ä½¿ç”¨å¼‚æ­¥è„šæœ¬åŠ è½½å’ŒåŠ¨æ€è„šæœ¬åŠ è½½" class="headerlink" title="2. åˆç†ä½¿ç”¨å¼‚æ­¥è„šæœ¬åŠ è½½å’ŒåŠ¨æ€è„šæœ¬åŠ è½½"></a>2. åˆç†ä½¿ç”¨å¼‚æ­¥è„šæœ¬åŠ è½½å’ŒåŠ¨æ€è„šæœ¬åŠ è½½</h5><h5 id="3-è§¦å‘-GPU-æ¸²æŸ“åŠ é€Ÿ"><a href="#3-è§¦å‘-GPU-æ¸²æŸ“åŠ é€Ÿ" class="headerlink" title="3. è§¦å‘ GPU æ¸²æŸ“åŠ é€Ÿ"></a>3. è§¦å‘ GPU æ¸²æŸ“åŠ é€Ÿ</h5><h3 id="ä»£ç æ–¹é¢"><a href="#ä»£ç æ–¹é¢" class="headerlink" title="ä»£ç æ–¹é¢"></a>ä»£ç æ–¹é¢</h3><h5 id="1-DOM-æ“ä½œä¼˜åŒ–ï¼ˆè®¿é—®-DOM-æ—¶è€—æ€§èƒ½ä»¥åŠé¿å…é‡æ’ï¼‰"><a href="#1-DOM-æ“ä½œä¼˜åŒ–ï¼ˆè®¿é—®-DOM-æ—¶è€—æ€§èƒ½ä»¥åŠé¿å…é‡æ’ï¼‰" class="headerlink" title="1. DOM æ“ä½œä¼˜åŒ–ï¼ˆè®¿é—® DOM æ—¶è€—æ€§èƒ½ä»¥åŠé¿å…é‡æ’ï¼‰"></a>1. DOM æ“ä½œä¼˜åŒ–ï¼ˆè®¿é—® DOM æ—¶è€—æ€§èƒ½ä»¥åŠé¿å…é‡æ’ï¼‰</h5><ul><li>é¿å…é¢‘ç¹æ“ä½œ DOM</li><li>ç”¨ <code>className</code> ä»£æ›¿å†…è”æ ·å¼ä¿®æ”¹</li><li>å…ˆè®¾ç½®å…ƒç´ ä¸º <code>displayï¼šnoneï¼›</code> ç„¶åè¿›è¡Œé¡µé¢å¸ƒå±€ç­‰æ“ä½œï¼›è®¾ç½®å®Œæˆåå°†å…ƒç´ è®¾ç½®ä¸º <code>displayï¼šblockï¼›</code> è¿™æ ·çš„è¯å°±åªå¼•å‘ä¸¤æ¬¡é‡ç»˜å’Œé‡æ’</li><li>ä¸è¦ç»å¸¸è®¿é—®æµè§ˆå™¨çš„ <code>flush</code> é˜Ÿåˆ—å±æ€§ï¼›å¦‚æœä¸€å®šè¦è®¿é—®ï¼Œå¯ä»¥åˆ©ç”¨ç¼“å­˜ã€‚å°†è®¿é—®çš„å€¼å­˜å‚¨èµ·æ¥ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨å°±ä¸ä¼šå†å¼•å‘å›æµ</li><li>å°†éœ€è¦å¤šæ¬¡é‡æ’çš„å…ƒç´  <code>position</code> å±æ€§è®¾ä¸º <code>absolute</code> æˆ– <code>fixed</code>ï¼Œå…ƒç´ è„±ç¦»äº†æ–‡æ¡£æµï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šå½±å“åˆ°å…¶ä»–å…ƒç´ </li><li>å¦‚æœéœ€è¦åˆ›å»ºå¤šä¸ª DOM èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>DocumentFragment</code> åˆ›å»ºå®Œåä¸€æ¬¡æ€§çš„åŠ å…¥ document</li><li>é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€å’Œå¸ƒå±€æŠ–åŠ¨</li><li>å°½é‡ä¸è¦ä½¿ç”¨ <code>table</code> å¸ƒå±€</li><li>å°½é‡ä½¿ç”¨ css åŠ¨ç”»</li><li>ä½¿ç”¨ <code>requestAnimationFrame</code> ä»£æ›¿ <code>setInterval</code>ã€<code>setTimeout</code> æ“ä½œ</li><li>é€‚å½“ä½¿ç”¨ <code>canvas</code></li><li>å°½é‡å‡å°‘ css è¡¨è¾¾å¼çš„ä½¿ç”¨</li></ul><h5 id="2-ä½¿ç”¨äº‹ä»¶å§”æ‰˜"><a href="#2-ä½¿ç”¨äº‹ä»¶å§”æ‰˜" class="headerlink" title="2. ä½¿ç”¨äº‹ä»¶å§”æ‰˜"></a>2. ä½¿ç”¨äº‹ä»¶å§”æ‰˜</h5><h5 id="3-ä½¿ç”¨å±€éƒ¨å˜é‡"><a href="#3-ä½¿ç”¨å±€éƒ¨å˜é‡" class="headerlink" title="3. ä½¿ç”¨å±€éƒ¨å˜é‡"></a>3. ä½¿ç”¨å±€éƒ¨å˜é‡</h5><h5 id="4-é¿å…é•¿ä½œç”¨åŸŸé“¾"><a href="#4-é¿å…é•¿ä½œç”¨åŸŸé“¾" class="headerlink" title="4. é¿å…é•¿ä½œç”¨åŸŸé“¾"></a>4. é¿å…é•¿ä½œç”¨åŸŸé“¾</h5><h5 id="5-é«˜æ•ˆå­˜å‚¨æ•°æ®"><a href="#5-é«˜æ•ˆå­˜å‚¨æ•°æ®" class="headerlink" title="5. é«˜æ•ˆå­˜å‚¨æ•°æ®"></a>5. é«˜æ•ˆå­˜å‚¨æ•°æ®</h5><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><ul><li>æµè§ˆå™¨ç¼“å­˜</li><li>Performance</li></ul><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="https://www.w3.org/TR/resource-hints/#dns-prefetch" target="_blank" rel="noopener">Resource Hints</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Controlling_DNS_prefetching" target="_blank" rel="noopener">MDN DNS é¢„è¯»å–</a></p>]]></content>
      
      <categories>
          
          <category> å‰ç«¯æ€§èƒ½ä¼˜åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å‰ç«¯å›¾ç‰‡å‹ç¼©ä¸Šä¼ </title>
      <link href="/2019/03/08/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E4%B8%8A%E4%BC%A0/"/>
      <url>/2019/03/08/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E4%B8%8A%E4%BC%A0/</url>
      <content type="html"><![CDATA[<h1 id="å›¾ç‰‡å‹ç¼©"><a href="#å›¾ç‰‡å‹ç¼©" class="headerlink" title="å›¾ç‰‡å‹ç¼©"></a>å›¾ç‰‡å‹ç¼©</h1><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ€è¿‘ä¸šåŠ¡ä¸­é‡åˆ°äº†ç”¨æˆ·æŠ±æ€¨è¯´ä¸Šä¼ å›¾ç‰‡æ—¶é—´å¤ªé•¿ï¼Œæ„Ÿè§‰ä¸Šæ˜¯ç³»ç»Ÿç‰¹åˆ«æ…¢ã€‚</p><p>æ‰€ä»¥æ‰“ç®—å¯¹å›¾ç‰‡ä¸Šä¼ è¿›è¡Œä¼˜åŒ–ï¼Œå‰ç«¯å‹ç¼©åå†ä¸Šä¼ æ–‡ä»¶ã€‚</p><h2 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h2><p>ç»è¿‡æœç´¢åç›®å‰å¤§å®¶å¸¸ç”¨çš„å›¾ç‰‡å‹ç¼©æ–¹æ¡ˆæœ‰è¿™ä¹ˆå‡ ç§</p><ol><li><p><em>canvas</em> å‰ç«¯å‹ç¼© (ç§»åŠ¨ç«¯å¯¹ canvas æ”¯æŒæƒ…å†µè¾ƒå¥½ï¼Œèƒ½è§£å†³ç°æœ‰é—®é¢˜)</p></li><li><p><del>å¯¹å›¾ç‰‡å°ºå¯¸å‹ç¼©</del> (æ‰“å¡éœ€è¦ç”¨æˆ·ä¸èƒŒæ™¯çš„åˆç…§ï¼Œä¸èƒ½å¯¹å°ºå¯¸å‹ç¼©ä¼šä¸¢å¤±ä¿¡æ¯)</p></li><li><p><del>ä¸Šä¼ å›¾ç‰‡åç«¯å‹ç¼©</del> (éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ä¸Šä¼ æ…¢ï¼Œè¿™ç§æ–¹æ³•ä¸é€‚åˆå½“å‰åœºæ™¯)</p></li></ol><p>å¯¹æ¯”åæˆ‘é€‰æ‹©äº†ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œå°±æ˜¯ <em>canvas</em> å‹ç¼©å›¾ç‰‡çš„æ–¹æ¡ˆ</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h3><p><em>æœ‰ä¸ªå‰ææ¡ä»¶ ç”±äºé¡¹ç›®ä¸­æ˜¯è°ƒç”¨ç”¨æˆ·ç›¸æœºæ‹ç…§å¾—åˆ°çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦ check æ–‡ä»¶ç±»å‹</em></p><ol><li><p>æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦éœ€è¦å‹ç¼©</p></li><li><p>ä½¿ç”¨ FileReader å¯¹å›¾ç‰‡æ–‡ä»¶è¿›è¡Œè¯»å–ï¼Œå¹¶è½¬åŒ–ä¸º Base64 ç¼–ç çš„ dataURL</p></li><li><p>ç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„ Base64 ç¼–ç çš„å›¾ç‰‡è½¬åŒ–ä¸ºä¸€ä¸ª Image DOM å¯¹è±¡ (å› ä¸º canvas çš„ drawImage æ–¹æ³•ä¼ å…¥çš„å‚æ•°åªæ”¯æŒ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasImageSource" target="_blank" rel="noopener">Canvasâ€‹Imageâ€‹Source</a>)</p></li><li><p>è°ƒç”¨ canvas æ¥å£ç”»å‡ºå›¾åƒå¹¶è½¬ä¸ºå‹ç¼©åçš„ dataURL</p></li><li><p>å°†å‹ç¼©åçš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨</p></li></ol><p class="center"><img src="/2019/03/08/å‰ç«¯/å‰ç«¯å›¾ç‰‡å‹ç¼©ä¸Šä¼ /canvasCompress.png" alt="å›¾ç‰‡å‹ç¼©"></p><h4 id="file2DataURL-å®ç°"><a href="#file2DataURL-å®ç°" class="headerlink" title="file2DataURL å®ç°"></a>file2DataURL å®ç°</h4><pre><code class="JavaScript">// å›¾ç‰‡æ–‡ä»¶è½¬ Base64 ç¼–ç const file2DataURL = (file, callback) =&gt; {  const reader = new FileReader();  reader.onload = function () {    const dataURL = this.result;    callback(dataURL);  };  reader.readAsDataURL(file);};</code></pre><h4 id="dataURL2Image-å®ç°"><a href="#dataURL2Image-å®ç°" class="headerlink" title="dataURL2Image å®ç°"></a>dataURL2Image å®ç°</h4><pre><code class="JavaScript">// dataURL è½¬ img å¯¹è±¡const dataURL2Image = (dataURL, callback) =&gt; {  const img = new Image();  img.onload = () =&gt; {    callback(img);  };  img.src = dataURL;};</code></pre><h4 id="canvasCompress-å®ç°"><a href="#canvasCompress-å®ç°" class="headerlink" title="canvasCompress å®ç°"></a>canvasCompress å®ç°</h4><pre><code class="JavaScript">// canvas å‹ç¼©å›¾ç‰‡const canvasCompress = (img, quality, type) =&gt; {  const canvas = document.createElement(&#39;canvas&#39;);  const { width, height } = img;  canvas.width = width;  canvas.height = height;  const context =  canvas.getContext(&#39;2d&#39;);  context.drawImage(img, 0, 0, width, height);  const compressedDataURL = canvas.toDataURL(type, quality);  return compressedDataURL;};</code></pre><h4 id="dataURL2Blob-å®ç°"><a href="#dataURL2Blob-å®ç°" class="headerlink" title="dataURL2Blob å®ç°"></a>dataURL2Blob å®ç°</h4><pre><code class="JavaScript">// dataURL è½¬ blob æµconst dataURL2Blob = (dataURL, type) =&gt; {  const text = window.atob(dataURL.split(&quot;,&quot;)[1]);  const buffer = new ArrayBuffer(text.length);  const ubuffer = new Uint8Array(buffer);  for (let i = 0; i &lt; text.length; i++) {      ubuffer[i] = text.charCodeAt(i);  }  const blob = new window.Blob([buffer], { type });  return blob;};</code></pre><h4 id="compress-å®ç°"><a href="#compress-å®ç°" class="headerlink" title="compress å®ç°"></a>compress å®ç°</h4><pre><code class="JavaScript">/** * @param {File} source  å›¾ç‰‡æºæ–‡ä»¶ * @param {Number} quality å‹ç¼©è´¨é‡ - é»˜è®¤ä¸å‹ç¼© 0 ~ 1 * @param {Number} maxSize å¤§å°é™åˆ¶ - é»˜è®¤ 1 MB,ï¼ˆ1Mä»¥ä¸Šå°±è¦å‹ç¼©ï¼‰ */const compress = (source, callback, quality = 1, maxSize = 1) =&gt; {  // quality å‚æ•°é”™è¯¯ä¸å‹ç¼©ç›´æ¥è¿”å›  if(quality &gt; 1) {    return callback(source);  }  // å•ä½è½¬æ¢  maxSize = maxSize * 1024 * 1024;  // å¯¹ img å‚æ•°åšç®€å•çš„åˆ¤æ–­;  if(!source || !(source instanceof File)){    return callback(source);  }  // å›¾ç‰‡å°äºé™åˆ¶åˆ™ä¸å‹ç¼©  if(source.size &lt;= maxSize) {    return callback(source);  }  try {    const type = source.type;    file2DataURL(source, (dataURL) =&gt; {      dataURL2Image(dataURL, (img) =&gt; {        const compressedDataURL = canvasCompress(img, quality, type);        const compressedResult = dataURL2Blob(compressedDataURL, type);        compressedResult.fileName = source.name;        callback(compressedResult);      });    });  } catch (e) {    // process error  }};</code></pre><p>ç›®å‰ä½¿ç”¨å›è°ƒçš„æ–¹å¼è°ƒç”¨æœ€ç»ˆçœ‹èµ·æ¥ä¼šæœ‰ç‚¹ä¹±ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ä¼˜åŒ–æ”¹æˆ Promise + async await çš„æ–¹å¼è¿™æ ·çœ‹èµ·æ¥ç»“æ„ä¼šå¥½å¾ˆå¤šã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader" target="_blank" rel="noopener">FileReader</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage" target="_blank" rel="noopener">Canvasâ€‹Renderingâ€‹Context2D.drawâ€‹Image()</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL" target="_blank" rel="noopener">HTMLCanvasâ€‹Elementâ€‹.toDataURL()</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Blob" target="_blank" rel="noopener">Blob</a></p>]]></content>
      
      <categories>
          
          <category> å›¾ç‰‡å‹ç¼© </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ä¼˜åŒ– </tag>
            
            <tag> å›¾ç‰‡å‹ç¼© </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Lodash.concat æºç é˜…è¯»</title>
      <link href="/2019/02/19/Lodash%20%E7%B3%BB%E5%88%97/concat/"/>
      <url>/2019/02/19/Lodash%20%E7%B3%BB%E5%88%97/concat/</url>
      <content type="html"><![CDATA[<h1 id="Lodash-æºç é˜…è¯»ï¼ˆå››ï¼‰"><a href="#Lodash-æºç é˜…è¯»ï¼ˆå››ï¼‰" class="headerlink" title="Lodash æºç é˜…è¯»ï¼ˆå››ï¼‰"></a>Lodash æºç é˜…è¯»ï¼ˆå››ï¼‰</h1><h2 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h2><p>è¯¥æ–¹æ³•çš„æ•ˆæœåŒ Array.concat</p><p>var array = [1];<br>var other = _.concat(array, 2, [3], [[4]]);<br>console.log(array.concat(2, [3], [[4]]));  // =&gt; [1, 2, 3, [4]]<br>console.log(other);  // =&gt; [1, 2, 3, [4]]</p><pre><code class="JavaScript">import arrayPush from &#39;./_arrayPush.js&#39;;import baseFlatten from &#39;./_baseFlatten.js&#39;;import copyArray from &#39;./_copyArray.js&#39;;import isArray from &#39;./isArray.js&#39;;function concat() {  var length = arguments.length;  if (!length) {    return [];  }  var args = Array(length - 1),      array = arguments[0],      index = length;  while (index--) {    args[index - 1] = arguments[index];  }  return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));}</code></pre><h3 id="å·¥å…·å‡½æ•°"><a href="#å·¥å…·å‡½æ•°" class="headerlink" title="å·¥å…·å‡½æ•°"></a>å·¥å…·å‡½æ•°</h3><h4 id="arrayPush"><a href="#arrayPush" class="headerlink" title="_arrayPush"></a>_arrayPush</h4><p>param1: <code>array</code></p><p>param2: <code>values</code></p><p>ä¸¤ä¸ªå‚æ•°å‡ä¸ºæ•°ç»„ï¼Œå°†ç¬¬äºŒä¸ªæ•°ç»„ä¸­æ¯ä¸ªå€¼ push åˆ° ç¬¬ä¸€ä¸ªå‚æ•°åé¢</p><h5 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h5><pre><code class="Javascript">var array = [1, 2, 3, 4];var values = [5, 6, 7, [8], &quot;9&quot;];console.log(arrayPush(array, values)); // [1, 2, 3, 4, 5, 6, 7, [8], &quot;9&quot;]</code></pre><h5 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h5><pre><code class="Javascript">function arrayPush(array, values) {  var index = -1,      length = values.length,      offset = array.length;  // å¾ªç¯å°† values é‡Œçš„å€¼æŒ¨ä¸ªæ”¾åˆ° array ä¸­å¹¶è¿”å› array  while (++index &lt; length) {    array[offset + index] = values[index];  }  return array;}</code></pre><h4 id="copyArray"><a href="#copyArray" class="headerlink" title="_copyArray"></a>_copyArray</h4><p>param1: <code>source</code> ä¸ºå¾…å¤åˆ¶ï¼ˆæµ…å¤åˆ¶ï¼‰çš„æ•°ç»„</p><p>param2: <code>array</code>  ä¸ºç›®æ ‡æ•°ç»„æˆ–ä¸ºç©º</p><h5 id="ä½¿ç”¨ç¤ºä¾‹-1"><a href="#ä½¿ç”¨ç¤ºä¾‹-1" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h5><pre><code class="Javascript">copyArray([1, 2, 3]); // [1, 2, 3]</code></pre><h5 id="æºç -1"><a href="#æºç -1" class="headerlink" title="æºç "></a>æºç </h5><pre><code class="Javascript">function copyArray(source, array) {  var index = -1,      length = source.length;  array || (array = Array(length));  while (++index &lt; length) {    // æµ…å¤åˆ¶    array[index] = source[index];  }  return array;}</code></pre><h4 id="baseFlatten"><a href="#baseFlatten" class="headerlink" title="_baseFlatten"></a>_baseFlatten</h4><p>param1: <code>array</code> æƒ³è¦æ‰å¹³åŒ–çš„æ•°ç»„</p><p>param2: <code>depth</code> æ‰å¹³åŒ–çš„æ·±åº¦</p><p>param3: <code>predicate</code> åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰å¹³åŒ–çš„å‡½æ•°</p><p>param4: <code>isStrict</code></p><p>param5: <code>result</code></p><h5 id="ä½¿ç”¨ç¤ºä¾‹-2"><a href="#ä½¿ç”¨ç¤ºä¾‹-2" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h5><pre><code class="Javascript">baseFlatten([1, [2], 3, [4, 5, [6, 7]]], 1); // [1, 2, 3, 4, 5, [6, 7]]</code></pre><h5 id="æºç -2"><a href="#æºç -2" class="headerlink" title="æºç "></a>æºç </h5><pre><code class="Javascript">import arrayPush from &#39;./_arrayPush.js&#39;;import isFlattenable from &#39;./_isFlattenable.js&#39;;function baseFlatten(array, depth, predicate, isStrict, result) {  var index = -1,      length = array.length;  predicate || (predicate = isFlattenable);  result || (result = []);  while (++index &lt; length) {    var value = array[index];    // å¦‚æœå½“å‰æ·±åº¦å¤§äº 0 ä¸”å½“å‰å€¼æ˜¯å¯ä»¥æ‰å¹³åŒ–çš„    if (depth &gt; 0 &amp;&amp; predicate(value)) {      if (depth &gt; 1) {        // é€’å½’å»æ‰å¹³åŒ–æ•°ç»„        // Recursively flatten arrays (susceptible to call stack limits).        baseFlatten(value, depth - 1, predicate, isStrict, result);      } else {        // depth === 1 æ—¶è¯¥å‡½æ•°å®Œæˆäº†æ‰å¹³åŒ–ï¼Œè¿›è¡Œèµ‹å€¼æ“ä½œ        arrayPush(result, value);      }    } else if (!isStrict) { // é™åˆ¶å“ªäº›æ²¡æœ‰é€šè¿‡æ‰å¹³åŒ–æµ‹è¯•çš„å€¼ï¼Œå¦‚æœä¸æ˜¯ä¸¥æ ¼å‹çš„å°±èµ‹å€¼ï¼Œå¦‚æœæ˜¯ä¸¥æ ¼å‹çš„å°±ä¸¢å¼ƒ      result[result.length] = value;    }  }  return result;}</code></pre><h4 id="isFlattenable"><a href="#isFlattenable" class="headerlink" title="_isFlattenable"></a>_isFlattenable</h4><p>param1: <code>value</code> å¾…åˆ¤æ–­æ˜¯å¦å¯ä»¥åšæ‰å¹³åŒ–æ“ä½œçš„å€¼</p><h5 id="æºç -3"><a href="#æºç -3" class="headerlink" title="æºç "></a>æºç </h5><pre><code class="Javascript">import Symbol from &#39;./_Symbol.js&#39;;import isArguments from &#39;./isArguments.js&#39;;import isArray from &#39;./isArray.js&#39;;/** Built-in value references. */var spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;function isFlattenable(value) {  return isArray(value) || isArguments(value) ||    !!(spreadableSymbol &amp;&amp; value &amp;&amp; value[spreadableSymbol]);}</code></pre>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Lodash </tag>
            
            <tag> concat </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Lodash.compact æºç é˜…è¯»</title>
      <link href="/2019/02/18/Lodash%20%E7%B3%BB%E5%88%97/compact/"/>
      <url>/2019/02/18/Lodash%20%E7%B3%BB%E5%88%97/compact/</url>
      <content type="html"><![CDATA[<h1 id="Lodash-æºç é˜…è¯»ï¼ˆä¸‰ï¼‰"><a href="#Lodash-æºç é˜…è¯»ï¼ˆä¸‰ï¼‰" class="headerlink" title="Lodash æºç é˜…è¯»ï¼ˆä¸‰ï¼‰"></a>Lodash æºç é˜…è¯»ï¼ˆä¸‰ï¼‰</h1><h2 id="compact"><a href="#compact" class="headerlink" title="compact"></a>compact</h2><p>å°†ä¸€ä¸ªæ•°ç»„å˜ä¸ºç´§å‡‘æ•°ç»„</p><p>Creates an array with all falsey values removed. The values <code>false</code>, <code>null</code>, <code>0</code>, <code>&quot;&quot;</code>, <code>undefined</code>, and <code>NaN</code> are falsey.</p><p>å…¶æ€æƒ³å°±æ˜¯å°†ä¼ è¿›æ¥çš„æ•°ç»„åšä¸€ä¸ªå¾ªç¯ï¼ŒæŠŠæ‰€æœ‰ä¸æ˜¯ falsey çš„éƒ¨åˆ†æŒ¨ä¸ªæ”¾åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚</p><pre><code class="JavaScript">function compact(array) {  var index = -1,      length = array == null ? 0 : array.length,   // å¯¹ length æœ‰æ•ˆå€¼åšå¤„ç†      resIndex = 0,      result = [];  // å¯¹ä¼ å‚çš„æ•°ç»„åšå¾ªç¯  while (++index &lt; length) {    var value = array[index];    if (value) {      // å°†é falsey çš„å€¼æ”¾åˆ°æ–°æ•°ç»„ result é‡Œ      result[resIndex++] = value;    }  }  return result;}</code></pre><h2 id="è‡ªå·±çš„ç®€å•å®ç°"><a href="#è‡ªå·±çš„ç®€å•å®ç°" class="headerlink" title="è‡ªå·±çš„ç®€å•å®ç°"></a>è‡ªå·±çš„ç®€å•å®ç°</h2><pre><code class="JavaScript">function compact(array) {  // array  if (array == null) {    return [];  }  return array.filter(value =&gt; value);}</code></pre>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Lodash </tag>
            
            <tag> compact </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Lodash.slice &amp; Lodash.chunk æºç é˜…è¯»</title>
      <link href="/2019/02/14/Lodash%20%E7%B3%BB%E5%88%97/slice%20&amp;%20chunk/"/>
      <url>/2019/02/14/Lodash%20%E7%B3%BB%E5%88%97/slice%20&amp;%20chunk/</url>
      <content type="html"><![CDATA[<h1 id="Lodash-æºç é˜…è¯»ï¼ˆäºŒï¼‰"><a href="#Lodash-æºç é˜…è¯»ï¼ˆäºŒï¼‰" class="headerlink" title="Lodash æºç é˜…è¯»ï¼ˆäºŒï¼‰"></a>Lodash æºç é˜…è¯»ï¼ˆäºŒï¼‰</h1><h2 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h2><p>å‚æ•° <code>array</code> ä¸º æ•°ç»„ç±»å‹ï¼Œ <code>start</code> å’Œ <code>end</code> æ•°å­—ã€‚</p><p>è¾“å‡ºæ•°ç»„ç¬¬ <code>start</code> ä¸ªå€¼åˆ° ç¬¬ <code>end</code> ä¸ªå€¼ç»„æˆçš„æ•°ç»„ï¼Œéæ³•æ—¶æ—¶ç©ºæ•°ç»„ã€‚ï¼ˆ<code>start</code>, <code>end</code> ä¸æ˜¯ç´¢å¼•å€¼ï¼Œè€Œæ˜¯<em>å­—é¢æ„ä¹‰</em>çš„æ•°ç»„ä¸­çš„<code>ç¬¬ N ä¸ªå€¼</code>ï¼‰</p><pre><code class="JavaScript">function slice(array, start, end) {  // array é•¿åº¦ä¸º 0 æˆ–ä¸å­˜åœ¨ç›´æ¥è¿”å›ç©ºæ•°ç»„  let length = array == null ? 0 : array.length  if (!length) {    return []  }  // start é»˜è®¤å€¼ 0  start = start == null ? 0 : start  // end é»˜è®¤å€¼ä¸º æ•°ç»„é•¿åº¦  end = end === undefined ? length : end  if (start &lt; 0) {    // start &lt; 0 æ—¶çš„ç‰¹æ®Šå¤„ç†    // ç›®çš„ä½¿ start åœ¨ 0 ~ length çš„èŒƒå›´å†…    start = -start &gt; length ? 0 : (length + start)  }  // end å¤§äºæ•°ç»„é•¿åº¦æ—¶ä¿®æ”¹å€¼ä¸ºæ•°ç»„é•¿åº¦  end = end &gt; length ? length : end  // end &lt; 0 æ—¶çš„ç‰¹æ®Šå¤„ç†  if (end &lt; 0) {    end += length  }  // start å’Œ end éƒ½åœ¨èŒƒå›´å†…ååˆ¤æ–­ length çš„é•¿åº¦ï¼Œå¦‚æœ start &gt; end éæ³•åˆ™è¾“å‡ºç©ºæ•°ç»„  length = start &gt; end ? 0 : ((end - start) &gt;&gt;&gt; 0)  // start å–æ•´ï¼Œå› ä¸º start åœ¨å°äºé›¶æ—¶å·²ç‰¹æ®Šå¤„ç†ä¸ºæ­£æ•°ã€‚è‹¥ start æ­¤æ—¶ä¸ºè´Ÿæ•°åˆ™ä¸å¯ç”¨ &gt;&gt;&gt; å–æ•´  start &gt;&gt;&gt;= 0  let index = -1  // åˆ†é…å†…å­˜  const result = new Array(length)  // index 0 ~ length  while (++index &lt; length) {    // å¾ªç¯èµ‹å€¼    result[index] = array[index + start]  }  return result}</code></pre><h2 id="chunk"><a href="#chunk" class="headerlink" title="chunk"></a>chunk</h2><p>å°†ä¸€ä¸ªæ•°ç»„æŒ‰å›ºå®šå¤§å°(<code>size</code>)åˆ†å‰²ï¼Œä¾‹å¦‚ï¼š</p><ul><li>chunk([â€˜aâ€™, â€˜bâ€™, â€˜câ€™, â€˜dâ€™], 2) è¾“å‡ºä¸º [[â€˜aâ€™, â€˜bâ€™], [â€˜câ€™, â€˜dâ€™]]</li><li>chunk([â€˜aâ€™, â€˜bâ€™, â€˜câ€™, â€˜dâ€™], 3) è¾“å‡ºä¸º [[â€˜aâ€™, â€˜bâ€™, â€˜câ€™], [â€˜dâ€™]]</li></ul><pre><code class="JavaScript">function chunk(array, size) {  // size æœ€å°ä¸º 0  size = Math.max(size, 0)  const length = array == null ? 0 : array.length  // length â€å°äºâ€œ 1 æˆ– size â€å°äºâ€œ 1 è¿”å›ç©ºæ•°ç»„  if (!length || size &lt; 1) {    return []  }  let index = 0  let resIndex = 0  // åˆ†é…å†…å­˜ï¼Œæ•°ç»„é•¿åº¦ æŒ‰ length / size å‘ä¸Šå–æ•´  const result = new Array(Math.ceil(length / size))  while (index &lt; length) {    // å¾ªç¯ä¸º result èµ‹å€¼    result[resIndex++] = slice(array, index, (index += size))  }  return result}</code></pre><h5 id="æµè§ˆå™¨è°ƒç”¨"><a href="#æµè§ˆå™¨è°ƒç”¨" class="headerlink" title="æµè§ˆå™¨è°ƒç”¨"></a>æµè§ˆå™¨è°ƒç”¨</h5><p>å› ä¸ºæˆ‘æ²¡æœ‰æ‰¾åˆ°åœ¨çº¿ä½¿ç”¨ <code>lodash</code> çš„ç½‘ç«™ï¼Œä¸‹é¢è¿™æ®µä»£ç åªæ˜¯ä¸ºäº†æ–¹ä¾¿è‡ªå·±åœ¨æµè§ˆå™¨é‡Œè°ƒç”¨ <code>lodash</code> çš„æ–¹æ³•ï¼ŒåŠ æ·±ç†è§£ã€‚ </p><pre><code class="Javascript">var script = document.createElement(&#39;script&#39;);script.src = &quot;https://cdn.bootcss.com/lodash.js/4.17.11/lodash.js&quot;;document.body.appendChild(script);</code></pre>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Lodash </tag>
            
            <tag> slice </tag>
            
            <tag> chunk </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Lodash.debounce æºç é˜…è¯»</title>
      <link href="/2019/01/25/Lodash%20%E7%B3%BB%E5%88%97/debounce/"/>
      <url>/2019/01/25/Lodash%20%E7%B3%BB%E5%88%97/debounce/</url>
      <content type="html"><![CDATA[<h1 id="Lodash-æºç é˜…è¯»ï¼ˆä¸€ï¼‰"><a href="#Lodash-æºç é˜…è¯»ï¼ˆä¸€ï¼‰" class="headerlink" title="Lodash æºç é˜…è¯»ï¼ˆä¸€ï¼‰"></a>Lodash æºç é˜…è¯»ï¼ˆä¸€ï¼‰</h1><h2 id="å‰è¨€å°çµ®å¨"><a href="#å‰è¨€å°çµ®å¨" class="headerlink" title="å‰è¨€å°çµ®å¨"></a>å‰è¨€å°çµ®å¨</h2><p>è·ç¦»ä¸Šæ¬¡å†™åšå®¢å·²ç»è¿‡äº†å¤§æ¦‚ 4 ä¸ªæœˆäº†ï¼Œè‡ªä»åˆ°äº†è´å£³ä¸šåŠ¡è¶Šæ¥è¶Šå¤šï¼Œä¸€åˆ°å‘¨æœ«å°±ç´¯å¾—ä»€ä¹ˆä¹Ÿä¸æƒ³å¹²ã€‚æœ€è¿‘åˆšå¿™å®Œ H5 çš„é¡¹ç›®ï¼ˆğŸ˜åç»­å¯ä»¥æ¥ä¸€ç¯‡ä¼å¾®æµè§ˆå™¨ä½¿ç”¨è“ç‰™çš„å°æ€»ç»“æ„Ÿè§‰å¾ˆæœ‰æ„æ€ï¼‰åˆæ¥è¿‘å¹´å…³ OP å°æ¿åœæ­¢å‘å¸ƒã€‚è™½ç„¶éœ€æ±‚ä¹Ÿåœ¨æ’ç€ï¼Œä½†æ˜¯æƒ³å†™å†™è‡ªå·±çš„ä¸œè¥¿ã€‚</p><h2 id="å¸¸è§ç”¨æ³•"><a href="#å¸¸è§ç”¨æ³•" class="headerlink" title="å¸¸è§ç”¨æ³•"></a>å¸¸è§ç”¨æ³•</h2><p><code>debounce</code> å°±æ˜¯å‡½æ•°é˜²æŠ–ï¼Œå½“å‡½æ•°ä¸€ç›´è¢«è§¦å‘æ—¶ç­‰åˆ° waiting æ—¶é—´åˆ°äº†ä¹‹åå†æ‰§è¡Œï¼Œå¸¸è§ç”¨æ³•å°±æ˜¯é˜²æ­¢ç”¨æˆ·å¤šæ¬¡ç‚¹å‡»æˆ–è€…å½“ä¸€ä¸ªå‡½æ•°ä¼šé¢‘ç¹è§¦å‘è€Œåˆæ²¡æœ‰å¿…è¦è°ƒç”¨é‚£ä¹ˆå¤šæ¬¡æ—¶ä½¿ç”¨è¯¥å‡½æ•°ï¼ˆæˆ–å‡½æ•°èŠ‚æµï¼‰ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</p><h2 id="debounce"><a href="#debounce" class="headerlink" title="debounce"></a>debounce</h2><pre><code class="JavaScript">// lodash debouncefunction debounce(func, wait, options) {  let lastArgs,    lastThis,    maxWait,    result,    timerId,    lastCallTime  let lastInvokeTime = 0 // ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶é—´  let leading = false    // å¼€å§‹æ˜¯å¦æ‰§è¡Œ  let maxing = false     // æ˜¯å¦æœ‰æœ€å¤§ç­‰å¾…æ—¶é—´  let trailing = true    // ç»“æŸæ˜¯å¦æ‰§è¡Œ  // Bypass `requestAnimationFrame` by explicitly setting `wait=0`.  // æ˜¯å¦ä½¿ç”¨ requestAnimationFrame  // å½“å¿½ç•¥ wait æ—¶ä¼šä½¿ç”¨ requestAnimationFrame ä¸‹ä¸€å¸§æ—¶å°±è°ƒç”¨å‡½æ•°ã€‚ï¼ˆ16msï¼‰  const useRAF = (!wait &amp;&amp; wait !== 0 &amp;&amp; typeof root.requestAnimationFrame === &#39;function&#39;)  // å¦‚æœ func ä¸æ˜¯å‡½æ•°ç›´æ¥æŠ›å‡ºé”™è¯¯  if (typeof func != &#39;function&#39;) {    throw new TypeError(&#39;Expected a function&#39;)  }  // è·å–é…ç½®é¡¹  // +arg ç±»ä¼¼ä¸€ä¸ªç®€å•çš„ toNumber(arg)  wait = +wait || 0  if (isObject(options)) {    leading = !!options.leading    maxing = &#39;maxWait&#39; in options    maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : maxWait    trailing = &#39;trailing&#39; in options ? !!options.trailing : trailing  }  // è°ƒç”¨ func  function invokeFunc(time) {          // time è°ƒç”¨æ—¶çš„æ—¶é—´æˆ³    const args = lastArgs              // è°ƒç”¨çš„å‚æ•°    const thisArg = lastThis           // è°ƒç”¨çš„ this    lastArgs = lastThis = undefined    // æ¸…é™¤ lastArgs å’Œ lastThis    lastInvokeTime = time              // è®°å½•è°ƒç”¨æ—¶é—´    result = func.apply(thisArg, args) // è°ƒç”¨ func å¹¶å°†ç»“æœè¿”å›    return result  }  // å¼€å§‹è®¡æ—¶  function startTimer(pendingFunc, wait) {    if (useRAF) {      return root.requestAnimationFrame(pendingFunc)    }    return setTimeout(pendingFunc, wait)  }  // å–æ¶ˆè®¡æ—¶  function cancelTimer(id) {    if (useRAF) {      return root.cancelAnimationFrame(id)    }    clearTimeout(id)  }  // å»¶æ—¶å‰è°ƒç”¨  function leadingEdge(time) {    // Reset any `maxWait` timer.    lastInvokeTime = time    // Start the timer for the trailing edge.    timerId = startTimer(timerExpired, wait)    // Invoke the leading edge.    return leading ? invokeFunc(time) : result  }  // è®¾ç½®éœ€è¦ç­‰å¾…æ—¶é—´  function remainingWait(time) {    const timeSinceLastCall = time - lastCallTime     // è·ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´    const timeSinceLastInvoke = time - lastInvokeTime // è·ä¸Šæ¬¡è°ƒç”¨ func çš„æ—¶é—´    const timeWaiting = wait - timeSinceLastCall      // è¿˜éœ€ç­‰å¾…çš„æ—¶é—´    return maxing      ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke)      : timeWaiting  }  // åˆ¤æ–­æ˜¯å¦åº”è¯¥è¢«è°ƒç”¨  function shouldInvoke(time) {    const timeSinceLastCall = time - lastCallTime    const timeSinceLastInvoke = time - lastInvokeTime    // Either this is the first call, activity has stopped and we&#39;re at the    // trailing edge, the system time has gone backwards and we&#39;re treating    // it as the trailing edge, or we&#39;ve hit the `maxWait` limit.    return (lastCallTime === undefined || (timeSinceLastCall &gt;= wait) ||      (timeSinceLastCall &lt; 0) || (maxing &amp;&amp; timeSinceLastInvoke &gt;= maxWait))  }  // åˆ·æ–° timer  function timerExpired() {    const time = Date.now()    if (shouldInvoke(time)) {      return trailingEdge(time)    }    // Restart the timer.    timerId = startTimer(timerExpired, remainingWait(time))  }  // å»¶æ—¶åè°ƒç”¨  function trailingEdge(time) {    timerId = undefined    // Only invoke if we have `lastArgs` which means `func` has been    // debounced at least once.    // é…ç½®ä¸­ trailing ä¸º true ä¸”æœ‰ lastArgsï¼ˆfunc è¢«æ‰§è¡Œè¿‡ä¸€æ¬¡ï¼‰    if (trailing &amp;&amp; lastArgs) {      return invokeFunc(time)    }    lastArgs = lastThis = undefined    return result  }  // å–æ¶ˆæ‰§è¡Œ  function cancel() {    if (timerId !== undefined) {      cancelTimer(timerId)    }    lastInvokeTime = 0    lastArgs = lastCallTime = lastThis = timerId = undefined  }  // ç›´æ¥æ‰§è¡Œ  function flush() {    return timerId === undefined ? result : trailingEdge(Date.now())  }  // ç­‰å¾…  function pending() {    return timerId !== undefined  }  function debounced(...args) {    const time = Date.now()    const isInvoking = shouldInvoke(time)        // åˆ¤æ–­æ˜¯å¦å¯è°ƒç”¨    lastArgs = args                              // è·å–å‚æ•°    lastThis = this                              // è·å–è°ƒç”¨æ—¶çš„ this    lastCallTime = time                          // è§¦å‘æ—¶é—´    if (isInvoking) {      if (timerId === undefined) {               // é¦–æ¬¡è§¦å‘è°ƒç”¨ leadingEdge        return leadingEdge(lastCallTime)      }      if (maxing) {        // Handle invocations in a tight loop.        // å¤„ç†é¢‘ç¹çš„å¤šæ¬¡è°ƒç”¨        timerId = startTimer(timerExpired, wait) // è®¾ç½®å®šæ—¶å™¨        return invokeFunc(lastCallTime)      }    }    if (timerId === undefined) {                 // å¦‚æœæ²¡æœ‰ timer è®¾ç½®å®šæ—¶å™¨      timerId = startTimer(timerExpired, wait)    }    return result  }  debounced.cancel = cancel  debounced.flush = flush  debounced.pending = pending  return debounced}</code></pre>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Lodash </tag>
            
            <tag> debounce </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>EventEmitter æºç é˜…è¯»</title>
      <link href="/2018/08/27/JavaScript/EventEmitter-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"/>
      <url>/2018/08/27/JavaScript/EventEmitter-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/</url>
      <content type="html"><![CDATA[<p>ä¸Šå‘¨çœ‹äº† <a href="https://github.com/Olical/EventEmitter" target="_blank" rel="noopener">EventEmitter</a> çš„æºç ï¼Œè¿™ç¯‡åšå®¢æ‰“ç®—åšä¸ªå°ç»“ï¼ˆä¸æ˜¯ Node çš„æºç ï¼Œåªæ˜¯ github ä¸Šæœåˆ°çš„æ˜Ÿæ˜Ÿæœ€å¤šçš„é¡¹ç›®ï¼Œè¿˜æœ‰ä¸ªé¡¹ç›® <a href="https://github.com/primus/eventemitter3" target="_blank" rel="noopener">EventEmitter3</a> é¡¹ç›®ä½œè€…ç›®å‰ä¾ç„¶åœ¨ç»´æŠ¤ï¼Œä¸»æ‰“æ€§èƒ½ï¼Œçœ‹èµ·æ¥éå¸¸ä¸é”™ï¼‰</p><h2 id="æ•´ä½“ç»“æ„"><a href="#æ•´ä½“ç»“æ„" class="headerlink" title="æ•´ä½“ç»“æ„"></a>æ•´ä½“ç»“æ„</h2><pre><code class="JavaScript">;(function(exports) {    &#39;use strict&#39;;    function EventEmitter() {}    var proto = EventEmitter.prototype;    var originalGlobalValue = exports.EventEmitter;    /**     * å·¥å…·å‡½æ•°     * indexOfListener     * alias     * isValidListener     */    /**     * æ–¹æ³•å®ç°     */    EventEmitter.noConflict = function() {        exports.EventEmitter = originalGlobalValue;        return EventEmitter;    }    if (typeof define === &#39;function&#39; &amp;&amp; define.amd) {        define(function() {            return EventEmitter;        });    } else if (typeof module === &#39;object&#39; &amp;&amp; module.exports){        module.exports = EventEmitter;    } else {        exports.EventEmitter = EventEmitter;    }}(typeof window !== &#39;undefined&#39; ? window : this || {}));</code></pre><h3 id="æœ€å¤–å±‚çš„è‡ªæ‰§è¡Œ"><a href="#æœ€å¤–å±‚çš„è‡ªæ‰§è¡Œ" class="headerlink" title="æœ€å¤–å±‚çš„è‡ªæ‰§è¡Œ"></a>æœ€å¤–å±‚çš„è‡ªæ‰§è¡Œ</h3><pre><code class="JavaScript">;(function(exports){  // some code  }(typeof window !== &#39;undefined&#39; ? window : this || {}));</code></pre><p><strong>0. é—­åŒ…</strong></p><p>é¿å…å…¨åŒºå˜é‡æ±¡æŸ“ï¼Œç§æœ‰ä½œç”¨åŸŸâ€¦ å°±æ˜¯é—­åŒ…çš„å¸¸è§„ç”¨é€”</p><p><strong>1. å¼€å¤´çš„åˆ†å·</strong></p><p>ä¸ºäº†é˜²æ­¢æ‰“åŒ…æˆ–åˆ™å…¶ä»–å·¥å…·åˆå¹¶ js ä»£ç å¹¶å‹ç¼©çš„æ—¶å€™ç”±äºå‰é¢æ²¡æœ‰ä»¥åˆ†å·ç»“å°¾è€Œå‡ºé”™ï¼Œæ¯”å¦‚è¿™ç§æƒ…å†µ <code>var a = someFunction</code></p><p>å¦‚æœä¸åŠ åˆ†å·åˆ™ä¼šå˜æˆ <code>var a = someFunction( function(){}() )</code>ï¼Œè¿™å¯èƒ½å¯¼è‡´æ„å¤–ã€‚</p><p><strong>2. context ä»¥ export ä¸ºå˜é‡åä¼ å…¥å‡½æ•°</strong></p><p>å¯ä»¥åœ¨ä»£ç å‹ç¼©æ—¶å‡å° sizeï¼Œå°†å…¨å±€çš„ window ä¼ å…¥å¯ä»¥é¿å…å†…éƒ¨ä½¿ç”¨ window è¿›è¡ŒæŸ¥è¯¢æ—¶ç”±ä½œç”¨åŸŸé“¾å‘ä¸Šå¤šæ‰¾ä¸€çº§ã€‚</p><p><strong>3. ç±»çš„å®ç°</strong></p><p>åˆ©ç”¨å‡½æ•°çš„åŸå‹é“¾æ¨¡æ‹Ÿï¼Œå…ˆåˆ›å»ºä¸€ä¸ªç©ºå‡½æ•° <code>function EventEmitter() {}</code>ï¼Œç„¶åå°†è¯¥ç±»çš„æ–¹æ³•æŒ‚è½½åˆ° <code>EventEmitter.prototype</code> ä¸Šé¢ã€‚</p><p><strong>4. å¯¹äºå†²çªçš„å¤„ç†</strong></p><pre><code class="JavaScript">    var originalGlobalValue = exports.EventEmitter;    EventEmitter.noConflict = function() {        exports.EventEmitter = originalGlobalValue;        return EventEmitter;    }</code></pre><p>å…ˆå°†å…¨å±€çš„ <code>EventEmitter</code> ä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ <code>originalGlobalValue</code> ä¸­ã€‚æ‰§è¡Œ <code>noConflict</code> åå†å°† <code>originalGlobalValue</code> è¿˜ç»™å…¨å±€çš„ <code>EventEmitter</code>ï¼Œå¹¶è¿”å›è¿™ä¸ªåº“æ‰€å®ç°çš„ <code>EventEmitter</code>ã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre><code class="JavaScript">var EventEmitter = function a() {}// load myEventEmitter.js// æ­¤æ—¶ EventEmitter = myEventEmitter;var b = EventEmitter.noConflict();// æ­¤æ—¶ EventEmitter = function a() {}// b = myEventEmitter</code></pre><p><strong>5. å¯¹äºæ¨¡å—åŒ–çš„å¤„ç†</strong></p><pre><code class="JavaScript">// å…¼å®¹ AMDif (typeof define === &#39;function&#39; &amp;&amp; define.amd) {        define(function() {            return EventEmitter;        });    }    // å…¼å®¹ CommonJS    else if (typeof module === &#39;object&#39; &amp;&amp; module.exports){        module.exports = EventEmitter;    } else {        exports.EventEmitter = EventEmitter;    }</code></pre><p>è¿™ä¸ªåº“çš„æ•´ä½“ç»“æ„å¹¶ä¸å¤æ‚ï¼ŒåŸºæœ¬ä¸Šçœ‹è¿‡ jQuery æºç æˆ–åˆ™å¯¹ä¸€äº›å¸¸ç”¨çš„æ¨¡å—åŒ–æ–¹æ³•æœ‰åŸºæœ¬äº†è§£éƒ½èƒ½ç†è§£</p><h2 id="å·¥å…·å‡½æ•°çš„å®ç°"><a href="#å·¥å…·å‡½æ•°çš„å®ç°" class="headerlink" title="å·¥å…·å‡½æ•°çš„å®ç°"></a>å·¥å…·å‡½æ•°çš„å®ç°</h2><h3 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h3><pre><code class="JavaScript">/** * Alias a method while keeping the context correct, to allow for overwriting of target method. * * @param {String} name The name of the target method. * @return {Function} The aliased method * @api private */function alias(name) {    return function aliasClosure() {        return this[name].apply(this, arguments);    };}</code></pre><p>è¿™ä¹ˆè°ƒç”¨ <code>EventEmitter.prototype.on = alise(&#39;addListener&#39;)</code>ã€‚<br>å¯æ˜¯ä¸ºä»€ä¹ˆè¦å¤šæ­¤ä¸€ä¸¾ï¼Ÿ è€Œä¸ç›´æ¥ç”¨ <code>EventEmitter.prototype.on = EventEmitter.prototype.addListener</code></p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>isValidListener(listener) å°±æ˜¯åˆ¤æ–­ listener æ˜¯ä¸æ˜¯åˆæ³•</p><p>indexOfListener(listeners: Function[], listener: Function) å°±æ˜¯åœ¨æ•°ç»„ä¸­æ‰¾åˆ°å¯¹åº”é¡¹çš„ listener å±æ€§å’Œç¬¬äºŒä¸ªå‚æ•° Function å…¨ç­‰çš„é¡¹å¹¶è¿”å›ç´¢å¼•å€¼</p><h2 id="æ ¸å¿ƒæ–¹æ³•çš„å®ç°"><a href="#æ ¸å¿ƒæ–¹æ³•çš„å®ç°" class="headerlink" title="æ ¸å¿ƒæ–¹æ³•çš„å®ç°"></a>æ ¸å¿ƒæ–¹æ³•çš„å®ç°</h2><h3 id="getEvents"><a href="#getEvents" class="headerlink" title="_getEvents"></a>_getEvents</h3><pre><code class="JavaScript">/** * Fetches the events object and creates one if required. * * @return {Object} The events storage object. * @api private */proto._getEvents = function _getEvents() {    return this._events || (this._events = {});};</code></pre><p>å– <code>_event</code> å±æ€§å¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡èµ‹å€¼ç»™ <code>_event</code> å¹¶è¿”å›ã€‚</p><h3 id="getListeners"><a href="#getListeners" class="headerlink" title="getListeners"></a>getListeners</h3><pre><code class="JavaScript">/** * Returns the listener array for the specified event. * Will initialise the event object and listener arrays if required. * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them. * Each property in the object response is an array of listener functions. * * @param {String|RegExp} evt Name of the event to return the listeners from. * @return {Function[]|Object} All listener functions for the event. */proto.getListeners = function getListeners(evt) {    var events = this._getEvents();    var response;    var key;    // Return a concatenated array of all matching events if    // the selector is a regular expression.    // æ”¯æŒæ­£åˆ™æŸ¥è¯¢ï¼Œ å¦‚æœæ²¡æŸ¥è¯¢åˆ°è¿”å›ç©ºå¯¹è±¡ {}    if (evt instanceof RegExp) {        response = {};        for (key in events) {            if (events.hasOwnProperty(key) &amp;&amp; evt.test(key)) {                response[key] = events[key];            }        }    }    else {        response = events[evt] || (events[evt] = []); // å¦‚æœä¸å­˜åœ¨å°±åˆå§‹åŒ– _this.event[evt] ä¸º []    }    return response;};</code></pre><h3 id="addListener"><a href="#addListener" class="headerlink" title="addListener"></a>addListener</h3><pre><code class="JavaScript">/** * Adds a listener function to the specified event. * The listener will not be added if it is a duplicate. * If the listener returns true then it will be removed after it is called. * If you pass a regular expression as the event name then the listener will be added to all events that match it. * * @param {String|RegExp} evt Name of the event to attach the listener to. * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling. * @return {Object} Current instance of EventEmitter for chaining. * * 1. å…ˆåˆ¤æ–­è¦æ·»åŠ çš„ listener æ˜¯å¦åˆæ³• * 2. è·å–å½“å‰ç¬¦åˆæ¡ä»¶çš„ listener * 3. åˆ¤æ–­è¦æ·»åŠ çš„ listener æ˜¯å¦å·²ç»å­˜åœ¨ * 4. å¦‚æœä¸å­˜åœ¨ å°±å°† listener åŒ…è£¹æˆå›ºå®šçš„æ ¼å¼èµ·æ¥æ”¾å…¥ listeners ä¸­ */proto.addListener = function addListener(evt, listener) {    if (!isValidListener(listener)) {        throw new TypeError(&#39;listener must be a function&#39;);    }    var listeners = this.getListenersAsObject(evt);    var listenerIsWrapped = typeof listener === &#39;object&#39;;    var key;    for (key in listeners) {        if (listeners.hasOwnProperty(key) &amp;&amp; indexOfListener(listeners[key], listener) === -1) {            listeners[key].push(listenerIsWrapped ? listener : {                listener: listener,                once: false            });        }    }    return this;};</code></pre><h3 id="removeListener"><a href="#removeListener" class="headerlink" title="removeListener"></a>removeListener</h3><pre><code class="JavaScript">/** * Removes a listener function from the specified event. * When passed a regular expression as the event name, it will remove the listener from all events that match it. * * @param {String|RegExp} evt Name of the event to remove the listener from. * @param {Function} listener Method to remove from the event. * @return {Object} Current instance of EventEmitter for chaining. */// åˆ é™¤äº‹ä»¶è®¢é˜…// 1. æ‰¾åˆ°æ‰€æœ‰çš„ç¬¦åˆ evt è§„åˆ™çš„äº‹ä»¶// 2. å¾ªç¯æ‰¾å‡ºäº‹ä»¶åœ¨ events ä¸­çš„ç´¢å¼•å¹¶ splice åˆ é™¤proto.removeListener = function removeListener(evt, listener) {    var listeners = this.getListenersAsObject(evt);    var index;    var key;    for (key in listeners) {        if (listeners.hasOwnProperty(key)) {            index = indexOfListener(listeners[key], listener);            if (index !== -1) {                listeners[key].splice(index, 1);            }        }    }    return this;};</code></pre><h3 id="removeEvent"><a href="#removeEvent" class="headerlink" title="removeEvent"></a>removeEvent</h3><pre><code class="JavaScript">/** * Removes all listeners from a specified event. * If you do not specify an event then all listeners will be removed. * That means every event will be emptied. * You can also pass a regex to remove all events that match it. * * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed. * @return {Object} Current instance of EventEmitter for chaining. *//** * åˆ é™¤äº‹ä»¶ * 1. åˆ¤æ–­ evt ç±»å‹ * å¦‚æœæ˜¯ å­—ç¬¦ä¸² å°±ç›´æ¥åˆ é™¤ _events ä¸­å¯¹åº”çš„å±æ€§ * å¦‚æœæ˜¯ æ­£åˆ™è¡¨è¾¾å¼ å°±åˆ é™¤ç¬¦åˆæ­£åˆ™çš„ _events ä¸­å¯¹åº”çš„å±æ€§ * å¦‚æœéƒ½ä¸æ˜¯ å°±åˆ é™¤å…¨éƒ¨äº‹ä»¶ */proto.removeEvent = function removeEvent(evt) {    var type = typeof evt;    var events = this._getEvents();    var key;    // Remove different things depending on the state of evt    if (type === &#39;string&#39;) {        // Remove all listeners for the specified event        delete events[evt];    }    else if (evt instanceof RegExp) {        // Remove all events matching the regex.        for (key in events) {            if (events.hasOwnProperty(key) &amp;&amp; evt.test(key)) {                delete events[key];            }        }    }    else {        // Remove all listeners in all events        delete this._events;    }    return this;};</code></pre><h3 id="emitEvent"><a href="#emitEvent" class="headerlink" title="emitEvent"></a>emitEvent</h3><pre><code class="JavaScript">/** * Emits an event of your choice. * When emitted, every listener attached to that event will be executed. * If you pass the optional argument array then those arguments will be passed to every listener upon execution. * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately. * So they will not arrive within the array on the other side, they will be separate. * You can also pass a regular expression to emit to all events that match it. * * @param {String|RegExp} evt Name of the event to emit and execute listeners for. * @param {Array} [args] Optional array of arguments to be passed to each listener. * @return {Object} Current instance of EventEmitter for chaining. *//** * è§¦å‘äº‹ä»¶ * 1. æ‰¾åˆ° ç¬¦åˆæ¡ä»¶çš„äº‹ä»¶ * 2. ä¾æ¬¡è°ƒç”¨ * 3. åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€æ¬¡è°ƒç”¨ï¼Œå¦‚æœæ˜¯å°±åˆ é™¤äº‹ä»¶ */proto.emitEvent = function emitEvent(evt, args) {    var listenersMap = this.getListenersAsObject(evt);    var listeners;    var listener;    var i;    var key;    var response;    for (key in listenersMap) {        if (listenersMap.hasOwnProperty(key)) {            listeners = listenersMap[key].slice(0);            for (i = 0; i &lt; listeners.length; i++) {                // If the listener returns true then it shall be removed from the event                // The function is executed either with a basic call or an apply if there is an args array                listener = listeners[i];                if (listener.once === true) {                    this.removeListener(evt, listener.listener);                }                response = listener.listener.apply(this, args || []);                if (response === this._getOnceReturnValue()) {                    this.removeListener(evt, listener.listener);                }            }        }    }    return this;};</code></pre><h3 id="å…¨éƒ¨æ–¹æ³•"><a href="#å…¨éƒ¨æ–¹æ³•" class="headerlink" title="å…¨éƒ¨æ–¹æ³•"></a>å…¨éƒ¨æ–¹æ³•</h3><ul><li>_getEvents</li><li>_getOnceReturnValue</li><li>getListeners</li><li>flattenListeners</li><li>getListenersAsObject</li><li>addListener || on</li><li>addOnceListener || once</li><li>defineEvent</li><li>defineEvents</li><li>removeListener || off</li><li>addListeners</li><li>removeListeners</li><li>manipulateListeners</li><li>removeEvent || removeAllListeners</li><li>emitEvent || trigger</li><li>emit</li><li>setOnceReturnValue</li></ul><p><strong>ä¹‹åå¯ä»¥è‡ªé€ ä¸€ä¸ªå®ç°è¯¥åŠŸèƒ½çš„è½®å­</strong></p>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> EventEmitter </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å‰ç«¯å°æ€»ç»“</title>
      <link href="/2018/08/23/%E7%94%9F%E6%B4%BB/%E5%89%8D%E7%AB%AF%E5%B0%8F%E6%80%BB%E7%BB%93/"/>
      <url>/2018/08/23/%E7%94%9F%E6%B4%BB/%E5%89%8D%E7%AB%AF%E5%B0%8F%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h2 id="é¢è¯•å°æ€»ç»“ï¼Ÿ"><a href="#é¢è¯•å°æ€»ç»“ï¼Ÿ" class="headerlink" title="é¢è¯•å°æ€»ç»“ï¼Ÿ"></a>é¢è¯•å°æ€»ç»“ï¼Ÿ</h2><p>é¢è¯•é¢˜æš‚ä¸”ä¸è¯´ï¼ŒæŠ€æœ¯ç›¸å…³éƒ½å·®ä¸å¤šã€‚</p><p>é¢è¯•ç»“æœï¼šä»Šå¹´äº”æœˆé¢äº† 3 å®¶å…¬å¸ï¼Œä¸¤å®¶ç»™äº† offerï¼ˆæœ‰ç‚¹è®°ä¸å¾—åç§°ï¼‰ï¼Œ ç”±äºè–ªèµ„ä¸ç¬¦åˆé¢„æœŸï¼Œé‚ç½¢ã€‚ä»Šå¹´ 8 æœˆ é¢äº† 5 å®¶å…¬å¸ï¼Œ4 å®¶ç»™äº† offerï¼ˆ<del>XC</del>, SK, LJ, HHXX, JZKJï¼‰ã€‚</p><p>é‡ç‚¹åœ¨äºé¢è¯•çš„è¿™äº›å®¶åªæœ‰ä¸€å®¶ä¸€çº¿äº’è”ç½‘å…¬å¸ï¼Œå¾ˆå¤šå¤§å…¬å¸å…¬å¸è¿ç®€å†è¿™å…³éƒ½è¿‡ä¸äº†ã€‚</p><p>æ€»ç»“ä¸‹æ¥æœ‰ 3 ç‚¹åŸå› å§ï¼Œä¸ºä»€ä¹ˆä¸å¤Ÿä¼˜ç§€ï¼Ÿ</p><ol start="0"><li><p>æŠ€æœ¯èœ~</p></li><li><p>å­¦å†ä¸å¥½ï¼Œé985ï¼Œ 211 å­¦æ ¡ï¼Œéè®¡ç®—æœºä¸“ä¸š</p></li><li><p>ç®€å†æ²¡æœ‰äº®ç‚¹</p></li><li><p>å·¥ä½œå¹´é™ä¸è¶³</p></li></ol><h3 id="å­¦å†"><a href="#å­¦å†" class="headerlink" title="å­¦å†"></a>å­¦å†</h3><p>è¿™æ˜¯æˆ‘æ°¸è¿œä¹Ÿæ‘†è„±ä¸æ‰çš„ï¼ŒæŠ•äº†å¤§å‚ç®€å†å´æ²¡æœ‰åç»­é¢è¯•ã€‚æ‰¾å·¥ä½œçš„è¿‡ç¨‹ä¸­è®©æˆ‘ä¸€åº¦è€ƒè™‘è‡ªå·±æ˜¯ä¸æ˜¯çœŸçš„éœ€è¦å»è€ƒç ”ï¼Œè€Œä¸”å¿…é¡»æ˜¯åæ ¡çš„ç ”ç©¶ç”Ÿã€‚</p><p>å½“ç„¶è¿™ä¸ªå†³å®šè¦æ—©ç‚¹åšã€‚èµšé’±ä»€ä¹ˆæ—¶å€™éƒ½ä¸è¿Ÿï¼Œè€Œå­¦ä¹ è¿‡äº†åº”æœ‰å¹´çºªä»¥åå°±ä¼šæœ‰å‹åŠ›äº†ã€‚</p><p>ç›®å‰ä¸æ’é™¤å†å·¥ä½œä¸€æ®µæ—¶é—´åå°±ä¸“å¿ƒå¤ä¹ è€ƒç ”çš„è®¡åˆ’ï¼19å¹´é‡ç‚¹é¡¹ç›® O(âˆ©_âˆ©)O</p><h3 id="ç®€å†"><a href="#ç®€å†" class="headerlink" title="ç®€å†"></a>ç®€å†</h3><p>è¿™ç‚¹æˆ‘å·²ç»åŠªåŠ›çš„åœ¨æ”¹ï¼Œæˆ‘çš„ç¬¬ä¸€ç‰ˆç®€å†ç®€ç›´ä¸èƒ½çœ‹ï¼Œç¨å¾®æŒ‰ STAR æ³•åˆ™ä¿®æ”¹äº†ä¸€ä¸‹ï¼Œå¥½äº†ä¸€äº›ä½†è¿˜æ˜¯ä¸€å¨ *ã€‚</p><p>8 æœˆ JZKJ 3 è½®æŠ€æœ¯é¢ï¼Œå…¶ä¸­æœ‰ä¸ªæŠ€æœ¯ä¸»ç®¡é¢è¯•çš„æ—¶å€™èŠï¼Œè¯´é“ï¼šâ€œå“ï¼Œä½ çš„ç®€å†ä¸èƒ½å¤šå†™ç‚¹ä¹ˆï¼Œå®Œå…¨â€¦æ‰¾ä¸åˆ°â€¦äº®ç‚¹ï¼Œè™½ç„¶ä»ç¬”è¯•é¢˜çœ‹æ¥ä½ çš„åŸºç¡€æ¯”è¾ƒæ‰å®ï¼Œäººä¹Ÿæ¯”è¾ƒä¸ŠåŠ²ï¼Œä½†æ˜¯ç®€å†æ²¡æœ‰äº®ç‚¹å°±æ˜¯å‡åˆ†ã€‚â€</p><p>æˆ‘åªèƒ½è‹¦ç¬‘äº†ä¸‹ã€‚ç®€å†è¿™ä¸€å…³åœ¨ç¬¬ä¸€æ¡æ²¡æœ‰ä»»ä½•ä¼˜åŠ¿çš„å‰æä¸‹å°±æ›´åŠ éœ€è¦æˆ‘å¥½å¥½å‡†å¤‡äº†ã€‚å¤šå†™é¡¹ç›®ç›¸å…³ï¼Œå²—ä½ç›¸å…³ç»å†ï¼Œä¸ç›¸å…³çš„å¥–é¡¹ç»å†èƒ½ä¸å†™å°±ä¸å†™ï¼Œåˆ‡è®°ï¼</p><h3 id="å·¥ä½œç»éªŒ"><a href="#å·¥ä½œç»éªŒ" class="headerlink" title="å·¥ä½œç»éªŒ"></a>å·¥ä½œç»éªŒ</h3><p>ç›®å‰æ­£å¼å·¥ä½œç»éªŒç¡®å®åªæœ‰ 1.5 å¹´ï¼Œ è€Œæ¯•ä¸šåçš„å·¥ä½œç»éªŒåªæœ‰ 1 å¹´ã€‚æ‰€ä»¥æœ‰äº›å…¬å¸é¢è¯•çœ‹äº†æˆ‘çš„å·¥ä½œç»éªŒåªæŠŠæˆ‘å½“åšåˆçº§çš„å·¥ç¨‹å¸ˆï¼Œé—®çš„çŸ¥è¯†ä¹Ÿæ¯”è¾ƒåŸºç¡€ã€‚è€Œæ­£å¼ä¸€äº›çš„å…¬å¸ä¼šæ¯”è¾ƒæ·±å…¥ä¼šè§¦æ¢æˆ‘çš„çŸ¥è¯†è¾¹ç•Œã€‚</p><p>å½“ç„¶æœ‰çš„ HR è¿˜ä¼šå› ä¸ºå·¥ä½œå¹´é™è¿™ä¸€æ¡å»å‹ä½ çš„å·¥èµ„ã€‚ 5 æœˆé¢çš„ä¸€å®¶å°±è¯´ï¼Œæˆ‘æ¯•ä¸šååˆ°å·¥ä½œè¿˜ä¸åˆ°ä¸€å¹´ï¼Œå®Œå…¨å¼€ä¸äº†æˆ‘è¦çš„ä»·æ ¼ã€‚</p><p>è¿™äº›éƒ½ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹åœ¨äºä¸€äº›ä¸€çº¿äº’è”ç½‘å…¬å¸ï¼Œå®Œå…¨ä¸ç»™é¢è¯•æœºä¼šï¼å·¥ä½œç»éªŒ 3 å¹´èµ·æ­¥ã€‚æœ‰äº›è¿˜å¥½æ¯”å¦‚ XC é¢è¯•ä¸‹æ¥æ„Ÿè§‰è¿˜ä¸é”™ï¼Œä½†æ˜¯åç»­è¯¢é—®ç»“æœçš„æ—¶å€™å‘Šè¯‰æˆ‘å€™é€‰äººé¢è¯•éƒ½å·®ä¸å¤šï¼Œä½†æ˜¯å¦ä¸€ä¸ªå·¥ä½œç»éªŒæ¯”æˆ‘ä¹…ï¼Œå°±æŠŠæˆ‘çš„ offer æŠ¢å»äº†TATã€‚ç»éªŒ = è¸©å‘ = ç›¸å¯¹é è°± = å…¥èŒæˆæœ¬ä½ï¼Œè¿™ä¹Ÿæ˜¯ç¤¾æ‹›ä¸å¯é¿å…çš„ã€‚</p><p>ä¸æ‰¾ç†ç”±ï¼Œæœ€ä¸»è¦çš„è¿˜æ˜¯è‡ªèº«ä¸å¤Ÿä¼˜ç§€ã€‚å½“è¶³å¤Ÿä¼˜ç§€çš„æ—¶å€™ï¼Œåˆ«äººä¸€å®šä¼šå› ä¸ºä½ çš„æŸä¸ªé—ªå…‰ç‚¹è€Œå¿½ç•¥æ‰ä½ çš„å­¦å†ï¼Œä½ çš„å·¥ä½œç»éªŒã€‚</p><h2 id="ä»¥å"><a href="#ä»¥å" class="headerlink" title="ä»¥å"></a>ä»¥å</h2><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><p>å‰ç«¯æ¥è§¦ä¸‹æ¥è¿‘å‡ å¹´çš„å˜åŒ–åº”è¯¥ä¸ä¼šå¾ˆå¤§ï¼Œä¸‰å¤§æ¡†æ¶ç›®å‰è§£å†³äº†å¤§éƒ¨åˆ†çš„å¼€å‘ç—›ç‚¹ã€‚æ‰“ç®—å®Œå…¨é˜…è¯»æŸä¸€æ¡†æ¶æºç ï¼Œåƒé€ã€‚è¿™ä¸€ç‚¹éå¸¸æœ‰å¿…è¦ã€‚</p><p>è¯»æºç å­¦ä¹ çš„è¿‡ç¨‹ï¼Œä¸€æ–¹é¢å¯ä»¥ç†è§£ä½œè€…çš„æ€è·¯ï¼Œæ›´å¥½åœ°å­¦ä¹ æ¡†æ¶çš„ç²¾é«“ï¼Œä¸€æ–¹é¢æå‡è‡ªå·±çš„å¤§å±€è§‚ã€‚</p><p>é¿å…é—­é—¨é€ è½¦ï¼Œåªå†™è‡ªå·±çš„ä»£ç ï¼Œå®Œå…¨ä¸çŸ¥é“å¥½æ˜¯ä»€ä¹ˆæ ·ï¼Œå·®æ˜¯ä»€ä¹ˆæ ·ã€‚åªæœ‰è§è¿‡äº†ä¼˜ç§€çš„ä»£ç ï¼Œæ‰çŸ¥é“è‡ªå·±å†™çš„æ˜¯ä»€ä¹ˆæ°´å¹³ã€‚</p><h3 id="å…¨æ ˆ"><a href="#å…¨æ ˆ" class="headerlink" title="å…¨æ ˆ"></a>å…¨æ ˆ</h3><p>åˆ©ç”¨æ—¶é—´å­¦ä¹ ä¸€ä¸‹ Javaã€‚</p><p>æ­£å¥½æ–°å…¬å¸çš„ Server æ¡†æ¶æ˜¯ Java æ¡†æ¶ï¼Œå‰ç«¯ä¸šåŠ¡æˆ‘æœ‰ä¿¡å¿ƒä¸è‡³äºå‹çš„æˆ‘ä¸€ç‚¹æ—¶é—´éƒ½æ²¡æœ‰å»å­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€ã€‚</p><p>äº†è§£è‡³å°‘ä¸¤ç§ MySQL æ•°æ®åº“ã€‚ä»¥å‰åªä¼šå†™ä¸€äº›ç®€å•çš„ SQL æŸ¥è¯¢è¯­å¥ï¼Œå‰æ®µæ—¶é—´æœ‰ç®€å•å­¦ä¹ æ•°æ®åº“ä¸€ä¸‹æ‰çŸ¥é“ MySQL ä¹Ÿåˆ†ä¸ºå¾ˆå¤šç§ï¼Œè€Œæ¯ä¸€ç§æ‰€åº”ç”¨çš„åœºæ™¯ä¹Ÿæœ‰æ‰€ä¸åŒï¼Œè‡³å°‘äº†è§£ä¸€ä¸‹è¿™äº›æ•°æ®åº“çš„ç‰¹ç‚¹ã€‚</p><h3 id="è®¡ç®—æœº"><a href="#è®¡ç®—æœº" class="headerlink" title="è®¡ç®—æœº"></a>è®¡ç®—æœº</h3><p>å› ä¸ºæˆ‘ä¸æ˜¯è®¡ç®—æœºä¸“ä¸šï¼Œæ‰€ä»¥æœ‰äº›ç‰¹åˆ«é‡è¦çš„åŸºç¡€éœ€è¦å»å¡«ã€‚</p><p>ä¸‹é¢æ˜¯é’ˆå¯¹æˆ‘è‡ªå·±åˆ—å‡ºçš„ä¼˜å…ˆçº§é¡ºåºï¼ŒçŸ­æœŸå°±ä»¥æœ¬ç§‘ç”Ÿå­¦ä¹ è¿™äº›è¯¾ç¨‹æ—¶é—´æ¥è¦æ±‚è‡ªå·±åŠ¡å¿…åœ¨ä¸‹æ¬¡æ¢å·¥ä½œæ—¶è¿™äº›ä¸èƒ½æˆä¸ºæˆ‘çš„çŸ­æ¿ã€‚</p><ol><li><p>æ•°æ®ç»“æ„ä¸ç®—æ³•</p></li><li><p>ç¼–è¯‘åŸç†</p></li><li><p>æ“ä½œç³»ç»Ÿ</p></li><li><p>æ•°æ®åº“åŸç†</p></li><li><p>HTTP/HTTP2/HTTPSï¼ˆç›®å‰çŸ¥è¯†å‚¨å¤‡å¤Ÿç”¨ï¼Œä¼˜å…ˆçº§é åï¼Œè¿˜éœ€æ·±å…¥ç†è§£ï¼‰</p></li></ol><h3 id="å¦‚æœä½ åªæ˜¯ä¸€æ¡å’¸é±¼ï¼Œé‚£ä¹Ÿè¯·ä½ åšæœ€å’¸çš„é‚£æ¡ã€‚"><a href="#å¦‚æœä½ åªæ˜¯ä¸€æ¡å’¸é±¼ï¼Œé‚£ä¹Ÿè¯·ä½ åšæœ€å’¸çš„é‚£æ¡ã€‚" class="headerlink" title="å¦‚æœä½ åªæ˜¯ä¸€æ¡å’¸é±¼ï¼Œé‚£ä¹Ÿè¯·ä½ åšæœ€å’¸çš„é‚£æ¡ã€‚"></a>å¦‚æœä½ åªæ˜¯ä¸€æ¡å’¸é±¼ï¼Œé‚£ä¹Ÿè¯·ä½ åšæœ€å’¸çš„é‚£æ¡ã€‚</h3>]]></content>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Oh My iPhone</title>
      <link href="/2018/08/20/%E7%94%9F%E6%B4%BB/Oh-My-iPhone/"/>
      <url>/2018/08/20/%E7%94%9F%E6%B4%BB/Oh-My-iPhone/</url>
      <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡æˆ‘å¯¹æ•°ç äº§å“çš„å°éšç¬”å§ã€‚</p><p>ä¸€åˆ‡æºäºä¸€ä¸ª 2016 å¹´åº•ï¼ˆ12æœˆå§ï¼‰ä¹°çš„ä¸€éƒ¨ iPhone 7ã€‚å½“æ—¶æƒ³ç€å¯ä»¥å¤šç”¨å‡ å¹´æ‰€ä»¥è¿˜ä¸Šäº† 128Gï¼Œä½†æ˜¯ä¸Šä¸ªæ˜ŸæœŸå®ƒå‡ è¿‘é€€ä¼‘ï¼Œä»Šæ—©å†³å®šï¼Œè®©ä»–é€€ä¼‘å§~</p><p>æˆ‘å¯¹æ•°ç äº§å“æ¯”è¾ƒå–œæ¬¢å°é²œï¼Œè€Œåˆä¸å¤§çˆ±æƒœï¼Œå¤§å­¦æ—¶å‡ ä¹æ˜¯ä¸€å¹´ä¸€éƒ¨æ‰‹æœºï¼Œè¿˜æ˜¯æ„Ÿå¹æˆ‘çš„ç¬¬ä¸€éƒ¨æ‰‹æœº é­…æ— M9 ç”¨äº†å°†è¿‘ 4 å¹´ï¼Œä» 11 å¹´ä¸€ç›´ç”¨åˆ°å¤§äºŒä¸‹å­¦æœŸï¼Œç›´åˆ°åæ¥ç”µæ± åæ‰äº†æ‰è®©å®ƒé€€ä¼‘ã€‚ï¼ˆå¯èƒ½ç”¨çš„æ¯”è¾ƒå°å¿ƒå§ï¼‰</p><p>ä¹‹ååˆä¹°äº† é­…æ—MX4ï¼Œè¯ºåŸºäºš Lumia 930, é­…è“ M3ï¼Œ iPhone 7ã€‚</p><p>é™¤äº†ç¬¬ä¸€éƒ¨æ‰‹æœºæˆ‘ç”¨çš„æ¯”è¾ƒä»”ç»†ï¼Œå…¶ä½™çš„æ‰‹æœºç”¨çš„éƒ½ç‰¹åˆ«éšæ„ï¼Œæ‰äº†ç£•äº†æ˜¯å¸¸äº‹ã€‚</p><p>è¿™éƒ¨ iPhone 7 ç¢äº† 3 æ¬¡å±å¹•ï¼Œåå£³å¼¯æ‰ï¼Œä¹Ÿéƒ½æ€ªæˆ‘è‡ªå·±æ²¡æœ‰æ§åˆ¶å¥½æƒ…ç»ªï¼Œæ‘”äº†ä¸€æ¬¡ä¹‹åå°±æ²¡æœ‰å¥½å¥½çˆ±æŠ¤ï¼Œä¸€ç›´ç£•ç£•ç¢°ç¢°ã€‚ä¸Šå‘¨è‡ªå·±æ¢å¥½äº†å±å¹•ï¼Œåå£³å¼¯ç€éš¾å—ï¼Œæ‰“ç®—æ¢åå£³ + æ— çº¿å……ç”µã€‚æ‰€ä»¥ç½‘ä¸Šæ·˜äº†ä¸€ä¸ªã€‚äº‹æƒ…å°±æ˜¯è¿™ä¹ˆç¥å¥‡ï¼Œå€’è…¾äº†ä¸¤æ¬¡ï¼Œå‘ç°åº”è¯¥æ˜¯å°¾æ’æ’çº¿è¢«æˆ‘å¼„åäº†ï¼Œç›®å‰è¿˜ä¸ç¡®å®šæ˜¯ä¸»æ¿çš„å°¾æ’åäº†è¿˜æ˜¯å•çº¯çš„å°¾æ’åæ‰äº†ã€‚æ‰“ç®—ä¹‹åå»åº—é‡Œè®©åˆ«äººä¿®ä¸€ä¸‹å½“åšå¤‡ç”¨æœºäº†ã€‚</p><p>ç„¶è€Œæˆ‘çœ‹äº†ä¸‹æŸå®å…¨æ–° iPhone 7 æ‰ 3000ã€‚è€Œæˆ‘åœ¨è¿™éƒ¨æ‰‹æœºä¸Šçš„ç»´ä¿®ä»·æ ¼å·²ç»å°†è¿‘ 2K äº†ã€‚æ‰€ä»¥ä»¥åä¿®æ‰‹æœºçš„æ—¶å€™è¿˜æ˜¯è¦çœ‹ä¸‹å€¼ä¸å€¼å¾—å§ã€‚</p><p>å¯¹äºä»¥å‰æŠ¥åºŸçš„æ‰‹æœºæˆ‘æ‰“ç®—å…¨éƒ¨æ‹†æ‰å¼„æˆä¸€ä¸ªç›¸æ¡†ä¸€æ ·çš„ä¸œè¥¿ã€‚</p><p>åƒè¿™æ ·ï¼š</p><p class="center"><img src="/2018/08/20/ç”Ÿæ´»/Oh-My-iPhone/WTF.jpg" alt="WTF"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol><li><p>ä¸è¦å¯¹æ‰‹æœºä½œæ¶~</p></li><li><p>ä¸è¦æ‹¿é’±ä¸å½“é’±~</p></li><li><p>çˆ±ç”Ÿæ´»ï¼Œçˆ±æ‰‹æœº~</p></li></ol>]]></content>
      
      
    </entry>
    
    <entry>
      <title>#NULL#</title>
      <link href="/2018/07/24/%E7%94%9F%E6%B4%BB/NULL/"/>
      <url>/2018/07/24/%E7%94%9F%E6%B4%BB/NULL/</url>
      <content type="html"><![CDATA[<p><style>                                                                                                                                                                                                                                                                                                                                                                                                                                      #null p{text-align: center;font-size: 20px; font-weight: 700} #null p.null{color:#fff;}</style></p><div id="null"><br><p>æœ‰äººè¯´</p><br><p>ç­‰ä¸€ä¸ªæ— å¿ƒä¸ä½ çš„äºº</p><br><p>å°±å¥½åƒ</p><br><p>åœ¨æœºåœºç­‰ä¸€è‰˜èˆ¹</p><br><p>ä½†æ˜¯</p><br><p>ä½ æ˜¯çŸ¥é“ä¹ˆ</p><br><p class="null">å¨å°¼æ–¯çš„æœºåœº</p><br><p class="null">æ˜¯å¯ä»¥ç­‰åˆ°èˆ¹çš„</p><br></div>]]></content>
      
      
    </entry>
    
    <entry>
      <title>JS åŸºç¡€ä¹‹ï¼šString</title>
      <link href="/2018/07/12/JavaScript/String/"/>
      <url>/2018/07/12/JavaScript/String/</url>
      <content type="html"><![CDATA[<p>ä¹‹å‰ä¹Ÿæœ‰æ€»ç»“å’Œé‡æ–°å­¦ä¹  <strong>String</strong> çš„æ‰€æœ‰æ–¹æ³•ã€‚é•¿æ—¶é—´ä¸å»è®°å¿†åˆæœ‰æ‰€å¿˜è®°ã€‚ä»Šå¤©ç”¨åšå®¢çš„æ–¹å¼è®°å½•ä¸‹æ¥ï¼Œæœ€åç”¨ä¸€ä¸ªæ€ç»´å¯¼å›¾çš„å½¢å¼è®°ä¸‹æ¥ä¸²è”èµ·æ¥ï¼Œå·©å›ºè‡ªå·±çš„è®°å¿†ã€‚</p><h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2><h3 id="String-length"><a href="#String-length" class="headerlink" title="String.length"></a>String.length</h3><p>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚è¿™ä¸ªæ— éœ€å¤šè®²ã€‚åªæ˜¯è¦è®°ä½é™æ€çš„ <code>String.length</code> å€¼ä¸º <code>1</code>ã€‚</p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><h3 id="String-prototype-indexOf"><a href="#String-prototype-indexOf" class="headerlink" title="String.prototype.indexOf()"></a>String.prototype.indexOf()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.indexOf(searchValue[, fromIndex])</strong></p></blockquote><p><strong>indexOf()</strong> æ–¹æ³•è¿”å›è°ƒç”¨ String å¯¹è±¡ä¸­ä» fromIndex å¼€å§‹ä»å·¦å‘å³æœç´¢ç›´åˆ°ç¬¬ä¸€æ¬¡å‡ºç°æŒ‡å®šå€¼çš„ç´¢å¼•ä½ç½®ã€‚å¦‚æœæœªæ‰¾åˆ°ï¼Œè¿”å› -1ã€‚</p><p><code>searchValue</code><br>è¡¨ç¤ºéœ€è¦è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²</p><p><code>fromIndex</code><br>è¡¨ç¤ºä» <code>str</code> çš„è¿™ä¸ªä½ç½®å¼€å§‹å‘åæŸ¥æ‰¾ï¼Œå¯ä»¥æ˜¯ä»»æ„æ•´æ•°ï¼ˆå¦‚æœæ˜¯å°æ•°åˆ™åªä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼‰ã€‚é»˜è®¤å€¼æ˜¯ <code>0</code>ã€‚å¦‚æœè¯¥å€¼å°äº <code>0</code> åˆ™å½“åš <code>0</code>ï¼Œå¦‚æœè¯¥å€¼å¤§äºå­—ç¬¦ä¸²é•¿åº¦åˆ™è¿”å› <code>-1</code>ï¼Œé™¤é <code>searchValue = &quot;&quot;</code> æ­¤æ—¶è¿”å› <code>str.length</code>ã€‚</p><pre><code class="JavaScript">// fromIndex çš„å†…éƒ¨æœºåˆ¶å¯ä»¥ç”¨å¦‚ä¸‹ä¼ªä»£ç è¡¨ç¤ºï¼šString.prototype.indexOf = function(searchValue, fromIndex) {    fromIndex = fromIndex || 0; // é»˜è®¤å€¼ä¸º 0    // å¦‚æœ fromIndex å¤§äºå­—ç¬¦ä¸²é•¿åº¦    // åˆ™åˆ¤æ–­éœ€æŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯ç©ºå­—ç¬¦ä¸²    // å¦‚æœæ˜¯åˆ™è¿”å› str.lengthï¼Œå¦‚æœä¸æ˜¯åˆ™è¿”å› -1ã€‚    if (fromIndex &gt; this.length) {        return searchValue === &quot;&quot; ? this.length : -1;    }    // å¦‚æœ fromIndex å°äº 0 åˆ™å½“åš 0    if (fromIndex &lt; 0) {         fromIndex = 0    }    fromIndex = fromIndex &gt;&gt;&gt; 0; // å–æ•´}</code></pre><hr><h3 id="String-prototype-lastIndexOf"><a href="#String-prototype-lastIndexOf" class="headerlink" title="String.prototype.lastIndexOf()"></a>String.prototype.lastIndexOf()</h3><p>ä¸ <code>indexOf</code> ç›¸ä¼¼ä¸è¿‡æ˜¯ä»å³å‘å·¦æœç´¢ã€‚</p><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.lastIndexOf(searchValue[, fromIndex])</strong></p></blockquote><p><strong>lastIndexOf()</strong> æ–¹æ³•è¿”å›è°ƒç”¨ String å¯¹è±¡ä¸­ä» fromIndex å¼€å§‹ä»å³å‘å·¦æœç´¢ç›´åˆ°ç¬¬ä¸€æ¬¡å‡ºç°æŒ‡å®šå€¼çš„ç´¢å¼•ä½ç½®ã€‚å¦‚æœæœªæ‰¾åˆ°ï¼Œè¿”å› -1ã€‚</p><p><code>searchValue</code><br>è¡¨ç¤ºéœ€è¦è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²</p><p><code>fromIndex</code><br>è¡¨ç¤ºä» <code>str</code> çš„è¿™ä¸ªä½ç½®å¼€å§‹å‘åæŸ¥æ‰¾ï¼Œå¯ä»¥æ˜¯ä»»æ„æ•´æ•°ï¼ˆå¦‚æœæ˜¯å°æ•°åˆ™åªä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼‰ã€‚é»˜è®¤å€¼æ˜¯ <code>str.length</code>ã€‚å¦‚æœè¯¥å€¼å°äº <code>0</code> åˆ™è¿”å› <code>-1</code>ï¼Œé™¤é <code>searchValue = &quot;&quot;</code> æ­¤æ—¶è¿”å› <code>0</code>ã€‚å¦‚æœè¯¥å€¼å¤§äºå­—ç¬¦ä¸²é•¿åº¦å½“åš <code>str.length</code>ã€‚</p><!--```JavaScript// fromIndex çš„å†…éƒ¨æœºåˆ¶å¯ä»¥ç”¨å¦‚ä¸‹ä¼ªä»£ç è¡¨ç¤ºï¼šString.prototype.lastIndexOf = function(searchValue, fromIndex) {    fromIndex = fromIndex || this.length; // é»˜è®¤å€¼ä¸º str.length    // å¦‚æœ fromIndex å°äº 0    // åˆ™åˆ¤æ–­éœ€æŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯ç©ºå­—ç¬¦ä¸²    // å¦‚æœæ˜¯åˆ™è¿”å› 0ï¼Œå¦‚æœä¸æ˜¯åˆ™è¿”å› -1ã€‚    if (fromIndex < 0) {        return searchValue === "" ? this.length : -1;    }    // å¦‚æœ fromIndex å¤§äº str.length åˆ™å½“åš str.length    if (fromIndex > str.length) {         fromIndex = str.length;    }    fromIndex = fromIndex >>> 0; // å–æ•´}```--><hr><h3 id="String-prototype-includes"><a href="#String-prototype-includes" class="headerlink" title="String.prototype.includes()"></a>String.prototype.includes()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.includes(searchString[, position])</strong></p></blockquote><p><code>includes()</code> æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæ ¹æ®æƒ…å†µè¿”å› true æˆ– falseã€‚</p><p><code>searchString</code><br>è¦æœç´¢çš„å­å­—ç¬¦ä¸²ã€‚</p><p><code>position</code><br>ä»å½“å‰å­—ç¬¦ä¸²çš„è¯¥ç´¢å¼•ä½ç½®å¼€å§‹æœå¯»å­å­—ç¬¦ä¸²ï¼Œé»˜è®¤å€¼ä¸º0ã€‚</p><p><strong>Polyfill</strong></p><pre><code class="JavaScript">if(!String.prototype.includes) {    String.prototype.includes = function(searchString, position) {        &#39;use strict&#39;;        if (typeof position !== &#39;number&#39;) {            position = 0;        }        if (position + searchString.length &gt; this.length) {            return false;        } else {            return this.indexOf(searchString, position) !== -1;        }    }}</code></pre><hr><h3 id="String-prototype-startsWith"><a href="#String-prototype-startsWith" class="headerlink" title="String.prototype.startsWith()"></a>String.prototype.startsWith()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.startsWith(searchString [, position]);</strong></p></blockquote><p><code>startsWith()</code> æ–¹æ³•ç”¨æ¥åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥å¦å¤–ä¸€ä¸ªç»™å®šçš„å­å­—ç¬¦ä¸²å¼€å¤´ã€‚</p><p><code>searchString</code><br>è¦æœç´¢çš„å­å­—ç¬¦ä¸²</p><p><code>position</code><br>åœ¨ str ä¸­æœç´¢ searchString çš„å¼€å§‹ä½ç½®ï¼Œé»˜è®¤å€¼ä¸º <code>0</code>ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£çš„å­—ç¬¦ä¸²å¼€å¤´å¤„ã€‚</p><p><strong>Polyfill</strong></p><pre><code class="JavaScript">if (!String.prototype.startsWith) {  (function() {    &#39;use strict&#39;; // needed to support `apply`/`call` with `undefined`/`null`    var defineProperty = (function() {      // IE 8 only supports `Object.defineProperty` on DOM elements      try {        var object = {};        var $defineProperty = Object.defineProperty;        var result = $defineProperty(object, object, object) &amp;&amp; $defineProperty;      } catch(error) {}      return result;    }());    var toString = {}.toString;    var startsWith = function(search) {      if (this == null) {        throw TypeError();      }      var string = String(this);      if (search &amp;&amp; toString.call(search) == &#39;[object RegExp]&#39;) {        throw TypeError();      }      var stringLength = string.length;      var searchString = String(search);      var searchLength = searchString.length;      var position = arguments.length &gt; 1 ? arguments[1] : undefined;      // `ToInteger`      var pos = position ? Number(position) : 0;      if (pos != pos) { // better `isNaN`        pos = 0;      }      var start = Math.min(Math.max(pos, 0), stringLength);      // Avoid the `indexOf` call if no match is possible      if (searchLength + start &gt; stringLength) {        return false;      }      var index = -1;      while (++index &lt; searchLength) {        if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {          return false;        }      }      return true;    };    if (defineProperty) {      defineProperty(String.prototype, &#39;startsWith&#39;, {        &#39;value&#39;: startsWith,        &#39;configurable&#39;: true,        &#39;writable&#39;: true      });    } else {      String.prototype.startsWith = startsWith;    }  }());}</code></pre><hr><h3 id="String-prototype-endsWith"><a href="#String-prototype-endsWith" class="headerlink" title="String.prototype.endsWith()"></a>String.prototype.endsWith()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.endsWith(searchString [, position]);</strong></p></blockquote><p><code>endsWith()</code> æ–¹æ³•ç”¨æ¥åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥å¦å¤–ä¸€ä¸ªç»™å®šçš„å­å­—ç¬¦ä¸²ç»“å°¾çš„ã€‚</p><p><code>searchString</code><br>è¦æœç´¢çš„å­å­—ç¬¦ä¸²</p><p><code>position</code><br>åœ¨ str ä¸­æœç´¢ searchString çš„ç»“æŸä½ç½®ï¼Œé»˜è®¤å€¼ä¸º <code>str.length</code>ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£çš„å­—ç¬¦ä¸²ç»“å°¾å¤„ã€‚</p><p><strong>Polyfill</strong></p><pre><code class="JavaScript">if (!String.prototype.endsWith) {    String.prototype.endsWith = function( searchString, position) {        if (position === undefined || position &gt; this.length) {            position = this.length;        }        return this.substring(position - searchString.length, position) === searchString;    };}</code></pre><hr><h3 id="String-prototype-slice"><a href="#String-prototype-slice" class="headerlink" title="String.prototype.slice()"></a>String.prototype.slice()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.slice(beginSlice[, endSlice])</strong></p></blockquote><p>slice() æ–¹æ³•æå–ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶è¿”å›ä¸€æ–°çš„å­—ç¬¦ä¸²ã€‚</p><p><code>beginSlice</code><br>ä»è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„å¼€å§‹æå–åŸå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚å¦‚æœå€¼ä¸ºè´Ÿæ•°ï¼Œä¼šè¢«å½“åš <code>str.length + beginSlice</code>ï¼Œå¦‚æœæ˜¯å°æ•°åˆ™ä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼Œå¦‚æœè¶…å‡º <code>str.length</code> åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</p><p><code>endSlice</code><br>åœ¨è¯¥ç´¢å¼•ï¼ˆä»¥ 0 ä¸ºåŸºæ•°ï¼‰å¤„ç»“æŸæå–å­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œsliceä¼šä¸€ç›´æå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚å¦‚æœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¢«çœ‹ä½œæ˜¯ <code>str.length + endSlice</code>ï¼Œå¦‚æœæ˜¯å°æ•°åˆ™ä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼Œå¦‚æœè¶…å‡º <code>str.length</code> åˆ™å½“åš <code>str.length</code>ã€‚</p><p><em>æ³¨æ„ï¼šæå–çš„å­—ç¬¦åŒ…æ‹¬ <code>beginSlice</code> ä½ç½®çš„å­—ç¬¦ä½†æ˜¯ä¸åŒ…æ‹¬ <code>endSlice</code> ä½ç½®çš„å­—ç¬¦ï¼Œå¦‚æœ <code>endSlice &lt;= beginSlice</code> åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</em></p><p>å¸¸ç”¨æ“ä½œï¼šé…åˆ <code>Object.prototype.toString</code> åˆ¤æ–­ä¸€ä¸ªå˜é‡çš„ç±»å‹</p><pre><code class="JavaScript">function type(v) {    return Object.prototype.toString.call(v).slice(8, -1);}</code></pre><!--```JavaScript// è¿™ä¸¤ä¸ªå‚æ•°çš„å†…éƒ¨æœºåˆ¶å¯ä»¥ç”¨å¦‚ä¸‹ä¼ªä»£ç è¡¨ç¤ºï¼šString.prototype.slice = function(beginSlice, endSlice) {    let strLen = str.length;    endSlice = endSlice || strLen;    // å¦‚æœ endSlice <= beginSlice åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²    if (endSlice <= beginSlice) {        return "";    }    // å¦‚æœ beginSlice è¶…å‡º str.length åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²    if (beginSlice >= strLen) {        return "";    }    // å¦‚æœ endSlice åˆ™å½“åš str.length    if (endSlice > strLen) {        endSlice = strLen;    }    // å¦‚æœå‚æ•°å€¼ä¸ºè´Ÿæ•°åˆ™è¢«å½“ä½œ str.length + beginSlice    if(beginSlice < 0) {        beginSlice += strLen    }    if(endSlice < 0) {        endSlice += strLen    }    // å–æ•´    beginSlice = beginSlice >>> 0;    endSlice = endSlice >>> 0;}```--><hr><h3 id="String-prototype-split"><a href="#String-prototype-split" class="headerlink" title="String.prototype.split()"></a>String.prototype.split()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.split([separator[, limit]])</strong></p></blockquote><p><code>split()</code> æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦å­—ç¬¦ä¸²å°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ã€‚ </p><p><code>separator</code><br>è¡¨ç¤ºæ¯ä¸ªæ‹†åˆ†çš„ä½ç½®ã€‚<code>separator</code> å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœçº¯æ–‡æœ¬åˆ†éš”ç¬¦åŒ…å«å¤šä¸ªå­—ç¬¦ï¼Œåˆ™å¿…é¡»æ‰¾åˆ°æ•´ä¸ªå­—ç¬¦ä¸²æ¥è¡¨ç¤ºåˆ†å‰²ç‚¹ã€‚å¦‚æœçœç•¥æˆ–åœ¨ <code>str</code> ä¸­ä¸å‡ºç°åˆ†éš”ç¬¦ï¼Œåˆ™è¿”å›çš„æ•°ç»„åŒ…å«ä¸€ä¸ªç”±æ•´ä¸ªå­—ç¬¦ä¸²ç»„æˆçš„å…ƒç´ ã€‚å¦‚æœåˆ†éš”ç¬¦ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œåˆ™å°† <code>str</code> åŸå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦çš„æ•°ç»„å½¢å¼è¿”å›ã€‚</p><p><code>limit</code><br>ä¸€ä¸ªæ•´æ•°ï¼ˆå¦‚æœæ˜¯å°æ•°æ—¶ï¼Œåªä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼Œå¦‚æœæ˜¯è´Ÿå€¼åˆ™ç›¸å½“äºæ— é™åˆ¶ï¼‰ï¼Œé™å®šè¿”å›çš„å­—ç¬¦ä¸²æ•°ç»„çš„é•¿åº¦ã€‚å½“æä¾›æ­¤å‚æ•°æ—¶ï¼Œ<code>split</code> æ–¹æ³•ä¼šåœ¨æŒ‡å®šåˆ†éš”ç¬¦çš„æ¯æ¬¡å‡ºç°æ—¶åˆ†å‰²è¯¥å­—ç¬¦ä¸²ï¼Œåœ¨æ•°ç»„é•¿åº¦è¾¾åˆ°é™åˆ¶é•¿åº¦æ—¶è¿”å›ï¼Œåé¢å¦‚æœè¿˜æœ‰å‰©ä¸‹çš„å­—ç¬¦ä¸²ä¹Ÿä¼šå¿½ç•¥æ‰ã€‚</p><p><em>Note: å¦‚æœ separator åŒ…å«æ•è·æ‹¬å·ï¼ˆcapturing parenthesesï¼‰ï¼Œåˆ™å…¶åŒ¹é…ç»“æœå°†ä¼šåŒ…å«åœ¨è¿”å›çš„æ•°ç»„ä¸­ã€‚</em></p><pre><code class="JavaScript">var str = &quot;Hello 1 word.&quot;;str.split(/(\d)/);   // [&quot;Hello &quot;, &quot;1&quot;, &quot; word.&quot;]str.split(/\d/);     // [&quot;Hello &quot;, &quot; word.&quot;]str.split(&quot;&quot;);       // [&quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;, &quot; &quot;, &quot;1&quot;, &quot; &quot;, &quot;w&quot;, &quot;o&quot;, &quot;r&quot;, &quot;d&quot;, &quot;.&quot;]str.split(&quot;&quot;, -1);   // [&quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;, &quot; &quot;, &quot;1&quot;, &quot; &quot;, &quot;w&quot;, &quot;o&quot;, &quot;r&quot;, &quot;d&quot;, &quot;.&quot;]str.split(&quot;&quot; , 3);   // [&quot;H&quot;, &quot;e&quot;, &quot;l&quot;]str.split(&quot;&quot; , 3.5); // [&quot;H&quot;, &quot;e&quot;, &quot;l&quot;]</code></pre><hr><h3 id="String-prototype-replace"><a href="#String-prototype-replace" class="headerlink" title="String.prototype.replace()"></a>String.prototype.replace()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.replace(regexp|substr, newSubStr|function)</strong></p></blockquote><p><code>replace()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªç”±æ›¿æ¢å€¼æ›¿æ¢ä¸€äº›æˆ–æ‰€æœ‰åŒ¹é…çš„æ¨¡å¼åçš„æ–°å­—ç¬¦ä¸²ã€‚æ¨¡å¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼, æ›¿æ¢å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªæ¯æ¬¡åŒ¹é…éƒ½è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><p><em>Note: åŸå­—ç¬¦ä¸²ä¸ä¼šæ”¹å˜ã€‚</em></p><p><code>regexp|substr</code><br>æ‰€åŒ¹é…çš„å†…å®¹ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°çš„è¿”å›å€¼æ›¿æ¢æ‰ã€‚</p><p><code>newSubStr</code><br>ç”¨äºæ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„åŒ¹é…éƒ¨åˆ†çš„å­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²ä¸­å¯ä»¥å†…æ’ä¸€äº›ç‰¹æ®Šçš„å˜é‡åã€‚</p><p><code>function</code><br>ä¸€ä¸ªç”¨æ¥åˆ›å»ºæ–°å­å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼å°†æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åŒ¹é…åˆ°çš„ç»“æœã€‚</p><h4 id="ä½¿ç”¨-newSubStr-å‚æ•°"><a href="#ä½¿ç”¨-newSubStr-å‚æ•°" class="headerlink" title="ä½¿ç”¨ newSubStr å‚æ•°"></a>ä½¿ç”¨ <code>newSubStr</code> å‚æ•°</h4><table><thead><tr><th>å˜é‡å</th><th>å€¼</th></tr></thead><tbody><tr><td>$$</td><td>æ’å…¥ä¸€ä¸ª <code>&quot;$&quot;</code></td></tr><tr><td>$&amp;</td><td>æ’å…¥åŒ¹é…çš„å­ä¸²</td></tr><tr><td>$`</td><td>æ’å…¥å½“å‰åŒ¹é…å­ä¸²å·¦è¾¹çš„å†…å®¹</td></tr><tr><td>$â€™</td><td>æ’å…¥å½“å‰åŒ¹é…å­ä¸²å³è¾¹çš„å†…å®¹</td></tr><tr><td>$n</td><td>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ RegExp å¯¹è±¡ï¼Œå¹¶ä¸” n æ˜¯ä¸ªå°äº100çš„éè´Ÿæ•´æ•°ï¼Œé‚£ä¹ˆæ’å…¥ç¬¬ n ä¸ªæ‹¬å·åŒ¹é…çš„å­—ç¬¦ä¸²</td></tr></tbody></table><h4 id="æŒ‡å®šä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°"><a href="#æŒ‡å®šä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°" class="headerlink" title="æŒ‡å®šä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°"></a>æŒ‡å®šä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</h4><p>ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“åŒ¹é…æ‰§è¡Œåï¼Œ è¯¥å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚ å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºæ›¿æ¢å­—ç¬¦ä¸²ã€‚ (æ³¨æ„:  ä¸Šé¢æåˆ°çš„ç‰¹æ®Šæ›¿æ¢å‚æ•°åœ¨è¿™é‡Œä¸èƒ½è¢«ä½¿ç”¨ã€‚) å¦å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œ å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œ å¹¶ä¸”å…¶ä¸ºå…¨å±€åŒ¹é…æ¨¡å¼ï¼Œ é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°†è¢«å¤šæ¬¡è°ƒç”¨ï¼Œ æ¯æ¬¡åŒ¹é…éƒ½ä¼šè¢«è°ƒç”¨ã€‚</p><table><thead><tr><th>å˜é‡å</th><th>å€¼</th></tr></thead><tbody><tr><td>match</td><td>åŒ¹é…çš„å­ä¸²ã€‚ï¼ˆå¯¹åº”äºä¸Šè¿°çš„$&amp;ã€‚ï¼‰</td></tr><tr><td>p1,p2, â€¦</td><td>å¦‚æœ replace() æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª RegExp å¯¹è±¡ï¼Œåˆ™ä»£è¡¨ç¬¬nä¸ªæ‹¬å·åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td>offset</td><td>åŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„åç§»é‡ã€‚</td></tr><tr><td>string</td><td>è¢«åŒ¹é…çš„åŸå­—ç¬¦ä¸²ã€‚</td></tr></tbody></table><hr><h3 id="String-prototype-match"><a href="#String-prototype-match" class="headerlink" title="String.prototype.match()"></a>String.prototype.match()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.match(regexp)</strong></p></blockquote><p><code>match()</code> æ–¹æ³•æ£€ç´¢åŒ¹é…é¡¹ï¼Œå¹¶ä»¥æ•°ç»„çš„æ–¹å¼è¿”å›ç»“æœã€‚</p><p><code>regexp</code><br>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚å¦‚æœä¼ å…¥ä¸€ä¸ªéæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œåˆ™ä¼šéšå¼åœ°ä½¿ç”¨ new RegExp(obj) å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª RegExpã€‚å¦‚æœä¸ä¼ å‚æ•°ï¼Œé‚£ä¹ˆä¼šè¿”å›ä¸€ä¸ªåŒ…å«ç©ºå­—ç¬¦ä¸²çš„ Array ï¼š[â€œâ€]ï¼ˆå…·ä½“ç»“æœä¼šå› æµè§ˆå™¨å·®å¼‚è€Œä¸åŒï¼Œä½†æ˜¯éƒ½è¿”å›æ•°ç»„ä¸”ç¬¬ä¸€é¡¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰ã€‚</p><pre><code class="JavaScript">var str1 = &quot;NaN means not a number. Infinity contains -Infinity and +Infinity in JavaScript.&quot;,    str2 = &quot;My grandfather is 65 years old and My grandmother is 63 years old.&quot;,    str3 = &quot;The contract was declared null and void.&quot;;str1.match(&quot;number&quot;);   // &quot;number&quot; æ˜¯å­—ç¬¦ä¸²ã€‚è¿”å›[&quot;number&quot;]str1.match(NaN);        // NaNçš„ç±»å‹æ˜¯numberã€‚è¿”å›[&quot;NaN&quot;]str1.match(Infinity);   // Infinityçš„ç±»å‹æ˜¯numberã€‚è¿”å›[&quot;Infinity&quot;]str1.match(+Infinity);  // è¿”å›[&quot;Infinity&quot;]str1.match(-Infinity);  // è¿”å›[&quot;-Infinity&quot;]str2.match(65);         // è¿”å›[&quot;65&quot;]str2.match(+65);        // æœ‰æ­£å·çš„numberã€‚è¿”å›[&quot;65&quot;]str3.match(null);       // è¿”å›[&quot;null&quot;]</code></pre><hr><h3 id="String-prototype-search"><a href="#String-prototype-search" class="headerlink" title="String.prototype.search()"></a>String.prototype.search()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.search(regexp)</strong></p></blockquote><p><code>search()</code> æ–¹æ³•æ£€ç´¢åŒ¹é…é¡¹ï¼Œå¹¶ä»¥è¿”å›é¦–æ¬¡åŒ¹é…é¡¹çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰è¿”å› -1ã€‚</p><p><code>regexp</code><br>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚å¦‚æœä¼ å…¥ä¸€ä¸ªéæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œåˆ™ä¼šéšå¼åœ°ä½¿ç”¨ new RegExp(obj) å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª RegExpã€‚</p><hr><h3 id="String-prototype-substr"><a href="#String-prototype-substr" class="headerlink" title="String.prototype.substr()"></a>String.prototype.substr()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.substr(start[, length])</strong></p></blockquote><p><code>substr()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ä»æŒ‡å®šä½ç½®å¼€å§‹åˆ°æŒ‡å®šå­—ç¬¦æ•°çš„å­—ç¬¦ã€‚</p><p><code>start</code><br>å¼€å§‹æå–å­—ç¬¦çš„ä½ç½®ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™è¢«çœ‹ä½œ <code>str.length + start</code>ï¼Œå¦‚æœä¸ºå°æ•°åˆ™ä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚</p><p><code>length</code><br>æå–çš„å­—ç¬¦æ•°ï¼Œå¦‚æœä¸ºå°æ•°åˆ™ä¿ç•™æ•´æ•°éƒ¨åˆ†ï¼Œå¦‚æœ <code>start + length &gt; str.length</code> åˆ™è¿”å›æˆªå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ï¼Œå¦‚æœä¸ä¼ å€¼é»˜è®¤æˆªå–åˆ°å­—ç¬¦ä¸²æœ«å°¾ã€‚</p><hr><h3 id="String-prototype-substring"><a href="#String-prototype-substring" class="headerlink" title="String.prototype.substring()"></a>String.prototype.substring()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p><strong>str.substring(indexStart[, indexEnd])</strong></p></blockquote><p><code>substring()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¼€å§‹ç´¢å¼•åˆ°ç»“æŸç´¢å¼•ä¹‹é—´çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬å¼€å§‹ç´¢å¼•ä½ç½®çš„å­—ç¬¦ä¸åŒ…æ‹¬ç»“æŸç´¢å¼•ä½ç½®çš„å­—ç¬¦ï¼‰ã€‚</p><p><code>indexStart</code><br>å¼€å§‹æå–å­—ç¬¦çš„ä½ç½®ã€‚</p><p><code>indexEnd</code><br>ç»“æŸæå–å­—ç¬¦çš„ä½ç½®ã€‚</p><p>è¿™ä¸¤ä¸ªå‚æ•°æœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p><ul><li>å¦‚æœ <code>indexStart == endStart</code> è¿”å›ç©ºå­—ç¬¦ä¸²</li><li>å¦‚æœçœç•¥ <code>indexEnd</code>ï¼Œè¿”å›å­å­—ç¬¦ä¸²ç›´åˆ°å­—ç¬¦ä¸²æœ«å°¾</li><li>ä»»ä¸€å‚æ•°å°äº <code>0</code> æˆ–ä¸º <code>NaN</code> åˆ™å½“åš <code>0</code></li><li>ä»»ä¸€å‚æ•°å¤§äº <code>str.length</code> åˆ™å½“åš <code>str.length</code></li><li>å¦‚æœ <code>indexStart &gt; indexEnd</code> åˆ™ä¸¤å‚æ•°å€¼äº’æ¢</li></ul><hr><h3 id="String-prototype-repeat"><a href="#String-prototype-repeat" class="headerlink" title="String.prototype.repeat()"></a>String.prototype.repeat()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p>str.repeat(count)</p></blockquote><p><code>repeat()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«è¢«è¿æ¥åœ¨ä¸€èµ·çš„æŒ‡å®šæ¬¡æ•°çš„å­—ç¬¦ä¸²ã€‚</p><p><code>count</code><br>ä»‹äº0å’Œæ­£æ— ç©·å¤§ä¹‹é—´çš„æ•´æ•° : [0, +âˆ) ã€‚è¡¨ç¤ºåœ¨æ–°æ„é€ çš„å­—ç¬¦ä¸²ä¸­é‡å¤äº†å¤šå°‘éåŸå­—ç¬¦ä¸²ã€‚</p><p><em>Note: <code>count</code> ä¸åœ¨æŒ‡å®šèŒƒå›´å†…ä¼šæŠ¥é”™ï¼Œä¸”å¦‚æœæ„æˆçš„å­—ç¬¦ä¸²è¶…è¿‡äº†èƒ½å¤Ÿå®¹çº³çš„æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ä¹Ÿä¼šæŠ¥é”™ï¼Œå³å†…å­˜æº¢å‡ºã€‚</em></p><p><strong>Polyfill</strong></p><pre><code class="JavaScript">if (!String.prototype.repeat) {  String.prototype.repeat = function(count) {    &#39;use strict&#39;;    if (this == null) {      throw new TypeError(&#39;can\&#39;t convert &#39; + this + &#39; to object&#39;);    }    var str = &#39;&#39; + this;    count = +count;    if (count != count) {      count = 0;    }    if (count &lt; 0) {      throw new RangeError(&#39;repeat count must be non-negative&#39;);    }    if (count == Infinity) {      throw new RangeError(&#39;repeat count must be less than infinity&#39;);    }    count = Math.floor(count);    if (str.length == 0 || count == 0) {      return &#39;&#39;;    }    // ç¡®ä¿ count æ˜¯ä¸€ä¸ª 31 ä½çš„æ•´æ•°ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¼˜åŒ–çš„ç®—æ³•ã€‚    // å½“å‰ï¼ˆ2014å¹´8æœˆï¼‰ï¼Œç»å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¸èƒ½æ”¯æŒ 1 &lt;&lt; 28 é•¿çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ï¼š    if (str.length * count &gt;= 1 &lt;&lt; 28) {      throw new RangeError(&#39;repeat count must not overflow maximum string size&#39;);    }    var rpt = &#39;&#39;;    for (;;) {      if ((count &amp; 1) == 1) {        rpt += str;      }      count &gt;&gt;&gt;= 1;      if (count == 0) {        break;      }      str += str;    }    return rpt;  }}</code></pre><hr><h3 id="String-prototype-padStart"><a href="#String-prototype-padStart" class="headerlink" title="String.prototype.padStart()"></a>String.prototype.padStart()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p>str.padStart(targetLength [, padString])</p></blockquote><p><code>padStart()</code> æ–¹æ³•ç”¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²å¡«å……å½“å‰å­—ç¬¦ä¸²(å¦‚æœéœ€è¦çš„è¯åˆ™é‡å¤å¡«å……)ï¼Œè¿”å›å¡«å……åè¾¾åˆ°æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚ä»å½“å‰å­—ç¬¦ä¸²çš„å¼€å§‹ï¼ˆå·¦ä¾§ï¼‰å¼€å§‹å¡«å……ã€‚</p><p><code>targetLength</code><br>å½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚</p><p><code>padString</code><br>å¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ã€‚é»˜è®¤å€¼ä¸ºç©ºæ ¼ã€‚</p><p><strong>Polyfill</strong></p><pre><code class="JavaScript">if (!String.prototype.padStart) {    String.prototype.padStart = function padStart(targetLength,padString) {        targetLength = targetLength &gt;&gt; 0; //floor if number or convert non-number to 0;        padString = String(padString || &#39; &#39;);        if (this.length &gt; targetLength) {            return String(this);        } else {            targetLength = targetLength - this.length;            if (targetLength &gt; padString.length) {                //append to original to ensure we are longer than needed                padString += padString.repeat(targetLength / padString.length);            }            return padString.slice(0, targetLength) + String(this);        }    };}</code></pre><hr><h3 id="String-prototype-padEnd"><a href="#String-prototype-padEnd" class="headerlink" title="String.prototype.padEnd()"></a>String.prototype.padEnd()</h3><p><strong>è¯­æ³•</strong></p><blockquote><p>str.padEnd(targetLength [, padString])</p></blockquote><p><code>padEnd()</code> æ–¹æ³•ä¼šç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å¡«å……å½“å‰å­—ç¬¦ä¸²ï¼ˆå¦‚æœéœ€è¦çš„è¯åˆ™é‡å¤å¡«å……ï¼‰ï¼Œè¿”å›å¡«å……åè¾¾åˆ°æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²ã€‚ä»å½“å‰å­—ç¬¦ä¸²çš„æœ«å°¾ï¼ˆå³ä¾§ï¼‰å¼€å§‹å¡«å……ã€‚</p><p><code>targetLength</code><br>å½“å‰å­—ç¬¦ä¸²éœ€è¦å¡«å……åˆ°çš„ç›®æ ‡é•¿åº¦ã€‚å¦‚æœè¿™ä¸ªæ•°å€¼å°äºå½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œåˆ™è¿”å›å½“å‰å­—ç¬¦ä¸²æœ¬èº«ã€‚</p><p><code>padString</code><br>å¡«å……å­—ç¬¦ä¸²ã€‚å¦‚æœå­—ç¬¦ä¸²å¤ªé•¿ï¼Œä½¿å¡«å……åçš„å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡äº†ç›®æ ‡é•¿åº¦ï¼Œåˆ™åªä¿ç•™æœ€å·¦ä¾§çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†ä¼šè¢«æˆªæ–­ã€‚é»˜è®¤å€¼ä¸ºç©ºæ ¼ã€‚</p><p><strong>Polyfill</strong></p><pre><code class="JavaScript">if (!String.prototype.padEnd) {    String.prototype.padEnd = function padEnd(targetLength,padString) {        targetLength = targetLength &gt;&gt; 0; // floor if number or convert non-number to 0;        padString = String(padString || &#39; &#39;);        if (this.length &gt; targetLength) {            return String(this);        } else {            targetLength = targetLength-this.length;            if (targetLength &gt; padString.length) {                // append to original to ensure we are longer than needed                padString += padString.repeat(targetLength / padString.length);            }            return String(this) + padString.slice(0, targetLength);        }    };}</code></pre><p>ä¸€å›¾èƒœåƒè¨€<br><img src="/2018/07/12/JavaScript/String/String.png" alt="String æ€ç»´å¯¼å›¾"></p><p>ä¸‹é¢æ˜¯ xmind æ–‡ä»¶</p><p><a href="String.xmind">String.xmind</a></p>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>é—­åŒ…ä¸ä½œç”¨åŸŸ</title>
      <link href="/2018/07/10/JavaScript/%E9%97%AD%E5%8C%85%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F/"/>
      <url>/2018/07/10/JavaScript/%E9%97%AD%E5%8C%85%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F/</url>
      <content type="html"><![CDATA[<h2 id="å˜é‡çš„ä½œç”¨åŸŸ"><a href="#å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡çš„ä½œç”¨åŸŸ"></a>å˜é‡çš„ä½œç”¨åŸŸ</h2><p>é—­åŒ…ä¸ JavaScript å˜é‡çš„ä½œç”¨åŸŸæ¯æ¯ç›¸å…³ã€‚è¦ç†è§£é—­åŒ…å°±è¦å…ˆç†è§£ JavaScript å˜é‡ä½œç”¨åŸŸã€‚</p><p>å˜é‡çš„ä½œç”¨åŸŸæœ‰ä¸¤ç§ï¼š ä¸€ç§æ˜¯å…¨å±€çš„å¦ä¸€ç§æ˜¯å±€éƒ¨çš„ã€‚</p><pre><code class="JavaScript">var a = 1;var n = 9;function foo() {    var a = 0;    b = 2;    var c = 1;    console.log(a);    console.log(n);}foo(); // 0// 9console.log(a); // 1console.log(b); // 2  è§£é‡Šï¼šå¦‚æœå±€éƒ¨å˜é‡æ²¡æœ‰ç”¨ var å‘½ä»¤å£°æ˜ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¼šè¢«å½“åšå…¨å±€å˜é‡console.log(c); // ReferenceError: c is not defined</code></pre><p>å¦‚ä¸Šå‡½æ•°å˜é‡ é¦–å…ˆæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªå…¨å±€çš„ <code>var a = 1</code> ï¼Œç„¶ååˆå£°æ˜äº†ä¸€ä¸ªå…¨å±€çš„å‡½æ•° <code>foo</code>ã€‚</p><p><code>foo</code> å‡½æ•°å†…éƒ¨å£°æ˜äº†å‡½æ•°å†…éƒ¨çš„å˜é‡ <code>var a = 0</code>, ä»¥åŠæ²¡æœ‰ç”¨ <code>var</code> å‘½ä»¤å£°æ˜çš„å˜é‡ <code>b = 2</code>ã€‚</p><p>æ­¤æ—¶å…¨å±€ä½œç”¨åŸŸå³å¤–éƒ¨çš„ JavaScript æ‰€æ‰§è¡Œçš„ç¯å¢ƒè€Œå±€éƒ¨ä½œç”¨åŸŸæ˜¯ <code>foo</code> å‡½æ•°å†…éƒ¨ã€‚ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœåº”è¯¥å¾ˆæ˜æ˜¾çš„è¡¨ç°äº†ä½œç”¨åŸŸçš„èŒƒå›´ã€‚</p><p>å…¨å±€å˜é‡å¯ä»¥è¢«å±€éƒ¨ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸè®¿é—®ï¼Œç„¶è€Œå±€éƒ¨å˜é‡å´ä¸å¯ä»¥è¢«å¤–éƒ¨ä½œç”¨åŸŸè®¿é—®ã€‚</p><h3 id="å¯ä»¥è¢«æ¬ºéª—çš„ä½œç”¨åŸŸ"><a href="#å¯ä»¥è¢«æ¬ºéª—çš„ä½œç”¨åŸŸ" class="headerlink" title="å¯ä»¥è¢«æ¬ºéª—çš„ä½œç”¨åŸŸ"></a>å¯ä»¥è¢«æ¬ºéª—çš„ä½œç”¨åŸŸ</h3><p>åœ¨ <strong>ã€Šä½ ä¸æ‡‚ JS â€”â€” ä½œç”¨åŸŸå’Œé—­åŒ…ã€‹</strong> é‡Œçœ‹åˆ°äº†ä¸€æ®µæœ‰è¶£çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å¯ä»¥æ¬ºéª—è¯æ³•ä½œç”¨åŸŸä½†æ˜¯æ¬ºéª—è¯æ³•ä½œç”¨äºä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚å› ä¸ºå¼•æ“éœ€è¦åŠ¨æ€å»æ”¹å˜æŸä¸ªå˜é‡çš„ä½œç”¨åŸŸç¯å¢ƒã€‚</p><h4 id="ç¬¬ä¸€ç§æ˜¯-eval"><a href="#ç¬¬ä¸€ç§æ˜¯-eval" class="headerlink" title="ç¬¬ä¸€ç§æ˜¯ eval"></a>ç¬¬ä¸€ç§æ˜¯ <em>eval</em></h4><pre><code class="JavaScript">var b = 2;function foo(str, a) {    eval(str);    console.log(a, b);}foo(&quot;var b = 3;&quot;, 1); // 1, 3</code></pre><p>ä¸Šé¢çš„å‡½æ•°åœ¨ <code>eval</code> æ‰§è¡Œå®Œä¹‹åï¼Œå¼•æ“ä¸ä¼šå…³å¿ƒå‰é¢åšäº†ä»€ä¹ˆä¾ç„¶ä¼šä¹–ä¹–çš„å»å¯»æ‰¾ <code>console.log</code> æ‰€éœ€è¦çš„ä¸¤ä¸ªå˜é‡ <code>a</code> å’Œ <code>b</code>ï¼Œ é¦–å…ˆ <code>a</code> åœ¨å‡½æ•°çš„å‚æ•°ä¸­æ‰¾åˆ°äº†ï¼Œå…¶æ¬¡æ‰¾ <code>b</code> ç”±äºæ‰§è¡Œäº† <code>eval</code> æ‰€æœ‰åœ¨å‡½æ•°å†…éƒ¨å­˜åœ¨äº†å˜é‡ <code>b = 3</code>ã€‚äºæ˜¯æ‰“å°å‡º <code>1, 3</code></p><p><strong>Note: å½“ <code>eval</code> è¢«ç”¨äº strict æ¨¡å¼çš„æ—¶å€™ï¼Œ<code>eval</code> å†…éƒ¨çš„å£°æ˜ä¸ä¼šæ”¹å˜åŒ…å›´å®ƒçš„ä½œç”¨åŸŸ</strong></p><pre><code class="JavaScript">function foo(str) {    &quot;use strict&quot;;    eval(str);    console.log(a); // ReferenceError: a is not defined}foo(&quot;var a = 1;&quot;);</code></pre><h4 id="ç¬¬äºŒç§æ˜¯-with"><a href="#ç¬¬äºŒç§æ˜¯-with" class="headerlink" title="ç¬¬äºŒç§æ˜¯ with"></a>ç¬¬äºŒç§æ˜¯ <em>with</em></h4><p>å¥½å§å·²ç»åºŸé™¤äº†ä¸æƒ³å¤šè¯´ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/with" target="_blank" rel="noopener">MDN with</a></p><h4 id="å¯¹æ€§èƒ½çš„å½±å“"><a href="#å¯¹æ€§èƒ½çš„å½±å“" class="headerlink" title="å¯¹æ€§èƒ½çš„å½±å“"></a>å¯¹æ€§èƒ½çš„å½±å“</h4><blockquote><p>JavaScript å¼•æ“åœ¨ç¼–è¯‘é˜¶æ®µè¿è¡Œè®¸å¤šæ€§èƒ½ä¼˜åŒ–çš„å·¥ä½œã€‚å…¶ä¸­çš„ä¸€äº›ä¼˜åŒ–åŸç†éƒ½å½’ç»“ä¸ºå®è´¨åœ¨è¿›è¡Œè¯æ³•åˆ†ææ—¶å¯ä»¥é™æ€åœ°åˆ†æä»£ç ï¼Œå¹¶æå‰å†³å®šæ‰€æœ‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜éƒ½åœ¨ä»€ä¹ˆä½ç½®ï¼Œè¿™æ ·åœ¨æ‰§è¡ŒæœŸé—´å°±å¯ä»¥å°‘èŠ±äº›åŠ›æ°”æ¥è§£ææ ‡è¯†ç¬¦ã€‚</p><p>å¦‚æœå¼•æ“åœ¨ä»£ç ä¸­å‘ç°ä¸€ä¸ª <code>eval</code> æˆ– <code>with</code>ï¼Œå®ƒå®è´¨ä¸Šå°±ä¸å¾—ä¸å‡è®¾è‡ªå·±çŸ¥é“æ‰€æœ‰çš„æ ‡è¯†ç¬¦çš„ä½ç½®å¯èƒ½æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºä»–ä¸å¯èƒ½åœ¨è¯æ³•åˆ†ææ—¶å°±çŸ¥é“ä½ ä¼šå‘ <code>eval</code> æˆ– <code>with</code> ä¼ é€’ä»€ä¹ˆæ ·çš„ä»£ç æ¥ä¿®æ”¹è¯æ³•ä½œç”¨åŸŸã€‚</p><p>æ¢å¥è¯è¯´ï¼Œå¦‚æœ <code>eval</code> æˆ– <code>with</code> å‡ºç°ï¼Œé‚£ä¹ˆå¼•æ“åšçš„å‡ ä¹æ‰€æœ‰ä¼˜åŒ–éƒ½ä¼šå˜å¾—æ²¡æœ‰æ„ä¹‰ã€‚æ‰€ä»¥ä»–ç®€å•åœ°ä¸åšä»»ä½•ä¼˜åŒ–ã€‚ä»£ç ä¼šè¶‹äºè¿è¡Œçš„æ›´æ…¢ï¼ˆæ²¡æœ‰ä¼˜åŒ–ï¼Œä»£ç å°±è¿è¡Œçš„æ›´æ…¢ï¼‰</p><p>â€”â€”ã€Šä½ ä¸çŸ¥é“çš„ JavaScript â€”â€” ä½œç”¨åŸŸä¸é—­åŒ…ã€‹</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯é—­åŒ…-Closure"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…-Closure" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ… (Closure)"></a>ä»€ä¹ˆæ˜¯é—­åŒ… (Closure)</h2><p>é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆ</p><p>è€ƒè™‘å¦‚ä¸‹å‡½æ•°</p><pre><code class="JavaScript">function makeAdder(x) {    return function(y) {        return x + y;    };}var add5 = makeAdder(5);var add10 = makeAdder(10);console.log(add5(2)); // 7console.log(add10(2)); // 12</code></pre><p>ä¸Šè¿°å‡½æ•°ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª <code>makeAdder(x)</code> å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•° <code>x</code> å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚è¿”å›çš„å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° <code>y</code> å¹¶è¿”å› <code>x + y</code> çš„å€¼ã€‚</p><p><code>add5</code> å’Œ <code>add10</code> éƒ½æ˜¯é—­åŒ…ä»–ä»¬å…±äº«ç›¸åŒçš„å‡½æ•°å®šä¹‰ï¼Œä½†æ˜¯ä¿å­˜äº†ä¸åŒçš„è¯æ³•ç¯å¢ƒã€‚åœ¨ <code>add5</code> çš„ç¯å¢ƒä¸­ <code>x</code> æ˜¯ 5 è€Œåœ¨ <code>add10</code> ä¸­ <code>x</code> æ˜¯ 10ã€‚</p><p>ä¸Šè¿°åªæ˜¯é—­åŒ…çš„ä¸€ç§ç”¨æ¥ç®€ç•¥çš„ä»‹ç»é—­åŒ…çš„ç‰¹æ€§ã€‚</p><h3 id="å®ç”¨çš„é—­åŒ…"><a href="#å®ç”¨çš„é—­åŒ…" class="headerlink" title="å®ç”¨çš„é—­åŒ…"></a>å®ç”¨çš„é—­åŒ…</h3><p>é—­åŒ…å¯ä»¥ç”¨æ¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚æ¨¡æ‹Ÿé¢å‘å¯¹è±¡çš„ä»£ç é£æ ¼ï¼Œæå‡ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚</p><p><strong>é—­åŒ…çš„ä¼˜ç‚¹å°±æ˜¯å¯ä»¥è¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œè¿˜å¯ä»¥è®©è¿™äº›å˜é‡å§‹ç»ˆä¿æŒåœ¨å†…å­˜å½“ä¸­ã€‚</strong></p><p>æ­£å¥½å‰äº›æ—¥å­åœ¨çœ‹ <code>Sizzle</code> çš„æºç ï¼Œå…¶ä¸­ä¹Ÿç”¨åˆ°äº†å¾ˆå¤šé—­åŒ…ç›¸å…³çš„ä¸œè¥¿ã€‚å°±ç”¨ <code>Sizzle</code> æºç ä½œä¸ºä¾‹å­å§ã€‚</p><h4 id="1-ç»“æœç¼“å­˜"><a href="#1-ç»“æœç¼“å­˜" class="headerlink" title="1. ç»“æœç¼“å­˜"></a>1. ç»“æœç¼“å­˜</h4><pre><code class="Javascript">/** * Create key-value caches of limited size * @returns {function(string, object)} Returns the Object data after storing it on itself with *    property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength) *    deleting the oldest entry */function createCache() {    var keys = [];    function cache( key, value ) {        // Use (key + &quot; &quot;) to avoid collision with native prototype properties (see Issue #157)        if ( keys.push( key + &quot; &quot; ) &gt; Expr.cacheLength ) {            // Only keep the most recent entries            delete cache[ keys.shift() ];        }        return (cache[ key + &quot; &quot; ] = value);    }    return cache;}var tokenCache = createCache();tokenCache( selector, groups );</code></pre><p><code>createCache()</code> å†…éƒ¨æœ‰ä¸€ä¸ª <code>keys</code> æ•°ç»„ç”¨æ¥ç»´æŠ¤éœ€è¦ç¼“å­˜çš„å…³é”®å­—ï¼Œç¼“å­˜ç»“æœè¢«å½“åšå±æ€§å­˜å‚¨åœ¨ <code>cache</code> å‡½æ•°ä¸Šï¼Œå½“ <code>keys</code> çš„æ•°é‡è¶…å‡ºå¯ç¼“å­˜çš„æ•°é‡å°±ä¼šåˆ æ‰æœ€å¼€å§‹ç¼“å­˜çš„å†…å®¹ã€‚</p><p>è¿™é‡Œ <code>keys</code> åªåœ¨å‡½æ•°æ‰§è¡Œæ—¶åˆ›å»ºäº†ï¼Œå¹¶ä¸”ä¸ä¼šè¢«å›æ”¶æ‰ã€‚å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œå¤–éƒ¨é€šè¿‡ <code>cache</code> å‡½æ•°ä¾ç„¶å¯ä»¥è®¿é—®åˆ° <code>createCache</code> å†…éƒ¨çš„ <code>keys</code>ã€‚</p><h4 id="2-æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•"><a href="#2-æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•" class="headerlink" title="2. æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•"></a>2. æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•</h4><pre><code class="JavaScript">var Person = function() {    var name = &quot;noName&quot;;    return {        getName: function() {            return name;        },        setName: function(newName) {            name = newName        }    };};var person = Person();person.getName(); // noNameperson.setName(&quot;LiLei&quot;);person.getName(); // LiLei</code></pre><p><code>Person</code> å‡½æ•°ä¸­çš„ <code>name</code> ä½œä¸ºä¸€ä¸ªç§æœ‰å˜é‡åªæœ‰è°ƒç”¨ <code>getName</code> æ–¹æ³•æ‰èƒ½è®¿é—®çš„åˆ°ï¼Œå¦‚æœç›´æ¥ç”¨ <code>person.name</code> è®¿é—®ä¼šå¾—åˆ° <code>undefined</code>ã€‚</p><h3 id="å°å¿ƒçš„ä½¿ç”¨é—­åŒ…"><a href="#å°å¿ƒçš„ä½¿ç”¨é—­åŒ…" class="headerlink" title="å°å¿ƒçš„ä½¿ç”¨é—­åŒ…"></a>å°å¿ƒçš„ä½¿ç”¨é—­åŒ…</h3><p>é—­åŒ…çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼šç”±äºå˜é‡éƒ½è¢«ä¿å­˜ä¸‹æ¥äº†ï¼Œé‚£ä¹ˆå†…å­˜çš„æ¶ˆè€—è‚¯å®šç›¸æ¯”äºæ²¡æœ‰é—­åŒ…è¦æ¥çš„å¤§ã€‚å¦‚æœä¸å°å¿ƒä½¿ç”¨å¾ˆå®¹æ˜“å°±é€ æˆå†…å­˜æ³„æ¼ã€‚</p><h3 id="æ„æ–™ä¹‹å¤–çš„é—­åŒ…"><a href="#æ„æ–™ä¹‹å¤–çš„é—­åŒ…" class="headerlink" title="æ„æ–™ä¹‹å¤–çš„é—­åŒ…"></a>æ„æ–™ä¹‹å¤–çš„é—­åŒ…</h3><p>ä¸‹é¢æ˜¯ MDN ä¸Šå…³äºé—­åŒ…çš„ä¸€æ®µä»£ç ï¼Œè®¸å¤šçš„é¢è¯•é¢˜ä¹Ÿå–œæ¬¢ç”¨ for å¾ªç¯ + setTimeout æ¥è€ƒå¯Ÿæ±‚èŒè€…å¯¹äºé—­åŒ…çš„ç†è§£ã€‚</p><pre><code class="JavaScript">function showHelp(help) {  document.getElementById(&#39;help&#39;).innerHTML = help;}function setupHelp() {  var helpText = [      {&#39;id&#39;: &#39;email&#39;, &#39;help&#39;: &#39;Your e-mail address&#39;},      {&#39;id&#39;: &#39;name&#39;, &#39;help&#39;: &#39;Your full name&#39;},      {&#39;id&#39;: &#39;age&#39;, &#39;help&#39;: &#39;Your age (you must be over 16)&#39;}    ];  for (var i = 0; i &lt; helpText.length; i++) {    var item = helpText[i];    document.getElementById(item.id).onfocus = function() {      showHelp(item.help);    }  }}setupHelp();</code></pre><p>æ¯«æ— ç–‘é—®ä¸Šè¿°ä»£ç ä¸ç®¡å“ªä¸ªå…ƒç´ è¢« <code>focus</code> éƒ½åªä¼šæ˜¾ç¤ºå…³äº age çš„ help ä¿¡æ¯ï¼Œè§£æ³•ä¹Ÿå¤§è‡´é‚£ä¹ˆå‡ ç§ã€‚</p><ol><li>ç”¨ ES6 çš„ <code>let</code></li></ol><pre><code class="JavaScript">let item = helpText[i]</code></pre><ol start="2"><li>åˆ›å»ºä¸€ä¸ªåŒ¿åé—­åŒ…</li></ol><pre><code class="JavaScript">  for (var i = 0; i &lt; helpText.length; i++) {    (function(item) {        document.getElementById(item.id).onfocus = function() {            showHelp(item.help);        };    }(helpText[i]);  }</code></pre><ol start="3"><li>ä½¿ç”¨æ›´å¤šçš„é—­åŒ…</li></ol><pre><code class="JavaScript">function showHelp(help) {  document.getElementById(&#39;help&#39;).innerHTML = help;}function makeHelpCallback(help) {  return function() {    showHelp(help);  };}function setupHelp() {  var helpText = [      {&#39;id&#39;: &#39;email&#39;, &#39;help&#39;: &#39;Your e-mail address&#39;},      {&#39;id&#39;: &#39;name&#39;, &#39;help&#39;: &#39;Your full name&#39;},      {&#39;id&#39;: &#39;age&#39;, &#39;help&#39;: &#39;Your age (you must be over 16)&#39;}    ];  for (var i = 0; i &lt; helpText.length; i++) {    var item = helpText[i];    document.getElementById(item.id).onfocus = makeHelpCallback(item.help);  }}setupHelp();</code></pre>]]></content>
      
      <categories>
          
          <category> é—­åŒ…ä¸ä½œç”¨åŸŸ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Wow BFC</title>
      <link href="/2018/07/01/%E5%89%8D%E7%AB%AF/Wow-BFC/"/>
      <url>/2018/07/01/%E5%89%8D%E7%AB%AF/Wow-BFC/</url>
      <content type="html"><![CDATA[<h1 id="å“‡å“¦ï¼Œ-BFC"><a href="#å“‡å“¦ï¼Œ-BFC" class="headerlink" title="å“‡å“¦ï¼Œ BFC"></a>å“‡å“¦ï¼Œ BFC</h1><p>ç»å¸¸ç”¨åˆ°å’Œå¬åˆ° BFCï¼Œ ä½†æ˜¯å¯¹äºå…·ä½“çš„ BFC æœ‰å“ªäº›æƒ…å†µå¯ä»¥è§¦å‘äº†è§£çš„è¿˜ä¸æ˜¯å¾ˆå…¨é¢ï¼Œä»Šå¤©æ•´ç†ä¸‹å¯¹äº BFC çš„ç†è§£ã€‚</p><h2 id="Whatâ€™s-BFC"><a href="#Whatâ€™s-BFC" class="headerlink" title="Whatâ€™s BFC"></a>Whatâ€™s BFC</h2><p>BFC (Block Formatting Context) å³å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚ç›¸ä¼¼çš„è¿˜æœ‰ IFC (Inline), FFC (Flex), GFC (Grid)ã€‚</p><h3 id="BFC-å¸ƒå±€è§„åˆ™"><a href="#BFC-å¸ƒå±€è§„åˆ™" class="headerlink" title="BFC å¸ƒå±€è§„åˆ™"></a>BFC å¸ƒå±€è§„åˆ™</h3><ol><li>å†…éƒ¨çš„ç›’å­ä¼šåœ¨å‚ç›´æ–¹å‘ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ”¾ç½®ã€‚</li><li>ç›’å­çš„å‚ç›´æ–¹å‘è·ç¦»ç”± <code>margin</code> å†³å®šã€‚å±äº <code>åŒä¸€ä¸ª BFC</code> çš„ä¸¤ä¸ªç›¸é‚»ç›’å­çš„ <code>margin</code> ä¼šé‡å ï¼Œå€¼ç”±ä¸¤ä¸ª <code>margin</code> çš„æœ€å¤§å€¼å†³å®šã€‚</li><li>æ¯ä¸ªå…ƒç´ çš„ <code>margin</code> çš„å·¦è¾¹ï¼Œä¸åŒ…å«å—çš„ <code>border</code> çš„å·¦è¾¹ç›¸æ¥è§¦ï¼ˆç”±å·¦å‘å³çš„å¸ƒå±€ï¼Œå¦åˆ™ç›¸åï¼‰</li><li>BFC çš„åŒºåŸŸä¸ä¼šä¸ float ç›’å­é‡å ã€‚ </li><li>BFC æ˜¯é¡µé¢ä¸Šçš„éš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨å†…çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚</li><li>è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—</li></ol><h2 id="å“ªäº›å…ƒç´ ä¼šç”Ÿæˆ-BFC"><a href="#å“ªäº›å…ƒç´ ä¼šç”Ÿæˆ-BFC" class="headerlink" title="å“ªäº›å…ƒç´ ä¼šç”Ÿæˆ BFC"></a>å“ªäº›å…ƒç´ ä¼šç”Ÿæˆ BFC</h2><ul><li>æ ¹å…ƒç´ </li><li>float å±æ€§ä¸ä¸º none</li><li>position å±æ€§ä¸ä¸ºrelativeå’Œstaticã€‚</li><li>display å±æ€§ä¸º inline-block, table-cell, table-caption, flex, inline-flex ä¸­çš„ä»»ä½•ä¸€ä¸ª</li><li>overflow ä¸ä¸º visible</li></ul><h2 id="BFC-çš„ä½œç”¨å’ŒåŸç†"><a href="#BFC-çš„ä½œç”¨å’ŒåŸç†" class="headerlink" title="BFC çš„ä½œç”¨å’ŒåŸç†"></a>BFC çš„ä½œç”¨å’ŒåŸç†</h2><h3 id="1-è‡ªé€‚åº”ä¸¤æ å¸ƒå±€"><a href="#1-è‡ªé€‚åº”ä¸¤æ å¸ƒå±€" class="headerlink" title="1. è‡ªé€‚åº”ä¸¤æ å¸ƒå±€"></a>1. è‡ªé€‚åº”ä¸¤æ å¸ƒå±€</h3><pre><code class="HTML">&lt;style&gt;    .demo1 {        position: relative;        width: 300px;        border: 1px solid #000;    }    .demo1 .aside {        float: left;        width: 100px;        height: 150px;        background: #f66;    }    .demo1 .main {        height: 200px;        overflow: hidden;        background: #fcc;    }&lt;/style&gt;&lt;div class=&quot;demo1&quot;&gt;    &lt;div class=&quot;aside&quot;&gt;&lt;/div&gt;    &lt;div class=&quot;main&quot;&gt;&lt;/div&gt;&lt;/div&gt;</code></pre><p>é¡µé¢å¦‚ä¸‹ï¼š</p><div><style>.demo1 {width: 300px; position: relative;border: 1px solid #000;}.demo1 .aside {width: 100px; height: 150px; float: left; background: #f66;}.demo1 .main {height: 200px;background: #fcc;overflow: hidden;}</style><div class="demo1"><div class="aside"></div><div class="main"></div></div></div><p>è¿™é‡Œåº”ç”¨äº† BFC å¸ƒå±€è§„åˆ™çš„ç¬¬ä¸‰æ¡å’Œç¬¬å››æ¡ã€‚</p><h3 id="2-æ¸…é™¤å†…éƒ¨æµ®åŠ¨"><a href="#2-æ¸…é™¤å†…éƒ¨æµ®åŠ¨" class="headerlink" title="2. æ¸…é™¤å†…éƒ¨æµ®åŠ¨"></a>2. æ¸…é™¤å†…éƒ¨æµ®åŠ¨</h3><pre><code class="HTML">&lt;style&gt;    .father {        width: 300px;        overflow: hidden;        border: 5px solid #fcc;    }    .child {        float: left;        width:100px;        height: 100px;        border: 5px solid #f66;    }&lt;/style&gt;&lt;div class=&quot;father&quot;&gt;    &lt;div class=&quot;child&quot;&gt;&lt;/div&gt;    &lt;div class=&quot;child&quot;&gt;&lt;/div&gt;&lt;/div&gt;</code></pre><p>é¡µé¢å¦‚ä¸‹ï¼š</p><div><style>.father {overflow: hidden;border: 5px solid #fcc;width: 300px;}.child {border: 5px solid #f66;width:100px;height: 100px;float: left;}</style><div class="father"><div class="child"></div><div class="child"></div></div></div><p>è¿™é‡Œåº”ç”¨äº† BFC å¸ƒå±€è§„åˆ™çš„ç¬¬å…­æ¡ã€‚</p><h3 id="3-é˜²æ­¢å‚ç›´-margin-é‡å "><a href="#3-é˜²æ­¢å‚ç›´-margin-é‡å " class="headerlink" title="3. é˜²æ­¢å‚ç›´ margin é‡å "></a>3. é˜²æ­¢å‚ç›´ margin é‡å </h3><pre><code class="HTML">&lt;style&gt;    .demo3{        border: 1px solid #000;    }    .demo3 .wrap {        overflow: hidden;    }    .demo3 p {        margin: 100px;        line-height: 100px;        text-align:center;        color: #f55;        background: #fcc;    }&lt;/style&gt;&lt;div class=&quot;demo3&quot;&gt;    &lt;p&gt;Haha&lt;/p&gt;    &lt;div class=&quot;wrap&quot;&gt;        &lt;p&gt;Hehe&lt;/p&gt;    &lt;/div&gt;&lt;/div&gt;</code></pre><p>é¡µé¢å¦‚ä¸‹:</p><div><style>.demo3{border: 1px solid #000;}.wrap {overflow: hidden;}#post-content .demo3 p {margin: 100px;line-height: 100px;text-align:center;color: #f55;background: #fcc;}</style><div class="demo3"><p>Haha</p><div class="wrap"><p>Hehe</p></div></div><p>è¿™é‡Œåº”ç”¨äº† BFC å¸ƒå±€è§„åˆ™çš„ç¬¬äºŒæ¡ã€‚</p><hr><h2 id="Whatâ€™s-IFC"><a href="#Whatâ€™s-IFC" class="headerlink" title="Whatâ€™s IFC"></a>Whatâ€™s IFC</h2><p>IFC çš„ line boxï¼ˆçº¿æ¡†ï¼‰é«˜åº¦ç”±å…¶åŒ…å«è¡Œå†…å…ƒç´ ä¸­æœ€é«˜çš„å®é™…é«˜åº¦è®¡ç®—è€Œæ¥ï¼ˆä¸å—åˆ°ç«–ç›´æ–¹å‘çš„padding/marginå½±å“)<br>IFC ä¸­çš„ line box ä¸€èˆ¬å·¦å³éƒ½è´´ç´§æ•´ä¸ª IFCï¼Œä½†æ˜¯ä¼šå› ä¸º float å…ƒç´ è€Œæ‰°ä¹±ã€‚float å…ƒç´ ä¼šä½äº IFC ä¸ä¸ line box ä¹‹é—´ï¼Œä½¿å¾— line box å®½åº¦ç¼©çŸ­ã€‚ åŒä¸ª IFC ä¸‹çš„å¤šä¸ª line box é«˜åº¦ä¼šä¸åŒã€‚ IFC ä¸­æ—¶ä¸å¯èƒ½æœ‰å—çº§å…ƒç´ çš„ï¼Œå½“æ’å…¥å—çº§å…ƒç´ æ—¶ï¼ˆå¦‚pä¸­æ’å…¥divï¼‰ä¼šäº§ç”Ÿä¸¤ä¸ªåŒ¿åå—ä¸ div åˆ†éš”å¼€ï¼Œå³äº§ç”Ÿä¸¤ä¸ª IFCï¼Œæ¯ä¸ª IFC å¯¹å¤–è¡¨ç°ä¸ºå—çº§å…ƒç´ ï¼Œä¸ div å‚ç›´æ’åˆ—ã€‚</p><p>é‚£ä¹ˆIFCä¸€èˆ¬æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p><p>æ°´å¹³å±…ä¸­ï¼šå½“ä¸€ä¸ªå—è¦åœ¨ç¯å¢ƒä¸­æ°´å¹³å±…ä¸­æ—¶ï¼Œè®¾ç½®å…¶ä¸º inline-block åˆ™ä¼šåœ¨å¤–å±‚äº§ç”Ÿ IFCï¼Œé€šè¿‡ text-align åˆ™å¯ä»¥ä½¿å…¶æ°´å¹³å±…ä¸­ã€‚<br>å‚ç›´å±…ä¸­ï¼šåˆ›å»ºä¸€ä¸ª IFCï¼Œç”¨å…¶ä¸­ä¸€ä¸ªå…ƒç´ æ’‘å¼€çˆ¶å…ƒç´ çš„é«˜åº¦ï¼Œç„¶åè®¾ç½®å…¶ vertical-align:middleï¼Œå…¶ä»–è¡Œå†…å…ƒç´ åˆ™å¯ä»¥åœ¨æ­¤çˆ¶å…ƒç´ ä¸‹å‚ç›´å±…ä¸­ã€‚</p><h2 id="Whatâ€™s-GFC"><a href="#Whatâ€™s-GFC" class="headerlink" title="Whatâ€™s GFC"></a>Whatâ€™s GFC</h2><p>GFC å½“ä¸ºä¸€ä¸ªå…ƒç´ è®¾ç½® <code>display: grid</code> çš„æ—¶å€™ï¼Œæ­¤å…ƒç´ å°†ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ç½‘æ ¼å®¹å™¨ï¼ˆgrid containerï¼‰ä¸Šå®šä¹‰ç½‘æ ¼å®šä¹‰è¡Œï¼ˆgrid definition rowsï¼‰å’Œç½‘æ ¼å®šä¹‰åˆ—ï¼ˆgrid definition columnsï¼‰å±æ€§å„åœ¨ç½‘æ ¼é¡¹ç›®ï¼ˆgrid itemï¼‰ä¸Šå®šä¹‰ç½‘æ ¼è¡Œï¼ˆgrid rowï¼‰å’Œç½‘æ ¼åˆ—ï¼ˆgrid columnsï¼‰ä¸ºæ¯ä¸€ä¸ªç½‘æ ¼é¡¹ç›®ï¼ˆgrid itemï¼‰å®šä¹‰ä½ç½®å’Œç©ºé—´ã€‚ </p><p>é‚£ä¹ˆ GFC æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Œå’Œ table åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><p>é¦–å…ˆåŒæ ·æ˜¯ä¸€ä¸ªäºŒç»´çš„è¡¨æ ¼ï¼Œä½† GridLayout ä¼šæœ‰æ›´åŠ ä¸°å¯Œçš„å±æ€§æ¥æ§åˆ¶è¡Œåˆ—ï¼Œæ§åˆ¶å¯¹é½ä»¥åŠæ›´ä¸ºç²¾ç»†çš„æ¸²æŸ“è¯­ä¹‰å’Œæ§åˆ¶ã€‚</p><h2 id="Whatâ€™s-FFC"><a href="#Whatâ€™s-FFC" class="headerlink" title="Whatâ€™s FFC"></a>Whatâ€™s FFC</h2><p>Flex Box ç”±ä¼¸ç¼©å®¹å™¨å’Œä¼¸ç¼©é¡¹ç›®ç»„æˆã€‚é€šè¿‡è®¾ç½®å…ƒç´ çš„ <code>display: flex</code> æˆ– <code>inline-flex</code> å¯ä»¥å¾—åˆ°ä¸€ä¸ªä¼¸ç¼©å®¹å™¨ã€‚</p><p>è®¾ç½®ä¸º flex çš„å®¹å™¨è¢«æ¸²æŸ“ä¸ºä¸€ä¸ªå—çº§å…ƒç´ ï¼Œè€Œè®¾ç½®ä¸º inline-flex çš„å®¹å™¨åˆ™æ¸²æŸ“ä¸ºä¸€ä¸ªè¡Œå†…å…ƒç´ ã€‚</p><p>ä¼¸ç¼©å®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªå­å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªä¼¸ç¼©é¡¹ç›®ã€‚ä¼¸ç¼©é¡¹ç›®å¯ä»¥æ˜¯ä»»æ„æ•°é‡çš„ã€‚ä¼¸ç¼©å®¹å™¨å¤–å’Œä¼¸ç¼©é¡¹ç›®å†…çš„ä¸€åˆ‡å…ƒç´ éƒ½ä¸å—å½±å“ã€‚ç®€å•åœ°è¯´ï¼ŒFlexbox å®šä¹‰äº†ä¼¸ç¼©å®¹å™¨å†…ä¼¸ç¼©é¡¹ç›®è¯¥å¦‚ä½•å¸ƒå±€ã€‚</p><hr><p>å‚è€ƒæ–‡ç« ï¼š<a href="http://www.cnblogs.com/lhb25/p/inside-block-formatting-ontext.html" target="_blank" rel="noopener">å‰ç«¯ç²¾é€‰æ–‡æ‘˜ï¼šBFC ç¥å¥‡èƒŒåçš„åŸç†</a></p></div>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
          <category> BFC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>React diff ç®—æ³•</title>
      <link href="/2018/06/21/%E7%AE%97%E6%B3%95/React-diff-%E7%AE%97%E6%B3%95/"/>
      <url>/2018/06/21/%E7%AE%97%E6%B3%95/React-diff-%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<h1 id="React-diff-ç®—æ³•æµ…æ"><a href="#React-diff-ç®—æ³•æµ…æ" class="headerlink" title="React diff ç®—æ³•æµ…æ"></a>React diff ç®—æ³•æµ…æ</h1><p>ä¹‹å‰åœ¨<a href="https://hongxuwei.github.io/2018/05/22/%E5%89%8D%E7%AB%AF/React-1/">å­¦ä¹  <em>React</em> </a>çš„æ—¶å€™äº†è§£åˆ° React çš„ diff ç®—æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°æœ€å°åŒ–çš„ DOM æ“ä½œã€‚</p><p>ä»Šå¤©æˆ‘ä»¬æ¥çœ‹çœ‹ React çš„ diff ç®—æ³•çš„å¤„ç†æ–¹å¼ã€‚</p><h2 id="ä¼ ç»Ÿçš„-diff-ç®—æ³•"><a href="#ä¼ ç»Ÿçš„-diff-ç®—æ³•" class="headerlink" title="ä¼ ç»Ÿçš„ diff ç®—æ³•"></a>ä¼ ç»Ÿçš„ diff ç®—æ³•</h2><p>ä¼ ç»Ÿçš„ diff ç®—æ³•é€šè¿‡å¾ªç¯é€’å½’å¯¹èŠ‚ç‚¹ä¸€æ¬¡å¯¹æ¯”ï¼Œæ•ˆç‡å¾ˆä½ï¼Œå¤æ‚åº¦è¾¾åˆ° O(n<sup>3</sup>), å…¶ä¸­ n æ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ€»æ•°ã€‚è¿™æ„å‘³ç€å¦‚æœè¦å±•ç¤º 1000 ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è¦è®¡ç®—ä¸Šåäº¿æ¬¡ã€‚è€ŒçœŸå®çš„é¡µé¢ä¸­èŠ‚ç‚¹çš„æ•°é‡æ˜¯ä¸å¯çŸ¥çš„ã€‚æ‰€ä»¥å¦‚æœä½¿ç”¨ä¼ ç»Ÿçš„ diff ç®—æ³•ä»£ä»·å¤ªé«˜äº†ã€‚</p><h2 id="React-çš„-diff-ç®—æ³•ã€‚"><a href="#React-çš„-diff-ç®—æ³•ã€‚" class="headerlink" title="React çš„ diff ç®—æ³•ã€‚"></a>React çš„ diff ç®—æ³•ã€‚</h2><p>ä¼ ç»Ÿ diff ç®—æ³•çš„å¤æ‚åº¦ä¸º O(n<sup>3</sup>)ï¼Œè€Œ React é€šè¿‡å¯¹äºå‰ç«¯é¡µé¢ç»“æ„çš„ç†è§£ï¼Œå®šåˆ¶äº†ç‰¹æ®Šçš„ç­–ç•¥ï¼Œå°†å¤æ‚åº¦è½¬åŒ–æˆ O(n)ã€‚</p><h3 id="diff-ç­–ç•¥"><a href="#diff-ç­–ç•¥" class="headerlink" title="diff ç­–ç•¥"></a>diff ç­–ç•¥</h3><p>Facebook çš„å·¥ç¨‹å¸ˆåŸºäºç°å®ä¸­å‰ç«¯å¼€å‘çš„ç»éªŒåˆ¶å®šäº†ä»¥ä¸‹3æ¡ç­–ç•¥</p><ol><li>åŒçº§æ¯”è¾ƒ</li><li>åŒç»„ä»¶æ¯”è¾ƒ</li><li>å­å…ƒç´ æ¯”è¾ƒ</li></ol><h4 id="1-åŒçº§æ¯”è¾ƒ"><a href="#1-åŒçº§æ¯”è¾ƒ" class="headerlink" title="1. åŒçº§æ¯”è¾ƒ"></a>1. åŒçº§æ¯”è¾ƒ</h4><p>å¯¹äºä¸¤ä¸ª DOM tree åªæ¯”è¾ƒåŒä¸€å±‚æ¬¡çš„èŠ‚ç‚¹ï¼Œå¿½ç•¥ DOM ä¸­èŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œã€‚å½“å‘ç°èŠ‚ç‚¹å·²ç»ä¸å­˜åœ¨ï¼Œåˆ™è¯¥èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹ä¼šè¢«å®Œå…¨åˆ é™¤æ‰ï¼Œä¸ä¼šç”¨äºè¿›ä¸€æ­¥çš„æ¯”è¾ƒã€‚è¿™æ ·åªéœ€è¦å¯¹æ ‘è¿›è¡Œä¸€æ¬¡éå†ï¼Œä¾¿èƒ½å®Œæˆæ•´ä¸ª DOM æ ‘çš„æ¯”è¾ƒã€‚</p><p class="center"><img src="/2018/06/21/ç®—æ³•/React-diff-ç®—æ³•/levelByLevel.png" alt="åŒçº§æ¯”è¾ƒ"></p><p><em>Note: ä¿è¯ç¨³å®šçš„ DOM ç»“æ„æœ‰åˆ©äºæå‡æ€§èƒ½ï¼Œå°½é‡ä¸å»ä¿®æ”¹æ ‡ç­¾ç±»å‹ã€‚</em></p><h4 id="2-åŒç»„ä»¶æ¯”è¾ƒ"><a href="#2-åŒç»„ä»¶æ¯”è¾ƒ" class="headerlink" title="2. åŒç»„ä»¶æ¯”è¾ƒ"></a>2. åŒç»„ä»¶æ¯”è¾ƒ</h4><p>diff ç®—æ³•å½“é‡åˆ°ç»„ä»¶å˜åŒ–æ—¶ï¼Œä¸ä¼šæ¯”è¾ƒä¸¤ä¸ªç»„ä»¶çš„ä¸åŒï¼Œå› ä¸ºè¿™ç§æ¯”è¾ƒå‡ ä¹æ²¡æœ‰æ„ä¹‰ã€‚</p><p class="center"><img src="/2018/06/21/ç®—æ³•/React-diff-ç®—æ³•/componentDiff.png" alt="åŒç»„ä»¶æ¯”è¾ƒ"></p><p><em>Note: å¯¹äºåŒä¸€ç±»å‹ç»„ä»¶åˆç†ä½¿ç”¨ <code>shouldComponentUpdate()</code>ï¼Œåº”è¯¥é¿å…ç»“æ„ç›¸åŒç±»å‹ä¸åŒçš„ç»„ä»¶ã€‚</em></p><h4 id="3-å­å…ƒç´ æ¯”è¾ƒ"><a href="#3-å­å…ƒç´ æ¯”è¾ƒ" class="headerlink" title="3. å­å…ƒç´ æ¯”è¾ƒ"></a>3. å­å…ƒç´ æ¯”è¾ƒ</h4><p>å½“èŠ‚ç‚¹å¤„äºåŒä¸€å±‚çº§æ—¶ï¼ŒReact diff æä¾›äº†ä¸‰ç§èŠ‚ç‚¹æ“ä½œï¼Œåˆ†åˆ«æ˜¯ <code>INSERT_MARKUP</code>ã€<code>MOVE_EXISTING</code>ã€<code>REMOVE_NODE</code>ã€‚</p><ul><li><code>INSERT_MARKUP</code>ï¼Œæ–°çš„ component ç±»å‹ä¸åœ¨è€é›†åˆé‡Œï¼Œ å³æ˜¯å…¨æ–°çš„èŠ‚ç‚¹ï¼Œéœ€è¦å¯¹æ–°èŠ‚ç‚¹æ‰§è¡Œæ’å…¥æ“ä½œã€‚</li><li><code>MOVE_EXISTING</code>ï¼Œåœ¨è€é›†åˆæœ‰æ–° component ç±»å‹ï¼Œä¸” element æ˜¯å¯æ›´æ–°çš„ç±»å‹å°±éœ€è¦åšç§»åŠ¨æ“ä½œï¼Œå¯ä»¥å¤ç”¨ä»¥å‰çš„ DOM èŠ‚ç‚¹ã€‚</li><li><code>REMOVE_NODE</code>ï¼Œè€ component ç±»å‹ï¼Œåœ¨æ–°é›†åˆé‡Œä¹Ÿæœ‰ï¼Œä½†å¯¹åº”çš„ element ä¸åŒåˆ™ä¸èƒ½ç›´æ¥å¤ç”¨å’Œæ›´æ–°ï¼Œéœ€è¦æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œæˆ–è€…è€ component ä¸åœ¨æ–°é›†åˆé‡Œçš„ï¼Œä¹Ÿéœ€è¦æ‰§è¡Œåˆ é™¤æ“ä½œã€‚</li></ul><p>é€šå¸¸æƒ…å†µä¸‹ diff åœ¨æ¯”è¾ƒé›†åˆ <code>[A, B, C, D]</code> å’Œ <code>[D, A, B,C]</code> æ—¶ï¼Œä¼šæŒ‰ä½ç½®é€ä¸ªå¯¹æ¯”ï¼Œå‘ç°æ¯ä¸ªä½ç½®çš„å…ƒç´ éƒ½æœ‰æ›´æ–°ï¼Œå°±æŠŠæ—§é›†åˆå…¨éƒ¨ç§»é™¤æ›¿æ¢æˆæ–°çš„é›†åˆã€‚è¿™ç§æ¯”è¾ƒæ˜¯ä¸åˆç†çš„ï¼Œåˆç†çš„æ–¹å¼æ˜¯å¤ç”¨ <code>A</code>ï¼Œ<code>B</code>ï¼Œ<code>C</code> è€Œå°†æœ«å°¾çš„ <code>D</code> ç§»åŠ¨åˆ°é›†åˆæœ€å‰é¢ã€‚</p><p>Reactå¯¹è¿™ä¸€ç°è±¡åšå‡ºäº†ä¸€ä¸ªé«˜æ•ˆçš„ç­–ç•¥ï¼šå…è®¸å¼€å‘è€…å¯¹åŒä¸€å±‚çº§çš„åŒç»„å­èŠ‚ç‚¹æ·»åŠ å”¯ä¸€keyå€¼è¿›è¡ŒåŒºåˆ†ã€‚</p><p class="center"><img src="/2018/06/21/ç®—æ³•/React-diff-ç®—æ³•/elementDiff.png" alt="å­å…ƒç´ æ¯”è¾ƒ"></p><p><em>Note: åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŒå±‚çº§çš„èŠ‚ç‚¹æ·»åŠ å”¯ä¸€keyå€¼å¯ä»¥æå¤§æå‡æ€§èƒ½ï¼Œå°½é‡å‡å°‘å°†æœ€åä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°åˆ—è¡¨é¦–éƒ¨çš„æ“ä½œï¼Œå½“èŠ‚ç‚¹è¾¾åˆ°ä¸€å®šçš„æ•°é‡ä»¥åæˆ–è€…æ“ä½œè¿‡äºé¢‘ç¹ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šå½±å“Reactçš„æ¸²æŸ“æ€§èƒ½ã€‚</em></p><p><strong>React é€šè¿‡ä¸Šé¢3ç§ç­–ç•¥å°†åŸæœ¬ O(n<sup>3</sup>) çš„ç®—æ³•å¤æ‚åº¦é™ä½åˆ° O(n)</strong></p><h3 id="äº‹ä»¶ä»£ç†"><a href="#äº‹ä»¶ä»£ç†" class="headerlink" title="äº‹ä»¶ä»£ç†"></a>äº‹ä»¶ä»£ç†</h3><p>æŠŠäº‹ä»¶ç»‘åˆ° DOM èŠ‚ç‚¹å¾ˆæ…¢ï¼Œæ¶ˆè€—å†…å­˜ã€‚è€Œ React é‡‡ç”¨æ›´å¥½çš„æŠ€æœ¯ç§°ä¹‹ä¸ºâ€œäº‹ä»¶ä»£ç†â€ã€‚React èµ°çš„æ›´è¿œï¼Œé‡‡ç”¨ W3C å…¼å®¹çš„äº‹ä»¶ç³»ç»Ÿã€‚è¿™æ„å‘³ç€ IE8 çš„äº‹ä»¶æ“ä½œ Bugs å·²ç»æˆä¸ºè¿‡å»ã€‚æ‰€æœ‰çš„äº‹ä»¶åœ¨ä¸åŒæµè§ˆå™¨ä¸­æ˜¯ä¸€è‡´çš„ã€‚<br>React å¹¶ä¸ä¼šçœŸæ­£çš„ç»‘å®šäº‹ä»¶åˆ°æ¯ä¸€ä¸ªå…·ä½“çš„å…ƒç´ ä¸Šï¼Œè€Œæ˜¯é‡‡ç”¨äº‹ä»¶ä»£ç†çš„æ¨¡å¼ï¼šåœ¨æ ¹èŠ‚ç‚¹documentä¸Šä¸ºæ¯ç§äº‹ä»¶æ·»åŠ å”¯ä¸€çš„ Listenerï¼Œç„¶åé€šè¿‡äº‹ä»¶çš„ target æ‰¾åˆ°çœŸå®çš„è§¦å‘å…ƒç´ ã€‚è¿™æ ·ä»è§¦å‘å…ƒç´ åˆ°é¡¶å±‚èŠ‚ç‚¹ä¹‹é—´çš„æ‰€æœ‰èŠ‚ç‚¹å¦‚æœæœ‰ç»‘å®šè¿™ä¸ªäº‹ä»¶ï¼ŒReact éƒ½ä¼šè§¦å‘å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><h3 id="æ¸²æŸ“ï¼ˆæ‰¹é‡å¤„ç†ï¼‰"><a href="#æ¸²æŸ“ï¼ˆæ‰¹é‡å¤„ç†ï¼‰" class="headerlink" title="æ¸²æŸ“ï¼ˆæ‰¹é‡å¤„ç†ï¼‰"></a>æ¸²æŸ“ï¼ˆæ‰¹é‡å¤„ç†ï¼‰</h3><p>å½“åœ¨ç»„ä»¶ä¸­è°ƒç”¨äº† <code>setState</code>, React è®²å§è¿™ä¸ªç»„ä»¶æ ‡è®°ä¸º dirtyï¼Œåœ¨æ—¶é—´å¾ªç¯ç»“æŸåï¼ŒReact ä¼šæ‰¾åˆ°æ‰€æœ‰è¢«æ ‡è®°çš„ç»„ä»¶å¹¶ç»Ÿä¸€æ¸²æŸ“ä»–ä»¬ã€‚è€Œä¸æ˜¯æ¯æ¬¡è°ƒç”¨ <code>setState</code> éƒ½å»é‡æ–°æ¸²æŸ“ã€‚</p><p class="center"><img src="/2018/06/21/ç®—æ³•/React-diff-ç®—æ³•/dirty.png" alt="æ‰¹é‡æ¸²æŸ“"></p><h4 id="å­æ ‘æ¸²æŸ“"><a href="#å­æ ‘æ¸²æŸ“" class="headerlink" title="å­æ ‘æ¸²æŸ“"></a>å­æ ‘æ¸²æŸ“</h4><p>å½“ <code>setState</code> è°ƒç”¨æ—¶ï¼Œç»„ä»¶ä¼šé‡æ–° build å…¶å­è™šæ‹Ÿ DOMã€‚å¦‚æœä½ åœ¨æ ¹èŠ‚ç‚¹ä¸Šè°ƒç”¨ <code>setState</code>ï¼Œé‚£ä¹ˆæ•´ä¸ªåº”ç”¨éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œæ‰€æœ‰çš„ç»„ä»¶ï¼Œå³ä½¿å®ƒæ²¡æœ‰æ”¹å˜ä¹Ÿä¼šè°ƒç”¨å®ƒçš„ render æ–¹æ³•ã€‚è¿™å¬èµ·æ¥å¾ˆä½æ•ˆï¼Œä½†å®é™…ä¸­ï¼Œå®ƒå·¥ä½œå¾ˆå¥½åº”ä¸ºæˆ‘ä»¬æ²¡æœ‰æ“ä½œå®é™…çš„ DOMã€‚<br>é¦–å…ˆï¼Œæˆ‘ä»¬è°ˆè®ºçš„æ˜¯æ˜¾ç¤ºç”¨æˆ·ç•Œé¢ã€‚åº”ä¸ºå±å¹•ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œé€šå¸¸æˆ‘ä»¬åªä¼šåŒæ—¶æ˜¾ç¤ºå‡ ç™¾åˆ°ä¸Šåƒä¸ª elementsã€‚Javascript æœ‰è¶³å¤Ÿå¿«çš„ä¸šåŠ¡é€»è¾‘ç®¡ç†æ•´ä¸ªç•Œé¢ã€‚<br>å¦ä¸€ä¸ªå¾ˆé‡è¦çš„æ˜¯ï¼Œå½“ä½ å†™ React ä»£ç æ—¶ï¼Œä¸è¦ä¸€å‡ºç°å˜åŒ–å°±åœ¨æ ¹èŠ‚ç‚¹ä¸Šè°ƒç”¨ <code>setState</code> æ–¹æ³•ã€‚ä½ åº”è¯¥åœ¨æ¥æ”¶å˜åŒ–äº‹ä»¶çš„ç»„ä»¶æˆ–å…¶ä¸Šé¢çš„ç»„ä»¶ä¸Šè°ƒç”¨ <code>setState</code>ï¼Œä½ åº”è¯¥æå°‘çš„åœ¨ä¸Šå±‚ä¸­è°ƒã€‚è¿™æ„å‘³ç€å˜åŒ–åªä¼šåœ¨ç”¨æˆ·äº¤äº’çš„åœ°æ–¹ã€‚</p><p class="center"><img src="/2018/06/21/ç®—æ³•/React-diff-ç®—æ³•/rerender.png" alt="å­æ ‘æ¸²æŸ“"></p><h4 id="æœ‰é€‰æ‹©çš„æ¸²æŸ“"><a href="#æœ‰é€‰æ‹©çš„æ¸²æŸ“" class="headerlink" title="æœ‰é€‰æ‹©çš„æ¸²æŸ“"></a>æœ‰é€‰æ‹©çš„æ¸²æŸ“</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•é€‰æ‹©å­æ ‘æ˜¯å¦æ¸²æŸ“ï¼š</p><pre><code class="JavaScript">boolean shouldComponentUpdate(object nextProps, object nextState)</code></pre><p>é€šè¿‡åˆ¤æ–­å…ˆå‰ç»„ä»¶å’Œä¸‹ä¸€ä¸ªç»„ä»¶çš„å±æ€§/çŠ¶æ€ï¼Œä½ èƒ½å¤Ÿå‘Šè¯‰ React è¿™ä¸ªç»„ä»¶æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ã€‚å½“åˆé€‚çš„å¤„ç†è¿™å°†ä¼šæ˜¾è‘—æé«˜æ€§èƒ½ã€‚<br>ä¸ºäº†ä½¿ç”¨å®ƒï¼Œä½ å¿…é¡»èƒ½æ¯”è¾ƒå¯¹è±¡çš„å·®å¼‚ï¼Œè¿™é‡Œå°±ç‰µæ‰¯åˆ°ä¸€äº›é—®é¢˜ï¼Œå¦‚æ˜¯å¦åº”è¯¥æ·±åº¦æ¯”è¾ƒï¼Œå¦‚æœæ·±åº¦æ¯”è¾ƒï¼Œæˆ‘ä¹ˆæ˜¯å¦åº”è¯¥å›ºå®šæ•°æ®çš„ç»“æ„ï¼Œæˆ–æ˜¯åšæ·±åº¦æ‹·è´ã€‚<br>è€Œä¸”ä½ åº”è¯¥è®°ä½ï¼Œè¿™ä¸ªå‡½æ•°æ€»ä¼šè¢«è°ƒç”¨ï¼Œæ‰€ä»¥ä½ è¦ç¡®ä¿è‡ªå·±å†™çš„å‡½æ•°çš„è°ƒç”¨æ—¶é—´è¦æ¯”é»˜è®¤çš„å¯å‘å¼æ¯”è¾ƒçš„æ—¶é—´å°‘ã€‚</p><p class="center"><img src="/2018/06/21/ç®—æ³•/React-diff-ç®—æ³•/shouldUpdate.png" alt="æœ‰é€‰æ‹©çš„æ¸²æŸ“"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol><li>é€šè¿‡diffç­–ç•¥ï¼Œå°†ç®—æ³•ä»O(n^3)ç®€åŒ–ä¸ºO(n)</li><li>åˆ†å±‚æ±‚å¼‚ï¼Œå¯¹tree diffè¿›è¡Œä¼˜åŒ–</li><li>åˆ†ç»„ä»¶æ±‚å¼‚ï¼Œç›¸åŒç±»ç”Ÿæˆç›¸ä¼¼æ ‘å½¢ç»“æ„ã€ä¸åŒç±»ç”Ÿæˆä¸åŒæ ‘å½¢ç»“æ„ï¼Œå¯¹component diffè¿›è¡Œä¼˜åŒ–</li><li>è®¾ç½®keyï¼Œå¯¹element diffè¿›è¡Œä¼˜åŒ–</li><li>å°½é‡ä¿æŒç¨³å®šçš„DOMç»“æ„ã€é¿å…å°†æœ€åä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°åˆ—è¡¨é¦–éƒ¨ã€é¿å…èŠ‚ç‚¹æ•°é‡è¿‡å¤§æˆ–æ›´æ–°è¿‡äºé¢‘ç¹</li></ol>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Q&amp;A </tag>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>LeetCode1</title>
      <link href="/2018/06/19/%E7%AE%97%E6%B3%95/LeetCode1/"/>
      <url>/2018/06/19/%E7%AE%97%E6%B3%95/LeetCode1/</url>
      <content type="html"><![CDATA[<h1 id="LeetCode-ç®—æ³•é¢˜ï¼ˆç¬¬ä¸€å¼¹ï¼‰"><a href="#LeetCode-ç®—æ³•é¢˜ï¼ˆç¬¬ä¸€å¼¹ï¼‰" class="headerlink" title="LeetCode ç®—æ³•é¢˜ï¼ˆç¬¬ä¸€å¼¹ï¼‰"></a>LeetCode ç®—æ³•é¢˜ï¼ˆç¬¬ä¸€å¼¹ï¼‰</h1><p>ä¹‹å‰å°ä¼™ä¼´é¢è¯•é‡è¿‡è¿™ä¸ª<a href="https://hongxuwei.github.io/2018/06/12/%E5%85%A8%E6%8E%92%E5%88%97%E9%97%AE%E9%A2%98/">ç®—æ³•é¢˜</a>ã€‚ è®©æˆ‘æƒ³åˆ°äº†ä¸€å¥è¯</p><blockquote><p>å‰ç«¯ç¨‹åºå‘˜ï¼Œé¦–å…ˆä¹Ÿè¦æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ã€‚</p></blockquote><p>ä¸€ç›´ä»¥æ¥éƒ½åœ¨çœ‹ä¸€äº›å·¥ä½œå½“ä¸­è¦ç”¨åˆ°çš„çŸ¥è¯†ï¼Œåè€Œå¿½è§†äº†ç¨‹åºå‘˜åº”è¯¥å…·å¤‡çš„ä¸€äº›åŸºæœ¬ç´ è´¨ã€‚ç”±äºæ˜¯éç§‘ç­å‡ºèº«ï¼ŒåŸºç¡€åè€Œè–„å¼±ï¼Œä¹‹å‰æœ‰çœ‹ç¼–è¯‘åŸç†ï¼Œä½†æ˜¯è™çš„æˆ‘å¥½éš¾å•Šï¼Œç­‰æˆ‘æœ‰æ‰€ç†è§£å†æ¥å¼€æ–°å‘ã€‚</p><p>æˆ‘è‡ªå·±é¢è¯•çš„æ—¶å€™ä¹Ÿä¼šæœ‰é‡åˆ°ç®—æ³•é¢˜ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ³å‡ºçš„éƒ½æ˜¯å¸¸è§„çš„æš´åŠ›è§£æ³•ï¼Œä¼˜åŒ–çš„è§£æ³•ä¸€æ—¶ä¹Ÿæƒ³ä¸å‡ºï¼Œç¼–ç¨‹å°±åƒæ˜¯åšæ•°å­¦åº”ç”¨é¢˜ä¸€æ ·ï¼Œè¦å¤šç»ƒæ‰æœ‰æ€è·¯ï¼Œæ‰€ä»¥æ‰“ç®—æ¯å¤©åšä¸€ç‚¹ç‚¹ç®—æ³•é¢˜ã€‚</p><h2 id="1ä¸¤æ•°ä¹‹å’Œ"><a href="#1ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="#1ä¸¤æ•°ä¹‹å’Œ"></a>#1ä¸¤æ•°ä¹‹å’Œ</h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•°ã€‚</p><p>ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”ä¸€ç§ç­”æ¡ˆï¼Œä¸”åŒæ ·çš„å…ƒç´ ä¸èƒ½è¢«é‡å¤åˆ©ç”¨ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><blockquote><p>ç»™å®š nums = [2, 7, 11, 15], target = 9<br>å› ä¸º nums[0] + nums[1] = 2 + 7 = 9<br>æ‰€ä»¥è¿”å› [0, 1]</p></blockquote><h3 id="è§£æ³•ä¸€ï¼šæš´åŠ›æ³•"><a href="#è§£æ³•ä¸€ï¼šæš´åŠ›æ³•" class="headerlink" title="è§£æ³•ä¸€ï¼šæš´åŠ›æ³•"></a>è§£æ³•ä¸€ï¼šæš´åŠ›æ³•</h3><p>æš´åŠ›æ³•å¾ˆç®€å•ã€‚éå†æ¯ä¸ªå…ƒç´  <code>x</code>ï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå€¼ä¸ <code>target - x</code> ç›¸ç­‰çš„ç›®æ ‡å…ƒç´ ã€‚</p><p><em>Note: ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªå‘å°±æ˜¯å½“è¾“å…¥æ˜¯ <code>nums = [3, 4, 5, 4], target = 8</code> çš„æ—¶å€™è¦æ³¨æ„ <code>x</code> å’Œ <code>target - x</code> çš„å€¼éƒ½æ˜¯ <code>4</code>ï¼Œè¾“å‡ºè¦è¿‡æ»¤æ‰ç¬¬äºŒæ¬¡æŸ¥æ‰¾åˆ°çš„æ˜¯ <code>x</code> æœ¬èº«ã€‚</em></p><pre><code class="JavaScript">/** * @param {number[]} nums * @param {number} target * @return {number[]} */var twoSum = function(nums, target) {    const len = nums.length;    for (let i = 0 ; i &lt; len; i++) {        let index = nums.indexOf(target - nums[i]);        if(index &gt; -1 &amp;&amp; index !== i) {            return [i, index];        }    }};</code></pre><h3 id="è§£æ³•äºŒï¼š-å“ˆå¸Œè¡¨æ³•"><a href="#è§£æ³•äºŒï¼š-å“ˆå¸Œè¡¨æ³•" class="headerlink" title="è§£æ³•äºŒï¼š å“ˆå¸Œè¡¨æ³•"></a>è§£æ³•äºŒï¼š å“ˆå¸Œè¡¨æ³•</h3><p>ä»å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ çš„æŸ¥æ‰¾æ—¶é—´å¯ä»¥è¿‘ä¼¼ä¸º <code>O(1)</code><sup><a href="#qa1">[1]</a></sup>ã€‚å“ˆå¸Œè¡¨å®ƒæ”¯æŒä»¥è¿‘ä¼¼æ’å®šçš„æ—¶é—´è¿›è¡Œå¿«é€ŸæŸ¥æ‰¾ã€‚ç”¨â€œè¿‘ä¼¼â€æ¥æè¿°ï¼Œæ˜¯å› ä¸ºä¸€æ—¦å‡ºç°å†²çªï¼ŒæŸ¥æ‰¾ç”¨æ—¶å¯èƒ½ä¼šé€€åŒ–åˆ° <code>O(n)</code>ã€‚ä½†åªè¦ä»”ç»†åœ°æŒ‘é€‰å“ˆå¸Œå‡½æ•°ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾çš„ç”¨æ—¶åº”å½“è¢«æ‘Šé”€ä¸º <code>O(1)</code>ã€‚æ‰€ä»¥å¯ä»¥ä»¥ç©ºé—´æ¢å–æ—¶é—´çš„æ–¹å¼ä¼˜åŒ–è¿è¡Œæ—¶é—´ã€‚</p><p>ç”¨å“ˆå¸Œè¡¨ä¿å­˜æ•°ç»„ä¸­çš„ç›®æ ‡å…ƒç´ å’Œç´¢å¼•ï¼Œå¦‚æœå­˜åœ¨ç›®æ ‡å…ƒç´ ï¼Œæ‰¾åˆ°ä»–çš„ç´¢å¼•å°±å¯ä»¥äº†ã€‚å½“ç„¶è¯´çš„è¿™ä¹ˆç„ä¹ï¼Œå“ˆå¸Œè¡¨å…¶å®å°±æ˜¯JavaScriptä¸­å¯¹è±¡çš„å­˜å‚¨æ–¹å¼ã€‚æ‰€ä»¥JSçš„å®ç°å°±æ¯”è¾ƒç®€å•å•¦ã€‚</p><pre><code class="JavaScript">/** * @param {number[]} nums * @param {number} target * @return {number[]} */var twoSum = function(nums, target) {    let hash = {};    let num, pair;    const len = nums.length;    for(let i = 0; i &lt; len; i++) {        num = nums[i];        pair = target - num;        if ( hash.hasOwnProperty(pair) ) {            return [hash[pair], i];        }        hash[num] = i;    }};</code></pre><h2 id="2-ä¸¤æ•°ç›¸åŠ "><a href="#2-ä¸¤æ•°ç›¸åŠ " class="headerlink" title="#2 ä¸¤æ•°ç›¸åŠ "></a>#2 ä¸¤æ•°ç›¸åŠ </h2><p>ç»™å®šä¸¤ä¸ªéç©ºé“¾è¡¨æ¥è¡¨ç¤ºä¸¤ä¸ªéè´Ÿæ•´æ•°ã€‚ä½æ•°æŒ‰ç…§é€†åºæ–¹å¼å­˜å‚¨ï¼Œå®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨å•ä¸ªæ•°å­—ã€‚å°†ä¸¤æ•°ç›¸åŠ è¿”å›ä¸€ä¸ªæ–°çš„é“¾è¡¨ã€‚</p><p>ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°å­—éƒ½ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><blockquote><p><strong>è¾“å…¥ï¼š</strong>(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br><strong>è¾“å‡ºï¼š</strong>7 -&gt; 0 -&gt; 8<br><strong>åŸå› ï¼š</strong>342 + 465 = 807</p></blockquote><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>åŒæ—¶éå†ä¸¤æ¡é“¾è¡¨ï¼Œç›¸åŒæƒé‡çš„æ¯ä¸€ä½ç›¸åŠ ï¼Œè¶…è¿‡9å°±æ·»åŠ è¿›ä½ï¼Œéå†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ—¶å°†è¿›ä½åŠ å…¥ä¸‹ä¸€ä½ã€‚</p><p>è¿™é¢˜çš„è§£æ³•æˆ‘ç›®å‰ä¹Ÿå°±åªæƒ³åˆ°è¿™ç‚¹ã€‚è¦æ³¨æ„å› ä¸ºèŠ‚ç‚¹é•¿åº¦ä¸åŒå¯èƒ½ä¼šå¯¼è‡´éå†æ—¶éœ€è¦åˆ¤æ–­æ˜¯å¦æŸæ¡é“¾è¡¨å·²ç»ç»“æŸï¼Œå¦‚æœç»“æŸé‚£è¿™æ¡é“¾è¡¨çš„è¿™ä¸€ä½éœ€è¦ç½®0ã€‚</p><pre><code class="JavaScript">/** * Definition for singly-linked list. * function ListNode(val) { *     this.val = val; *     this.next = null; * } *//** * @param {ListNode} l1 * @param {ListNode} l2 * @return {ListNode} */var addTwoNumbers = function(l1, l2) {    let carry = 0;    let result;    let list;    while (l1 || l2) {        const val1 = l1 ? l1.val : 0;        const val2 = l2 ? l2.val : 0;        l1 = l1 &amp;&amp; l1.next;        l2 = l2 &amp;&amp; l2.next;        const val = val1 + val2 + carry;        carry = val &gt; 9 ? 1 : 0;        const node = new ListNode(val % 10);        if (list) {            list.next = node;        }        list = node;        result = result || list;    }    if (carry) {        list.next = {            val: 1,            next: null,        };    }    return result;};</code></pre><h2 id="3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a href="#3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²" class="headerlink" title="#3 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a>#3 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºä¸å«æœ‰é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„é•¿åº¦ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><blockquote><p>ç»™å®š <code>&quot;abcabcbb&quot;</code> ï¼Œæ²¡æœ‰é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ <code>&quot;abc&quot;</code> ï¼Œé‚£ä¹ˆé•¿åº¦å°±æ˜¯3ã€‚<br>ç»™å®š <code>&quot;bbbbb&quot;</code> ï¼Œæœ€é•¿çš„å­ä¸²å°±æ˜¯ <code>&quot;b&quot;</code> ï¼Œé•¿åº¦æ˜¯1ã€‚<br>ç»™å®š <code>&quot;pwwkew&quot;</code> ï¼Œæœ€é•¿å­ä¸²æ˜¯ <code>&quot;wke&quot;</code> ï¼Œé•¿åº¦æ˜¯3ã€‚è¯·æ³¨æ„ç­”æ¡ˆå¿…é¡»æ˜¯ä¸€ä¸ªå­ä¸²ï¼Œ<code>&quot;pwke&quot;</code> æ˜¯ å­åºåˆ—  è€Œä¸æ˜¯å­ä¸²ã€‚</p></blockquote><h3 id="è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•"><a href="#è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•" class="headerlink" title="è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•"></a>è§£æ³•ä¸€ï¼šæš´åŠ›è§£æ³•</h3><p>æˆ‘çš„æ€è·¯æ˜¯ï¼Œä»æŸä¸€ä½ <code>start</code> å¼€å§‹éå†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œä¹‹åå†éå† <code>start</code> ä¹‹åçš„å­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°ç¬¬ä¸€æ¬¡é‡å¤çš„ä½ç½®ï¼Œæ­¤æ¬¡å¾ªç¯ç»“æŸã€‚</p><p>ä¹Ÿå°±æ˜¯æ‰¾åˆ°è¿™ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰ä¸é‡å¤å­å­—ç¬¦ä¸²ã€‚</p><p>æ¯”å¦‚ <code>aabca</code>ï¼Œ å¾ªç¯ä¾æ¬¡æ‰¾åˆ° <code>a</code> <code>abc</code> <code>bca</code> <code>ca</code> <code>a</code>ã€‚</p><p>è¿™é‡Œæˆ‘ç¬¬ä¸€ä¸ªå¾ªç¯å¹¶ä¸æ˜¯åˆ°å­—ç¬¦ä¸²çš„æœ€åï¼Œè€Œæ˜¯åˆ°æ€»å­—ç¬¦ä¸²é•¿åº¦å‡å»ç›®å‰å·²çŸ¥çš„æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ã€‚è¿™æ ·å¯ä»¥å‡å°‘ä¸€äº›å¤šä½™çš„æŸ¥è¯¢ã€‚ï¼ˆä½†æ˜¯ä¾ç„¶å¾ˆæ…¢å“ˆå“ˆå“ˆï¼‰</p><p>å¾ªç¯ <code>aabca</code> åªä¼šæ‰§è¡Œä¸¤æ¬¡ å½“æ‰¾åˆ° <code>abc</code> åï¼Œ <code>ret = 3</code>ï¼Œåç»­çš„æŸ¥æ‰¾æ˜¯æ— æ„ä¹‰çš„ï¼Œæ‰€ä»¥åœæ­¢å¹¶è¿”å›å€¼ã€‚</p><pre><code class="JavaScript">/** * @param {string} s * @return {number} */var lengthOfLongestSubstring = function(s) {    let cache = [];    const len = s.length;    var ret = 0;    for(let start = 0; start &lt; len - ret; start++) {        for(let j = start; j &lt; len; j++) {            if(cache.indexOf(s[j]) &gt; -1) {                break;            }            cache.push(s[j]);        }        ret = ret &gt; cache.length ? ret : cache.length;        cache = [];    }    return ret;};</code></pre><h3 id="è§£æ³•äºŒï¼šæ»‘åŠ¨çª—å£æ³•"><a href="#è§£æ³•äºŒï¼šæ»‘åŠ¨çª—å£æ³•" class="headerlink" title="è§£æ³•äºŒï¼šæ»‘åŠ¨çª—å£æ³•"></a>è§£æ³•äºŒï¼šæ»‘åŠ¨çª—å£æ³•</h3><p>è¿™ç§è§£æ³•å°±æ¯”è¾ƒæœ‰æ„æ€äº†ã€‚</p><p>æ€è·¯å°±æ˜¯ï¼šå®šä¹‰ä¸€ä¸ªçª—å£ï¼Œè®¾å®šçª—å£çš„èµ·å§‹ä½ç½®ã€‚å‘åæŸ¥æ‰¾å­—ç¬¦ï¼Œå¦‚æœé‡åˆ°é‡å¤å€¼çª—å£ä½ç½®æŒªåŠ¨åˆ°é‡å¤å€¼ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®çš„åé¢ï¼Œè¿™æ ·çª—å£ä¸­çš„å­—ç¬¦ä¸²å°±åˆæ˜¯ä¸é‡å¤çš„äº†ï¼Œè®°å½•çª—å£çš„æœ€å¤§å®½åº¦ï¼Œéå†å®Œæ‰€æœ‰å­—ç¬¦åè¿”å›æœ€å¤§çª—å£å®½åº¦ã€‚</p><p class="center"><img src="/2018/06/19/ç®—æ³•/LeetCode1/SlidingWindow.PNG" alt="SlideWindow"></p><p class="center">æ»‘åŠ¨çª—å£æ³•</p><pre><code class="JavaScript">/** * @param {string} s * @return {number} */var lengthOfLongestSubstring = function(s) {    if (!s.length) return 0;    const len = s.length;    let max = flag = 0, hash = {};    for(let i = 0; i &lt; len; i++) {        if(hash[s[i]] !== undefined) {            flag = Math.max(hash[s[i]], flag);        }        hash[s[i]] = i + 1;        max = Math.max(i - flag + 1, max);    }    return max;};//--------------------------------------------------------/** * @param {string} s * @return {number} */var lengthOfLongestSubstring = function(s) {    if (!s.length) return 0;    const len = s.length;    let max = 1, flag = 0;    for(let i = 0; i &lt; len; i++) {        let index = s.indexOf(s[i], flag)         if (index !== -1 &amp;&amp; index &lt; i) flag = index + 1;        max = Math.max(max, i - flag + 1)    }    return max};</code></pre><h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p id="qa1">1. ä¸ºä»€ä¹ˆè¯´ä»å“ˆå¸Œè¡¨ä¸­æŸ¥æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ çš„æŸ¥æ‰¾æ—¶é—´å¯ä»¥è¿‘ä¼¼ä¸º <code>O(1)</code></p><h2 id="åŸé¢˜åœ°å€"><a href="#åŸé¢˜åœ°å€" class="headerlink" title="åŸé¢˜åœ°å€"></a>åŸé¢˜åœ°å€</h2><p><a href="https://leetcode-cn.com/problems/two-sum/description/" target="_blank" rel="noopener">#1 ä¸¤æ•°ä¹‹å’Œ</a><br><a href="https://leetcode-cn.com/problems/add-two-numbers/description/" target="_blank" rel="noopener">#2 ä¸¤æ•°ç›¸åŠ </a><br><a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/description/" target="_blank" rel="noopener">#3 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a></p>]]></content>
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…¨æ’åˆ—é—®é¢˜</title>
      <link href="/2018/06/12/%E7%AE%97%E6%B3%95/%E5%85%A8%E6%8E%92%E5%88%97%E9%97%AE%E9%A2%98/"/>
      <url>/2018/06/12/%E7%AE%97%E6%B3%95/%E5%85%A8%E6%8E%92%E5%88%97%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h1 id="å­—ç¬¦ä¸²çš„å…¨æ’åˆ—é—®é¢˜"><a href="#å­—ç¬¦ä¸²çš„å…¨æ’åˆ—é—®é¢˜" class="headerlink" title="å­—ç¬¦ä¸²çš„å…¨æ’åˆ—é—®é¢˜"></a>å­—ç¬¦ä¸²çš„å…¨æ’åˆ—é—®é¢˜</h1><p>æ˜¨å¤©<a href="https://github.com/MiaoQ" target="_blank" rel="noopener">å°ä¼™ä¼´</a>é¢è¯•é‡åˆ°äº†è¿™æ ·ä¸€é¢˜ã€‚</p><p>è¦æ±‚ç»™å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ¯”å¦‚ <code>&quot;abc&quot;</code> è¦æ±‚è¾“å‡ºè¿™ä¸ªå­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—ç¬¦çš„æ‰€æœ‰ä¸é‡å¤çš„æ’åˆ—ç»„åˆã€‚ä¹Ÿå°±æ˜¯<code>&quot;abc&quot; &quot;bac&quot; &quot;bca&quot; &quot;acb&quot; &quot;cab&quot; &quot;cba&quot;</code>;</p><p>å½“ç„¶çœ‹åˆ°ç®—æ³•é¢˜å¯¹äºæˆ‘æ¥è¯´å°±æ˜¯å´©æºƒçš„ã€‚å› ä¸ºæƒ³ä¸åˆ°å•Šï¼</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å½“ç„¶ Google äº†ä¸€ç•ªä¹‹åï¼Œçœ‹åˆ°åˆ«äººçš„è§£é‡Šä¹‹åæ‰æƒ³é€šäº†æ€ä¹ˆå»å®ç°ã€‚</p><ol><li>å°†å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æå‡ºæ¥</li></ol><p>æ¯”å¦‚ <code>abcd</code> å°±å–å‡ºç¬¬ä¸€ä¸ªå­—ç¬¦ <code>a</code></p><ol start="2"><li>å°†ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸€æ¬¡æ’å…¥å‰©ä½™å­—ç¬¦ä¹‹ä¸­</li></ol><p><code>_b_c_d_</code> å°±åƒæ˜¯å¡«ç©ºé¢˜ï¼Œæ¯æ¬¡æŠŠ <code>a</code> å¡«å…¥å‰é¢çš„æ¨ªçº¿ä¸­</p><ol start="3"><li>å¯¹äº <code>bcd</code> é€’å½’æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œå¾—åˆ° <code>bcd</code> çš„å…¨æ’åˆ—ï¼Œé‡å¤å‰é¢ä¸¤æ­¥ã€‚</li></ol><p><em>è¿™é‡Œç®€åŒ–äº†å¾ˆå¤šï¼Œæˆ‘çš„ç†è§£æ˜¯å°† <code>a</code> çœ‹åšä¸€ä¸ªæ•´ä½“ï¼Œ <code>bcd</code> çœ‹åšä¸€ä¸ªæ•´ä½“ï¼Œ è€Œ <code>bcd</code> åœ¨é€’å½’ä¸­åˆæ˜¯ç›¸å½“äºç¬¬ä¸€æ¬¡è°ƒç”¨çš„è¯¥å‡½æ•°çš„ <code>abcd</code>ï¼Œ å–ç¬¬ä¸€ä¸ªå­—ç¬¦ <code>b</code> å†å¯¹ <code>cd</code> åšå…¨æ’åˆ—â€¦ä¾æ¬¡è¿›è¡Œä¸‹å»ã€‚</em></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>æ„Ÿè§‰è§£é‡Šçš„è¿˜æ˜¯ä¸æ¸…æ¥šï¼Œå¯èƒ½æ˜¯è‡ªå·±æ²¡æœ‰å®Œå…¨ç†è§£å§ã€‚</p><p>ä¸å¤šå“”å“”ï¼Œä¸Šä»£ç ã€‚</p><pre><code class="JavaScript">function permutation(str) {    var len = str.length;    var result = [];    if (len === 1) {        // å¦‚æœé•¿åº¦ä¸º 1 ç›´æ¥è¿”å›è¯¥å­—ç¬¦ä¸²        return [str];    } else {        // æ¯æ¬¡å¯¹å»é™¤ç¬¬ä¸€ä¸ªå­—ç¬¦åçš„å­—ç¬¦ä¸²åšå…¨æ’åˆ—        var prePermuation = permutation(str.slice(1));        var preLength = prePermuation.length;        // ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå³è¦æ’å…¥é˜Ÿå†…çš„å­—ç¬¦        var curChar = str[0];        // å¾ªç¯å°†ç¬¬ä¸€ä¸ªå­—ç¬¦æ’å…¥å…¨æ’åˆ—å¥½çš„å­—ç¬¦æ•°ç»„ä¸­        for (let i = 0; i &lt; preLength; i++) {            var curStr = prePermuation[i];            // å¾ªç¯å°†ç¬¬ä¸€ä¸ªå­—ç¬¦æ’å…¥å­—ç¬¦ä¸²ä¸­                        for (let j = 0; j &lt; prePermuation[0].length + 1; j++) {                var tmp = curStr.substr(0, j) + curChar + curStr.slice(j);                result.push(tmp);            }        }   }    // æ•°ç»„å»é‡ï¼Œæ–¹æ³•å¾ˆå¤šï¼Œåªæ˜¯ ES6 çš„å†™æ³•è¡Œæ•°å°‘ :) è¿™ä¸é‡è¦å•¦ã€‚    return [...new Set(result)];}</code></pre><p>ä»¥åè¦å¤šç§¯ç´¯ç®—æ³•é¢˜ï¼Œç®—æ³•é¢˜ä¸€æ˜¯é æ™ºå•†ï¼ŒäºŒæ˜¯é ç§¯ç´¯ã€‚æˆ‘è¿™ç§ç¬¨è„‘è¢‹åªå¥½çœ‹çœ‹å¤§ç‰›çš„è§£æ³•ï¼Œç„¶åå»ç†è§£å’¯ã€‚</p>]]></content>
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å­—ç¬¦ä¸²å…¨æ’åˆ— </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>MongoDB start</title>
      <link href="/2018/06/07/%E5%89%8D%E7%AB%AF/MongoDB-start/"/>
      <url>/2018/06/07/%E5%89%8D%E7%AB%AF/MongoDB-start/</url>
      <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æœ€è¿‘åœ¨å…¬å¸æäº†ä¸ª<a href="https://github.com/hongxuWei/let-s-talk" target="_blank" rel="noopener">èŠå¤©å®¤</a>ï¼Œç”¨æ¥å’Œæˆ‘å®¶<a href="https://github.com/MiaoQ" target="_blank" rel="noopener">å°å¯çˆ±</a>è¯´æ‚„æ‚„è¯â¤ã€‚å› ä¸ºå…¬å¸çš„ Skype ç­‰ä¼šè¢«ç›‘æ§å•¦ã€‚</p><p>åˆæœŸç‰ˆæœ¬ç‰¹åˆ«ç®€é™‹ï¼Œç”¨æˆ·ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨ä¸€ä¸ªæœåŠ¡ç«¯çš„ js é‡Œï¼Œ login çš„æ—¶å€™ï¼Œå“ˆå“ˆå“ˆå“ˆï¼Œå»è¯»å– js é‡Œçš„å˜é‡ï¼Œæˆ‘éƒ½è¢«æˆ‘æœºæ™ºåˆ°äº†ã€‚</p><p>ç°åœ¨æƒ³åŠ ä¸Šæ•°æ®åº“ç”¨æˆ·ä¿¡æ¯ï¼ŒèŠå¤©è®°å½•ä¹Ÿè¦å­˜æ”¾åœ¨æ•°æ®åº“é‡Œã€‚ä¹‹å‰æœ‰å¼„è¿‡ä¸€æ®µæ—¶é—´çš„ <code>MongoDB</code> æ‰€ä»¥ç¬¬ä¸€æ—¶é—´æƒ³åˆ°å°±æ˜¯ç”¨å®ƒå•¦ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><h4 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h4><p>å…¬å¸ç”µè„‘æ˜¯ Win10 çš„ï¼Œå…ˆå»å®˜ç½‘ä¸‹è½½å¯¹åº”çš„å®‰è£…æ–‡ä»¶ <a href="https://www.mongodb.com/download-center?jmp=nav#community" target="_blank" rel="noopener">MongoDB Window ä¸‹è½½åœ°å€</a></p><p>è¿™ç§å®‰è£…ä¹Ÿä¸è¦ä»€ä¹ˆè¯´æ˜å•¦ï¼Œåªæ˜¯å¦‚æœæƒ³è¦ä¿®æ”¹å®‰è£…åŒ…çš„é»˜è®¤ä½ç½®çš„è¯éœ€è¦åœ¨  <code>Choose Setup Type</code> è¿™ä¸€æ­¥é€‰æ‹© <strong>Custom</strong>ã€‚ä¹‹åå°±å’Œå®‰è£…æ™®é€šçš„ Windows è½¯ä»¶ä¸€æ ·ã€‚</p><p>è¿™é‡Œæˆ‘å®‰è£…åˆ°äº† D: ç›˜ï¼Œå®‰è£…å®Œæˆåç›®å½•ç»“æ„å¦‚ä¸‹å›¾</p><p class="center"><img src="/2018/06/07/å‰ç«¯/MongoDB-start/files.png" alt="files"></p><h4 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h4><p><strong>1. é…ç½®ç¯å¢ƒå˜é‡</strong></p><p>ä¸ºäº†ä¸‹é¢æ•²å‘½ä»¤æ–¹ä¾¿è¿™é‡ŒæŠŠ MongoDB çš„ <code>bin</code> æ–‡ä»¶å¤¹æ”¾å…¥åˆ° Windows ç³»ç»Ÿç¯å¢ƒå˜é‡ <code>Path</code> ä¸­ã€‚åœ¨æˆ‘çš„å®‰è£…ç›®å½•ä¸­å°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p><p class="center"><img src="/2018/06/07/å‰ç«¯/MongoDB-start/path.png" alt="path"></p><p><strong>2. åˆ›å»ºæ•°æ®åº“å­˜æ”¾åœ°å€</strong></p><p>æˆ‘æ˜¯æŠŠæ•°æ®åº“çš„å†…å®¹æ”¾åœ¨ D ç›˜çš„ data æ–‡ä»¶å¤¹ä¸‹</p><pre><code class="shell">d:mkdir data\dbmkdir data\log</code></pre><p><strong>3. åˆ›å»ºé…ç½®æ–‡ä»¶</strong></p><p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¿…é¡»è®¾ç½® <code>systemLog.path</code></p><p>é…ç½®æ–‡ä»¶åœ¨ <code>D:\mongodb\mongod.cfg</code></p><p>å†…å®¹å¦‚ä¸‹</p><pre><code class="cfg">systemLog:    destination: file    path: d:\data\log\mongod.logstorage:    dbPath: d:\data\db</code></pre><p><strong>4. å®‰è£… MongoDB æœåŠ¡</strong></p><pre><code class="shell"># ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œ# --serviceName æ˜¯æ³¨å†Œ windows æœåŠ¡åç§°mongod --config &quot;D:\mongodb\mongod.cfg&quot; --install --serviceName &quot;MongoDB&quot;</code></pre><p>å¯åŠ¨ MongoDB æœåŠ¡</p><pre><code class="shell">net start MongoDB</code></pre><p>å…³é—­ MongoDB æœåŠ¡</p><pre><code class="shell">net stop MongoDB</code></pre><p>è‡³æ­¤ MongoDB çš„åŸºæœ¬å®‰è£…å’Œé…ç½®å·²ç»å®Œæˆã€‚</p><p>å‘½ä»¤è¡Œæ‰§è¡Œ</p><pre><code class="shell">mongo</code></pre><p>å°±å¯ä»¥è¿æ¥æ•°æ®åº“äº†</p>]]></content>
      
      <categories>
          
          <category> MongoDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MongoDB </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Why is the DOM slow?</title>
      <link href="/2018/05/29/%E5%89%8D%E7%AB%AF/Why-is-the-DOM-slow/"/>
      <url>/2018/05/29/%E5%89%8D%E7%AB%AF/Why-is-the-DOM-slow/</url>
      <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆå¤§å®¶éƒ½è¯´-DOM-æ“ä½œå¾ˆæ…¢"><a href="#ä¸ºä»€ä¹ˆå¤§å®¶éƒ½è¯´-DOM-æ“ä½œå¾ˆæ…¢" class="headerlink" title="ä¸ºä»€ä¹ˆå¤§å®¶éƒ½è¯´ DOM æ“ä½œå¾ˆæ…¢"></a>ä¸ºä»€ä¹ˆå¤§å®¶éƒ½è¯´ DOM æ“ä½œå¾ˆæ…¢</h1><p>ä¹‹å‰åœ¨<a href="https://hongxuwei.github.io/2018/05/22/%E5%89%8D%E7%AB%AF/React-1/">å­¦ä¹  <em>React</em> </a>çš„æ—¶å€™çœ‹åˆ° <em>React</em> çš„ä¼˜åŠ¿çš„æ—¶å€™å°±è¯´ï¼Œ <em>React</em> çš„ diff ç®—æ³•ï¼Œä¼šâ€œæœ€å°åŒ–â€å¤„ç† DOMã€‚å› ä¸ºæ“ä½œ DOM çš„å¼€é”€å¤ªå¤§äº†ã€‚é¢‘ç¹æ“ä½œ DOM ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚</p><p>é‚£ä¹ˆä»Šå¤©å°±æ¥äº†è§£ä¸‹ã€‚ä¸ºä»€ä¹ˆæ“ä½œ DOM ä¼šå¾ˆæ…¢ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-DOM-Document-Object-Model"><a href="#ä»€ä¹ˆæ˜¯-DOM-Document-Object-Model" class="headerlink" title="ä»€ä¹ˆæ˜¯ DOM (Document Object Model)"></a>ä»€ä¹ˆæ˜¯ DOM (Document Object Model)</h2><p>DOM æ˜¯ä¸€ä¸ªç‹¬ç«‹äºè¯­è¨€çš„ï¼Œä½¿ç”¨ <em>XML</em> å’Œ HTML æ–‡æ¡£æ“ä½œçš„æ¥å£ã€‚åœ¨æµè§ˆå™¨ä¸­ä¸»è¦ä¸ HTML æ–‡æ¡£æ‰“äº¤é“ã€‚ DOM APIs ä¸»è¦ç”¨äºè®¿é—®è¿™äº›æ–‡æ¡£ä¸­çš„æ•°æ®ã€‚</p><p>DOM æ˜¯ä¸ª API æµè§ˆå™¨é€šå¸¸è¦æ±‚ DOM å®ç°å’Œ JavaScript å®ç°ä¿æŒç›¸äº’ç‹¬ç«‹ã€‚ä¾‹å¦‚ Chrome ä¸­ ä½¿ç”¨ WebKit çš„ WebCore åº“æ¸²æŸ“é¡µé¢ï¼Œä½†æ˜¯å…·æœ‰ä¸€ä¸ªåˆ†ç¦»çš„ JavaScript å¼•æ“ V8</p><blockquote><p>Inherently Slow<br>è¿™å¯¹æ€§èƒ½æ„å‘³ç€ï¼Œä¸¤ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ä»¥åŠŸèƒ½æ¥å£è¿æ¥å°±ä¼šå¸¦æ¥æ€§èƒ½æŸè€—ã€‚ä¸€ä¸ªæ’å½¢è±¡çš„æ¯”å–»æ˜¯æŠŠ DOM çœ‹æˆä¸€ä¸ªå²›å±¿ï¼ŒæŠŠ JavaScript çœ‹æˆå¦ä¸€ä¸ªå²›å±¿ï¼Œä¸¤è€…ä¹‹é—´ä»¥ä¸€åº§æ”¶è´¹æ¡¥è¿æ¥ã€‚æ¯æ¬¡ JavaScript éœ€è¦è®¿é—® DOM æ—¶ï¼Œéœ€è¦è¿‡æ¡¥ï¼Œäº¤ä¸€æ¬¡â€œè¿‡æ¡¥è´¹â€ã€‚ DOM æ“ä½œè¶Šå¤šï¼Œè´¹ç”¨è¶Šé«˜ã€‚ä¸€èˆ¬å»ºè®®æ˜¯å°½é‡å‡å°‘è¿‡æ¡¥æ¬¡æ•°ã€‚â€”â€” ã€Šé«˜æ€§èƒ½ JavaScriptã€‹</p></blockquote><p><em>Note: ç›®å‰å¤§å¤šæ•°çš„æµè§ˆå™¨å¯¹æ­¤åšçš„ä¼˜åŒ–å·²ç»è¶³å¤Ÿå¤šï¼Œè®¿é—® DOM çš„æœ€ä¸»è¦çš„å¼€é”€ä¹Ÿä¸å†æ¬¡ï¼Œè€Œæ˜¯æ¯æ¬¡ DOM æ“ä½œçš„â€œåé—ç—‡â€â€”â€”æµè§ˆå™¨çš„é‡æ’ï¼ˆreflowï¼‰ å’Œ é‡ç»˜ï¼ˆrepaintï¼‰</em></p><h2 id="DOM-è®¿é—®å’Œä¿®æ”¹"><a href="#DOM-è®¿é—®å’Œä¿®æ”¹" class="headerlink" title="DOM è®¿é—®å’Œä¿®æ”¹"></a>DOM è®¿é—®å’Œä¿®æ”¹</h2><p>è®¿é—®ä¸€ä¸ª DOM å…ƒç´ çš„ä»£ä»·å°±æ˜¯äº¤ä¸€æ¬¡â€œè¿‡æ¡¥è´¹â€ã€‚ä¿®æ”¹å…ƒç´ çš„ä»£ä»·å¯èƒ½æ›´å¤šï¼Œå› ä¸ºå®ƒç»å¸¸å¯¼è‡´æµè§ˆå™¨é‡æ–°è®¡ç®—é¡µé¢ç»“æ„å˜åŒ–ã€‚</p><p>è®¿é—®æˆ–ä¿®æ”¹å…ƒç´ æœ€å·®çš„æƒ…å†µæ˜¯ä½¿ç”¨å¾ªç¯å»åšï¼Œç‰¹åˆ«æ˜¯æ˜¯ HTML é›†åˆä¸­ä½¿ç”¨ã€‚æ¯”è¾ƒä¸‹é¢ä¸¤ä¸ªä¾‹å­ã€‚</p><pre><code class="JavaScript">function innerHTMLLoop() {    for(var count = 0; count &lt; 1000; count++) {        /* åœ¨å¾ªç¯ä¸­è®¿é—® DOM å’Œä¿®æ”¹ DOMã€‚æ“ä½œäº† 1000 æ¬¡           æ¯æ¬¡å…ˆè·å¾— DOM innerHTML ä¸­çš„å†…å®¹ï¼Œç„¶åå»æ›´æ–°å®ƒã€‚*/        document.getElementById().innerHTML += &quot;a&quot;;    }}</code></pre><pre><code class="JavaScript">function innerHTMLLoop() {    var content = &quot;&quot;;    for(var count = 0; count &lt; 1000; count++) {        content += &quot;a&quot;;  // å¾ªç¯ä¿å­˜å˜é‡ï¼Œç„¶åä¸€æ¬¡æ€§å†™å…¥ã€‚    }    // åªè®¿é—®å’Œä¿®æ”¹äº†ä¸€æ¬¡ DOM    document.getElementById().innerHTML += content;}</code></pre><p>åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­ï¼Œç¬¬äºŒå¼ æ–¹æ³•çš„è¿è¡Œé€Ÿåº¦éƒ½æ¯”ä¸€æ¬¡å¿«å¾—å¤šã€‚</p><h2 id="HTML-é›†åˆ"><a href="#HTML-é›†åˆ" class="headerlink" title="HTML é›†åˆ"></a>HTML é›†åˆ</h2><p>HTML é›†åˆæ˜¯ç”¨äºå­˜æ”¾ DOM èŠ‚ç‚¹å¼•ç”¨çš„ç±»æ•°ç»„å¯¹è±¡ã€‚ä¸‹åˆ—å‡½æ•°è¿”å›å€¼å°±æ˜¯ï¼š</p><ul><li>document.getElementsByName()</li><li>document.getElementsByClassName()</li><li>document.getElementsByTagName()</li></ul><p>ä¸‹åˆ—å±æ€§ä¹Ÿæ˜¯</p><ul><li>document.images</li><li>doucment.links</li><li>document.forms</li><li>document.forms[0].elements</li><li>document.anchors</li></ul><p>HTML é›†åˆå®é™…ä¸Šæ˜¯åœ¨æŸ¥è¯¢æ–‡æ¡£ï¼Œå½“æ›´æ–°ä¿¡æ¯æ—¶ï¼Œæ¯æ¬¡éƒ½ä¼šé‡å¤æ‰§è¡ŒæŸ¥è¯¢æ“ä½œã€‚</p><p>æ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜å§ã€‚</p><pre><code class="JavaScript">var divs = document.getElementsByTagName(&#39;div&#39;);for (var i = 0; i &lt; divs.length; i++) {    document.body.appendChild(document.createElement(&#39;div&#39;));}</code></pre><p>å¾ªç¯ä¸­çš„åˆ¤æ–­æ¡ä»¶æ˜¯ <code>divs</code> çš„é•¿åº¦ï¼Œä½†æ˜¯æ¯æ¬¡å¾ªç¯çš„æ—¶å€™ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ª <code>divå…ƒç´ </code> åˆ° body ä¸­ï¼Œæ‰€ä»¥æ¯æ¬¡æŸ¥è¯¢ <code>length</code> éƒ½ä¼šæ”¹å˜ï¼Œå¯¼è‡´æ­»å¾ªç¯ã€‚</p><p>è€Œéå†æ•°ç»„æ˜æ˜¾ä¼šå¿«äºåŒæ ·å¤§å°çš„ HTML é›†åˆã€‚æ‰€ä»¥éœ€è¦å¤šæ¬¡ç”¨åˆ°åŒä¸€ä¸ª HTML é›†åˆçš„æ—¶å€™å¯ä»¥è€ƒè™‘å°†é›†åˆä¸­çš„å…ƒç´ æ‹·è´åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åå»éå†é‚£ä¸ªæ•°ç»„ã€‚</p><h2 id="é‡ç»˜å’Œé‡æ’"><a href="#é‡ç»˜å’Œé‡æ’" class="headerlink" title="é‡ç»˜å’Œé‡æ’"></a>é‡ç»˜å’Œé‡æ’</h2><p>é¦–å…ˆè¦äº†è§£æµè§ˆå™¨å¦‚ä½•å±•ç¤ºä¸€ä¸ªç½‘é¡µçš„ã€‚</p><h3 id="æµè§ˆå™¨çš„æ„æˆ"><a href="#æµè§ˆå™¨çš„æ„æˆ" class="headerlink" title="æµè§ˆå™¨çš„æ„æˆ"></a>æµè§ˆå™¨çš„æ„æˆ</h3><p>æµè§ˆå™¨çš„ä¸»è¦æ„æˆå¦‚ä¸‹ï¼š</p><p class="center"><img src="/2018/05/29/å‰ç«¯/Why-is-the-DOM-slow/layers.png" alt="Layers"></p><p class="center">æµè§ˆå™¨ä¸»è¦ç»„ä»¶</p><p>åŒ…å«äº†ï¼š</p><ul><li><strong>The user interface</strong>: åŒ…å«äº†åœ°å€æ ï¼Œå‰è¿›åé€€æŒ‰é’®â€¦ç­‰ç­‰é™¤äº†è¯·æ±‚é¡µé¢çª—å£ä¹‹å¤–çš„åœ°æ–¹ã€‚</li><li><strong>The browser engine</strong>: è¯·æ±‚å’Œæ“ä½œæ¸²æŸ“å¼•æ“çš„æ¥å£</li><li><strong>The rendering engine</strong>: è´Ÿè´£å±•ç°è¯·æ±‚é¡µé¢ã€‚ä¾‹å¦‚è¯·æ±‚å†…å®¹æ˜¯ä¸ª HTML å®ƒè´Ÿè´£è§£æ HTML å’Œ CSS å¹¶ä¸”æ˜¾ç¤º</li><li><strong>Networking</strong>: å®Œæˆç½‘ç»œè°ƒç”¨ã€‚ä¾‹å¦‚ HTTP è¯·æ±‚ï¼Œå®ƒæ˜¯å¹³å°æ— å…³çš„æ¥å£å¯ä»¥åœ¨ä¸åŒå¹³å°ä¸‹ä½¿ç”¨ã€‚</li><li><strong>UI backend</strong>: ç»˜åˆ¶æƒ³å¤šé€‰æ¡†å’Œçª—å£ç­‰åŸºæœ¬ç»„ä»¶ï¼Œå…·æœ‰ä¸ç‰¹å®šäºæŸä¸ªå¹³å°çš„é€šç”¨æ¥å£ï¼Œåº•å±‚è°ƒç”¨ç”¨æˆ·æ¥å£</li><li><strong>JavaScript interpreter</strong>: è§£é‡Šæ‰§è¡Œ JS ä»£ç </li><li><strong>Data storage</strong>: å±äºæŒä¹…å±‚ï¼Œæµè§ˆå™¨éœ€è¦åœ¨ç¡¬ç›˜ä¸­ä¿å­˜åƒ cookies çš„å„ç§æ•°æ®ã€‚</li></ul><h4 id="Rendering-engine-æ‰€åšçš„å·¥ä½œ"><a href="#Rendering-engine-æ‰€åšçš„å·¥ä½œ" class="headerlink" title="Rendering engine æ‰€åšçš„å·¥ä½œ"></a>Rendering engine æ‰€åšçš„å·¥ä½œ</h4><p>æ¸²æŸ“å¼•æ“æœå…ˆé€šè¿‡ç½‘ç»œè·å¾—æ‰€è¯·æ±‚æ–‡æ¡£çš„å†…å®¹ï¼Œé€šå¸¸ä»¥ 8K åˆ†å—çš„æ–¹å¼å®Œæˆã€‚</p><p>ä¸‹é¢æ˜¯æ¸²æŸ“å¼•æ“åœ¨è·å–å†…å®¹åçš„åŸºæœ¬æµç¨‹ï¼š</p><p class="center"><img src="/2018/05/29/å‰ç«¯/Why-is-the-DOM-slow/mainflow.png" alt="mainflow"></p><p class="center">è§£æ HTML æ„å»º DOM æ ‘ â†’ æ„å»ºæ¸²æŸ“æ ‘ â†’ å¸ƒå±€æ¸²æŸ“æ ‘ â†’ ç»˜åˆ¶æ¸²æŸ“æ ‘</p><p class="center">æ¸²æŸ“å¼•æ“åŸºæœ¬æµç¨‹</p><p>è·å–å†…å®¹åï¼Œæµè§ˆå™¨å¼€å§‹è§£æ HTML å¹¶å°†æ ‡ç­¾è½¬åŒ–ä¸º â€œContent tree(DOM tree)â€ ä¸­çš„ DOM èŠ‚ç‚¹ã€‚æ¥ç€ï¼Œä»–è§£æå¤–éƒ¨ CSS æ–‡ä»¶ä»¥åŠ style æ ‡ç­¾ä¸­çš„æ ·å¼ä¿¡æ¯ï¼Œè¿™äº›æ ·å¼ä¿¡æ¯å’Œ HTML ä¸­çš„å¯è§æ€§æŒ‡ä»¤å°†ç”¨æ¥æ„å»º Render tree</p><p>Render tree ä¸ºæ¯ä¸ªéœ€è¦æ˜¾ç¤ºçš„ DOM æ ‘èŠ‚ç‚¹å­˜æ”¾è‡³å°‘ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆéšè— DOM å…ƒç´ åœ¨æ¸²æŸ“æ ‘ä¸­æ²¡æœ‰å¯¹åº”èŠ‚ç‚¹ï¼‰ã€‚æ¸²æŸ“æ ‘ä¸Šçš„èŠ‚ç‚¹ç§°ä¸ºâ€œæ¡†â€æˆ–â€œç›’â€ï¼Œç¬¦åˆ CSS æ¨¡å‹çš„å®šä¹‰ï¼Œå°†å…ƒç´ çœ‹åšä¸€ä¸ªå…·æœ‰å¡«å……ã€è¾¹è·ã€è¾¹æ¡†å’Œä½ç½®çš„ç›’ã€‚Render tree ç”±ä¸€äº›åŒ…å«é¢œè‰²å’Œå¤§å°ç­‰å±æ€§çš„çŸ©å½¢ç»„æˆï¼Œå®ƒä»¬å°†æŒ‰æ­£ç¡®çš„é¡ºåºæ˜¾ç¤ºåˆ°å±å¹•ä¸Šã€‚</p><p>Render tree æ„å»ºå¥½äº†ä¹‹åï¼Œå°†ä¼šæ‰§è¡Œå¸ƒå±€è¿‡ç¨‹ï¼Œå®ƒå°†ç¡®å®šæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸Šçš„ç¡®åˆ‡åæ ‡ã€‚ä¸‹ä¸€æ­¥å°±æ˜¯ç»˜åˆ¶ï¼Œéå† Render tree å¹¶ä½¿ç”¨ UI backend ç»˜åˆ¶æ¯ä¸ªèŠ‚ç‚¹ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹æ˜¯é€æ­¥å®Œæˆçš„ï¼Œä¸ºäº†æ›´å¥½åœ°ç”¨æˆ·ä½“éªŒï¼Œæ¸²æŸ“å¼•æ“å°†ä¼šå°½å¯èƒ½æ—©çš„å°†å†…å®¹å‘ˆç°åœ¨å±å¹•ä¸Šï¼Œä¸ä¼šç­‰æ‰€æœ‰çš„ HTML éƒ½è§£æå®Œæˆä¹‹åå†å»æ„å»ºå’Œå¸ƒå±€ Render treeã€‚å®ƒæ˜¯è§£æå®Œä¸€éƒ¨åˆ†å†…å®¹åå°±æ˜¾ç¤ºä¸€éƒ¨åˆ†å†…å®¹ï¼ŒåŒæ—¶å¯èƒ½è¿˜åœ¨é€šè¿‡ç½‘ç»œä¸‹è½½å…¶ä½™å†…å®¹ã€‚</p><p class="center"><img src="/2018/05/29/å‰ç«¯/Why-is-the-DOM-slow/webkitflow.png" alt="Webkit flow"></p><p class="center">Webkit æ¸²æŸ“å¼•æ“ä¸»æµç¨‹</p><p class="center"><img src="/2018/05/29/å‰ç«¯/Why-is-the-DOM-slow/geckoflow.jpg" alt="Gecko flow"></p><p class="center">Geoko æ¸²æŸ“å¼•æ“ä¸»æµç¨‹</p><p>å½±å“é¡µé¢å±•ç¤ºçš„å› ç´ æœ‰è®¸å¤šï¼Œæ¯”å¦‚ link ä½ç½®ä¼šå½±å“é¦–å±æ˜¾ç¤º.è¿™é‡Œåªè®¨è®º layout ç›¸å…³å†…å®¹ã€‚</p><p>paint æ˜¯ä¸€ä¸ªè€—æ—¶çš„è¿‡ç¨‹ï¼Œä½†æ˜¯ layout æ˜¯ä¸€ä¸ªæ›´è€—æ—¶çš„è¿‡ç¨‹ã€‚</p><p>å½“ DOM æ”¹å˜å½±å“åˆ°å…ƒç´ çš„å‡ ä½•å±æ€§ï¼ˆå®½å’Œé«˜ï¼‰â€”â€”â€”â€” ä¾‹å¦‚æ”¹å˜äº†è¾¹æ¡†å®½åº¦æˆ–æ˜¯åœ¨æ®µè½ä¸­æ·»åŠ æ–‡å­—ï¼Œå°†å‘ç”Ÿä¸€ç³»åˆ—åç»­åŠ¨ä½œ â€”â€”â€”â€” æµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ï¼Œè€Œä¸”å…¶ä»–å…ƒç´ çš„å‡ ä½•å±æ€§å’Œä½ç½®ä¹Ÿä¼šå› æ­¤æ”¹å˜å—åˆ°å½±å“ã€‚æµè§ˆå™¨ä½¿æ¸²æŸ“æ ‘ä¸Šå—åˆ°çš„å½±å“çš„éƒ¨åˆ†å¤±æ•ˆï¼Œç„¶åé‡æ„æ¸²æŸ“æ ‘ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä½œé‡æ’ï¼ˆreflowï¼‰ã€‚é‡æ’å®Œæˆæ—¶ï¼Œæµè§ˆå™¨ä¼šåœ¨ä¸€ä¸ªé‡ç»˜è¿›ç¨‹ä¸­é‡æ–°ç»˜åˆ¶å±å¹•ä¸Šå—å½±å“çš„éƒ¨åˆ†ã€‚</p><p>ä¸æ˜¯æ‰€æœ‰çš„ DOM æ”¹å˜éƒ½ä¼šå½±å“å‡ ä½•å±æ€§ã€‚æ¯”å¦‚ï¼Œæ”¹å˜ä¸€ä¸ªå…ƒç´ çš„èƒŒæ™¯é¢œè‰²ä¸ä¼šå½±å“å®ƒçš„å®½åº¦å’Œé«˜åº¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªéœ€è¦é‡ç»˜ï¼Œå› ä¸ºå…ƒç´ çš„å¸ƒå±€æ²¡æœ‰æ”¹å˜ã€‚</p><p>é‡ç»˜å’Œé‡æ’æ˜¯è´Ÿæ‹…å¾ˆé‡çš„æ“ä½œï¼Œå¯èƒ½å¯¼è‡´ç½‘é¡µåº”ç”¨çš„ç”¨æˆ·ç•Œé¢æ˜¯å»å“åº”ã€‚æ‰€ä»¥ååˆ†æœ‰å¿…è¦å°½å¯èƒ½å‡å°‘æ­¤ç±»äº‹æƒ…çš„å‘ç”Ÿã€‚</p><h4 id="æµè§ˆå™¨ä½•æ—¶é‡æ’"><a href="#æµè§ˆå™¨ä½•æ—¶é‡æ’" class="headerlink" title="æµè§ˆå™¨ä½•æ—¶é‡æ’"></a>æµè§ˆå™¨ä½•æ—¶é‡æ’</h4><p>æƒ³è¦æœ€å°åŒ–é‡æ’æ¬¡æ•°ï¼Œè¦å…ˆäº†è§£ä»€ä¹ˆæƒ…å†µä¸‹æµè§ˆå™¨ä¼šè¿›è¡Œé‡æ’ã€‚</p><ul><li><strong>Page renders initially</strong>: é¡µé¢åˆå§‹æ¸²æŸ“</li><li><strong>Visible DOM elements are added or removed</strong>: å¯è§å…ƒç´ çš„æ·»åŠ æˆ–åˆ é™¤</li><li><strong>Elements change position</strong>: å…ƒç´ ä½ç½®æ”¹å˜</li><li><strong>Elements change size (because of a change in margin, padding, border thickness, width, height, etc.)</strong>: ç”±äº margin, padding, border-width, width, height ç­‰å±æ€§å¯¼è‡´çš„å…ƒç´ å¤§å°æ”¹å˜</li><li><strong>Content is changed (text changes or an image is replaced with on of a different size)</strong>: æ–‡æœ¬æ”¹å˜æˆ–å›¾ç‰‡è¢«å¦ä¸€ä¸ªä¸åŒå°ºå¯¸çš„å›¾ç‰‡æ›¿æ¢æ—¶å¯¼è‡´çš„å†…å®¹æ”¹å˜</li><li><strong>Browser window is resized</strong>: æµè§ˆå™¨çª—å£å¤§å°æ”¹å˜</li></ul><p>æ ¹æ®æ”¹å˜çš„æ€§è´¨ï¼Œæ¸²æŸ“æ ‘ä¸Šæˆ–å¤§æˆ–å°çš„ä¸€éƒ¨åˆ†éœ€è¦é‡æ–°è®¡ç®—ï¼ŒæŸäº›æ”¹å˜å¯èƒ½å¯¼è‡´é‡æ’æ•´ä¸ªé¡µé¢ï¼šä¾‹å¦‚æ»šåŠ¨æ¡å‡ºç°æ—¶ã€‚</p><h4 id="æŸ¥è¯¢å¹¶åˆ·æ–°å¯¼è‡´æ¸²æŸ“æ ‘æ”¹å˜"><a href="#æŸ¥è¯¢å¹¶åˆ·æ–°å¯¼è‡´æ¸²æŸ“æ ‘æ”¹å˜" class="headerlink" title="æŸ¥è¯¢å¹¶åˆ·æ–°å¯¼è‡´æ¸²æŸ“æ ‘æ”¹å˜"></a>æŸ¥è¯¢å¹¶åˆ·æ–°å¯¼è‡´æ¸²æŸ“æ ‘æ”¹å˜</h4><p>å› ä¸ºè®¡ç®—é‡å’Œæ¯æ¬¡é‡æ’æœ‰å…³ï¼Œå¤§å¤šæ•°æµè§ˆå™¨é€šè¿‡é˜Ÿåˆ—åŒ–åŒ–ä¿®æ”¹å’Œæ‰¹é‡æ˜¾ç¤ºä¼˜åŒ–é‡æ’è¿‡ç¨‹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯èƒ½ä¸ç»æ„ä¹‹é—´å¼ºè¿«é˜Ÿåˆ—åˆ·æ–°å¹¶è¦æ±‚æ‰€æœ‰æ”¹å˜çš„éƒ¨åˆ†ç«‹åˆ»åº”ç”¨ã€‚å½“æˆ‘ä»¬æŸ¥è¯¢ä¸€äº›å¸ƒå±€ä¿¡æ¯çš„æ—¶å€™ä¼šå¯¼è‡´æµè§ˆå™¨æ›´æ–°æ¸²æŸ“æ ‘ã€‚</p><p>å¦‚ä¸‹æ–¹æ³•ï¼š</p><ul><li>offsetTop, offsetLeft, offsetWidth, offsetHeight</li><li>scrollTop, scrollLeft, scrollWidth, scrollHeight</li><li>clientTop, clientLeft, clientWidth, clientHeight</li><li>getComputedStyle() ( currentStyle() in IE)</li></ul><p>ç­‰ç­‰è¿™äº›å¸ƒå±€ä¿¡æ¯ç”±è¿™äº›å±æ€§å’Œæ–¹æ³•è¿”å›æœ€æ–°çš„æ•°æ®ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¸å¾—ä¸è¿è¡Œæ¸²æŸ“é˜Ÿåˆ—ä¸­å¾…æ”¹å˜çš„é¡¹ç›®å¹¶é‡æ–°æ’ç‰ˆä»¥è¿”å›æ­£ç¡®çš„å€¼ã€‚</p><p><em>æ‹“å±•ï¼š <a href="https://csstriggers.com/" target="_blank" rel="noopener">ä¼šå¯¼è‡´é‡æ’å’Œé‡ç»˜çš„ CSS å±æ€§</a></em></p><h4 id="å¦‚ä½•ä¼˜åŒ–ï¼Ÿ"><a href="#å¦‚ä½•ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–ï¼Ÿ"></a>å¦‚ä½•ä¼˜åŒ–ï¼Ÿ</h4><p>ä¸‹é¢çš„ä¾‹å­å¯¼è‡´äº†ä¸‰æ¬¡é‡æ’</p><pre><code class="JavaScript">// Readvar h1 = element1.clientHeight;// Write (invalidates layout)element1.style.height = (h1 * 2) + &#39;px&#39;;// Read (triggers layout)var h2 = element2.clientHeight;// Write (invalidates layout)element2.style.height = (h2 * 2) + &#39;px&#39;;// Read (triggers layout)var h3 = element3.clientHeight;// Write (invalidates layout)element3.style.height = (h3 * 2) + &#39;px&#39;;  </code></pre><p><strong>æ‰¹å¤„ç†ä¼˜åŒ–</strong></p><pre><code class="JavaScript">// Readvar h1 = element1.clientHeight;  var h2 = element2.clientHeight;  var h3 = element3.clientHeight;// Write (invalidates layout)element1.style.height = (h1 * 2) + &#39;px&#39;;  element2.style.height = (h2 * 2) + &#39;px&#39;;  element3.style.height = (h3 * 2) + &#39;px&#39;; </code></pre><p><strong>å¦å¤–å½“éœ€è¦å¯¹ DOM å…ƒç´ è¿›è¡Œå¤šæ¬¡ä¿®æ”¹æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å‡å°‘é‡ç»˜å’Œé‡æ’çš„æ¬¡æ•°</strong></p><ol><li>ä»æ–‡æ¡£ä¸­æ‘˜é™¤è¯¥å…ƒç´ </li><li>åº”ç”¨ä¿®æ”¹</li><li>å°†å…ƒç´ å¸¦å›æ–‡æ¡£æµä¸­</li></ol><p>æœ‰ä¸‰ç§åŸºæœ¬æ–¹æ³•å¯ä»¥å°† DOM ä»æ–‡æ¡£ä¸­æ‘˜é™¤</p><ul><li>éšè—å…ƒç´ ï¼Œè¿›è¡Œä¿®æ”¹ç„¶åå†æ˜¾ç¤ºå®ƒ</li><li>ä½¿ç”¨ä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µåœ¨å·²å­˜ DOM ä¹‹å¤–åˆ›å»ºä¸€ä¸ªå­æ ‘ï¼Œç„¶åå°†å®ƒæ‹·è´åˆ°æ–‡æ¡£ä¸­ï¼ˆdocument.createDocumentFragment()ï¼‰</li><li>å°†åŸå§‹å…ƒç´ æ‹·è´åˆ°ä¸€ä¸ªè„±ç¦»æ–‡æ¡£çš„èŠ‚ç‚¹ä¸­ï¼Œä¿®æ”¹å‰¯æœ¬ï¼Œç„¶åè¦†ç›–åŸå§‹å…ƒç´ </li></ul><p><strong>å°†å…ƒç´ æå‡ºåŠ¨ç”»æµ</strong></p><p>æ˜¾ç¤ºå’Œéšè—éƒ¨åˆ†é¡µé¢æ„æˆå±•å¼€/æŠ˜å åŠ¨ç”»æ˜¯ä¸€ç§å¸¸è§çš„äº¤äº’æ¨¡å¼ã€‚å®ƒé€šå¸¸åŒ…æ‹¬åŒºåŸŸæ‰©å¤§çš„å‡ ä½•åŠ¨ç”»ï¼Œå°†é¡µé¢å…¶ä»–éƒ¨åˆ†æ¨å‘ä¸‹æ–¹ã€‚</p><p>é‡æ’ç‰ˆæœ‰æ—¶åªå½±å“æ¸²æŸ“æ ‘çš„ä¸€å°éƒ¨åˆ†ï¼Œä½†ä¹Ÿå¯ä»¥å½±å“å¾ˆå¤§çš„ä¸€éƒ¨åˆ†ï¼Œç”šè‡³æ•´ä¸ªæ¸²æŸ“æ ‘ã€‚æµè§ˆå™¨éœ€è¦é‡æ’<br>ç‰ˆçš„éƒ¨åˆ†è¶Šå°ï¼Œåº”ç”¨ç¨‹åºçš„å“åº”é€Ÿåº¦å°±è¶Šå¿«ã€‚æ‰€ä»¥å½“ä¸€ä¸ªé¡µé¢é¡¶éƒ¨çš„åŠ¨ç”»æ¨ç§»äº†å·®ä¸å¤šæ•´ä¸ªé¡µé¢æ—¶ï¼Œå°†å¼•<br>å‘å·¨å¤§çš„é‡æ’ç‰ˆåŠ¨ä½œï¼Œä½¿ç”¨æˆ·æ„Ÿåˆ°åŠ¨ç”»å¡é¡¿ã€‚æ¸²æŸ“æ ‘çš„å¤§å¤šæ•°èŠ‚ç‚¹éœ€è¦è¢«é‡æ–°è®¡ç®—ï¼Œå®ƒå˜å¾—æ›´ç³Ÿç³•ã€‚</p><p><strong>IE and :hover IE å’Œ:hover</strong></p><p>è‡ªä»ç‰ˆæœ¬ IE7 ä¹‹åï¼Œå¯ä»¥åœ¨ä»»ä½•å…ƒç´ ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰ä¸Šä½¿ç”¨ :hover è¿™ä¸ª CSS ä¼ªé€‰æ‹©å™¨ã€‚ç„¶è€Œï¼Œå¦‚æœå¤§é‡çš„å…ƒç´ ä½¿ç”¨äº† :hover é‚£ä¹ˆä¼šé™ä½ååº”é€Ÿåº¦ã€‚æ­¤é—®é¢˜åœ¨ IE8 ä¸­æ›´æ˜¾è‘—ã€‚</p><p><em>æ‹“å±•ï¼š<a href="http://taligarsiel.com/Projects/howbrowserswork1.htm" target="_blank" rel="noopener">How browsers work</a></em></p>]]></content>
      
      <categories>
          
          <category> Q&amp;A </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Q&amp;A </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>React 1</title>
      <link href="/2018/05/22/%E5%89%8D%E7%AB%AF/React-1/"/>
      <url>/2018/05/22/%E5%89%8D%E7%AB%AF/React-1/</url>
      <content type="html"><![CDATA[<h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><p>Reactæ˜¯Facrbookå†…éƒ¨çš„ä¸€ä¸ªJavaScriptç±»åº“ï¼Œå·²äº1å¹´å¼€æºï¼Œå¯ç”¨äºåˆ›å»ºWebç”¨æˆ·äº¤äº’ç•Œé¢ã€‚å®ƒå¼•å…¥äº†ä¸€ç§æ–°çš„æ–¹å¼æ¥å¤„ç†æµè§ˆå™¨DOMã€‚é‚£äº›éœ€è¦æ‰‹åŠ¨æ›´æ–°DOMã€è´¹åŠ›åœ°è®°å½•æ¯ä¸€ä¸ªçŠ¶æ€çš„æ—¥å­ä¸€å»ä¸å¤è¿”äº†â€”â€”è¿™ç§è€èˆ…çš„æ–¹å¼æ—¢ä¸å…·å¤‡æ‰©å±•æ€§ï¼Œåˆå¾ˆéš¾åŠ å…¥æ–°çš„åŠŸèƒ½ï¼Œå°±ç®—å¯ä»¥ï¼Œä¹Ÿæ˜¯æœ‰ç€å†’ç€å¾ˆå¤§çš„é£é™©ã€‚Reactä½¿ç”¨å¾ˆæ–°é¢–çš„æ–¹å¼è§£å†³äº†è¿™äº›é—®é¢˜ã€‚ä½ åªéœ€è¦å£°æ˜åœ°å®šä¹‰å„ä¸ªæ—¶é—´ç‚¹çš„ç”¨æˆ·ç•Œé¢ï¼Œè€Œæ— åºå…³ç³»åœ¨æ•°æ®å˜åŒ–æ—¶ï¼Œéœ€è¦æ›´æ–°å“ªä¸€éƒ¨åˆ†DOMã€‚åœ¨ä»»ä½•æ—¶é—´ç‚¹ï¼ŒReactéƒ½èƒ½ä»¥æœ€å°çš„DOMä¿®æ”¹æ¥æ›´æ–°æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</p><p>Reactå¼•å…¥äº†ä¸€äº›æ¿€åŠ¨äººå¿ƒçš„æ–°æ¦‚å¿µï¼Œå‘ç°æœ‰çš„ä¸€äº›æœ€ä½³å®è·µå‘èµ·äº†æŒ‘æˆ˜ã€‚å­¦ä¹ è¿™äº›æ¦‚å¿µï¼Œå°†å¸®åŠ©ä½ ç†è§£å®ƒä»¬çš„ä¼˜åŠ¿ï¼Œåˆ›å»ºå…·å¤‡é«˜æ‰©å±•æ€§çš„å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ã€‚ReactæŠŠä¸»è¦çš„æ³¨æ„åŠ›æ”¾åœ¨äº†åº”ç”¨çš„â€œè§†å›¾â€éƒ¨åˆ†ï¼Œæ²¡æœ‰é™å®šä¸æœåŠ¡ç«¯äº¤äº’å’Œä»£ç ç»„ç»‡çš„æ–¹å¼ã€‚</p><h2 id="Why-React"><a href="#Why-React" class="headerlink" title="Why React?"></a>Why React?</h2><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ React ? è€å¤«å°±æ˜¯ jQuery ä¸€æ¢­å­å»æ’¸ä¸å¯ä»¥ä¹ˆï¼Ÿ</p><p>ğŸ˜¢è¿˜çœŸä¸æ–¹ä¾¿ã€‚äº§å“ç»ç†è¯´ï¼Œè¿™é‡Œéœ€è¦ç»™æˆ‘æ”¹ä¸ªä¸œè¥¿ã€‚å­å“§å­å“§ç”¨ jQuery å†™äº†åŠå¤©ï¼Œç„¶åäº§å“ç»ç†è¯´ï¼Œå®¢æˆ·åˆæ”¹éœ€æ±‚äº†ï¼è¿™ç§äº‹æƒ…å½“ç„¶åœ¨å®é™…å¼€å‘ä¸­ç»å¸¸é‡åˆ°ï¼Œæ€ä¹ˆåŠï¼Ÿéš¾é“çœŸçš„åƒä¸‹é¢è¿™æ ·ï¼Ÿ</p><p class="center"><img src="/2018/05/22/å‰ç«¯/React-1/pm&amp;rd.png" alt="PM &amp; RD"></p><p>å½“ç„¶æ˜¯ç”¨æˆ‘ä»¬çš„æŠ€æœ¯å»åº”å¯¹è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚è®©å¼€å‘å˜å¾—æ›´ç®€å•æ›´é«˜æ•ˆï¼ŒåæœŸç»´æŠ¤æ–¹ä¾¿ã€‚ä¸Šåˆæ”¹éœ€æ±‚ä¸‹åˆå‡º Release è¿™æ‰æ˜¯ç§¯æçš„åº”å¯¹æ–¹å¼ğŸŒã€‚</p><p>é‚£ <code>React</code> æœ‰å“ªäº›ä¼˜åŠ¿å‘¢ï¼Ÿ</p><h4 id="1-å¤§åé¼é¼çš„-Virtual-DOM"><a href="#1-å¤§åé¼é¼çš„-Virtual-DOM" class="headerlink" title="1. å¤§åé¼é¼çš„ Virtual DOM"></a>1. å¤§åé¼é¼çš„ Virtual DOM</h4><p>å¯¹æµè§ˆå™¨ä¸­çš„ DOM æ“ä½œå¼€é”€æ˜¯ç‰¹åˆ«å¤§çš„<sup><a href="#qa1">[1]</a></sup>ã€‚æ­£å¸¸æƒ…å†µä¸‹ä¸€ä¸ªçŠ¶æ€æ”¹å˜ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹ç½‘é¡µä¸­éœ€è¦æ”¹å˜çš„ DOM åšä¸€äº›æ“ä½œã€‚</p><p>ç„¶è€Œå¹³å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼ˆæˆ‘ï¼‰å‡ ä¹ä¸è€ƒè™‘å¯¹ DOM æ“ä½œæœ‰ä»€ä¹ˆå¤§çš„å¼€é”€ã€‚è€Œ React ä¼šå¸®åŠ©æˆ‘ä»¬åšè¿™äº›äº‹æƒ…ï¼Œç”¨ React å†…éƒ¨è‡ªå·±çš„ diff ç®—æ³•<sup><a href="#qa2">[2]</a></sup>å¸®åŠ©æˆ‘ä»¬æœ€å°åŒ–çš„æ“ä½œ DOMã€‚</p><h4 id="2-ç»„ä»¶åŒ–"><a href="#2-ç»„ä»¶åŒ–" class="headerlink" title="2. ç»„ä»¶åŒ–"></a>2. ç»„ä»¶åŒ–</h4><p>ç»„ä»¶åŒ–å¼€å‘çš„ä¼˜ç‚¹æƒ³æ¥ä¸ç”¨å¤šè¯´ã€‚</p><p>é«˜å¤ç”¨ï¼ŒUI ä¸ ä¸šåŠ¡ä½è€¦åˆã€‚ <code>React</code> é€šè¿‡å°†æ¯ä¸ªåŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹çš„æ¨¡å—å®šä¹‰æˆç»„ä»¶ï¼Œé€šè¿‡ç»„ä»¶çš„ç»„åˆåµŒå¥—çš„æ–¹å¼æ„æˆå¤§çš„ç»„ä»¶ï¼Œå®Œæˆæ•´ä½“æ„ç­‘ã€‚</p><p>å°±åƒæ˜¯ç Œæˆ¿å­ä¸€æ ·ã€‚çª—æˆ·æ˜¯çª—æˆ·ï¼Œé—¨æ˜¯é—¨ï¼Œå¢™æ˜¯å¢™ï¼Œä¸‰è€…ç‹¬ç«‹ä¹Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸œè¥¿ï¼Œä¸‰è€…ç»„åˆèµ·æ¥æ„æˆæˆ¿å±‹ã€‚ï¼ˆå®¶å¾’å››å£ï¼‰</p><p><code>React</code> çš„ç»„ä»¶åŒ–ä½¿å¾—å¼€å‘å˜å¾—æ›´åŠ æ–¹ä¾¿ï¼Œå¯ç»´æŠ¤ï¼Œä½¿å¾—ä»£ç å¤ç”¨ç‡æ›´é«˜ã€‚ä¸€åˆ‡éƒ½æ˜¯ componentã€‚</p><h4 id="3-æ•°æ®ç»‘å®š"><a href="#3-æ•°æ®ç»‘å®š" class="headerlink" title="3. æ•°æ®ç»‘å®š"></a>3. æ•°æ®ç»‘å®š</h4><p><code>React</code> çš„æ•°æ®ç»‘å®šæ˜¯å•å‘çš„ã€‚æ•°æ®å’Œè§†å›¾è¿›è¡Œäº†ç»‘å®šï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œè§†å›¾è‡ªåŠ¨æ›´æ–°ï¼Œä¸ç”¨å†æ“ä½œï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p><h4 id="â€¦"><a href="#â€¦" class="headerlink" title="â€¦"></a>â€¦</h4><p><strong>å¥½å§å…¶å®ä¹Ÿæ²¡å¤šå°‘ã€‚ç”šè‡³è¯´åªæœ‰ä¸€ç‚¹å°±æ˜¯ç»„ä»¶åŒ–ï¼Œè§£å†³ä¸šåŠ¡ä¸­çš„ç—›ç‚¹ã€‚</strong></p><h2 id="Hello-JSX"><a href="#Hello-JSX" class="headerlink" title="Hello JSX"></a>Hello JSX</h2><p><strong>JSX</strong> è¯­æ³•ï¼Œåƒæ˜¯åœ¨ <code>JavaScript</code> ä»£ç é‡Œç›´æ¥å†™ <em>XML</em> çš„è¯­æ³•ï¼Œå®è´¨ä¸Šè¿™åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæ¯ä¸€ä¸ª <em>XML</em> æ ‡ç­¾éƒ½ä¼šè¢« <strong>JSX</strong> è½¬æ¢å·¥å…·è½¬æ¢æˆçº¯ <code>JavaScript</code> ä»£ç ï¼ŒReact å®˜æ–¹æ¨èä½¿ç”¨ <strong>JSX</strong> ï¼Œ å½“ç„¶ä½ æƒ³ç›´æ¥ä½¿ç”¨çº¯ <code>JavaScript</code> ä»£ç å†™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯ä½¿ç”¨ <strong>JSX</strong> ï¼Œç»„ä»¶çš„ç»“æ„å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»çœ‹ä¸Šå»æ›´åŠ æ¸…æ™°ã€‚</p><pre><code class="JavaScript">//ä½¿ç”¨JSXReact.render(    &lt;div&gt;        &lt;div&gt;            &lt;div&gt;content&lt;/div&gt;        &lt;/div&gt;    &lt;/div&gt;,    document.getElementById(&#39;example&#39;));//ä¸ä½¿ç”¨JSXReact.render(    React.createElement(&#39;div&#39;, null,        React.createElement(&#39;div&#39;, null,            React.createElement(&#39;div&#39;, null, &#39;content&#39;)        )    ),    document.getElementById(&#39;example&#39;));</code></pre><p>å…¶å®æˆ‘ä»¬åœ¨ <strong>JSX</strong> é‡Œå†™ä¸€ä¸ª <em>XML</em> æ ‡ç­¾ï¼Œå°±æ˜¯åœ¨è°ƒç”¨ <code>React.createElement</code> è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ª <code>ReactElement</code> å¯¹è±¡ã€‚</p><h3 id="JSX-ä¸­åµŒå…¥è¡¨è¾¾å¼"><a href="#JSX-ä¸­åµŒå…¥è¡¨è¾¾å¼" class="headerlink" title="JSX ä¸­åµŒå…¥è¡¨è¾¾å¼"></a>JSX ä¸­åµŒå…¥è¡¨è¾¾å¼</h3><p>å¯ä»¥ç”¨èŠ±æ‹¬å·æŠŠä»»æ„çš„ <code>JavaScript è¡¨è¾¾å¼</code> åµŒå…¥åˆ° <strong>JSX</strong> ã€‚</p><pre><code class="JavaScript">function formatName(user) {    return user.firstName + &#39; &#39; + user.lastName;}const user = {    firstName: &#39;Harper&#39;,    lastName: &#39;Perez&#39;};const ele = (    &lt;h1&gt; Hello, {formatName(user)}!&lt;/h1&gt;);ReactDOM.render(    ele,    document.getElementById(&#39;root&#39;));</code></pre><h3 id="JSX-ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼"><a href="#JSX-ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼" class="headerlink" title="JSX ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼"></a>JSX ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</h3><p>ç¼–è¯‘ä¹‹åï¼Œ<strong>JSX</strong> è¡¨è¾¾å¼å°±å˜æˆäº†å¸¸è§„çš„ <code>JavaScript å¯¹è±¡</code></p><p>è¿™æ„å‘³ç€å¯ä»¥åœ¨ <code>if</code> è¯­å¥æˆ–æ˜¯ <code>for</code> å¾ªç¯ä¸­ä½¿ç”¨ <strong>JSX</strong> ï¼Œç”¨å®ƒç»™å˜é‡èµ‹å€¼ï¼Œå½“åšå‚æ•°æ¥æ”¶ï¼Œæˆ–åˆ™ä½œä¸ºå‡½æ•°è¿”å›å€¼ã€‚</p><pre><code class="JavaScript">function getGreeting(user) {    if (user) {        return &lt;h1&gt;Hello, {formatName(user)}!&lt;/h1&gt;    }    return &lt;h1&gt;Hello, Stranger.&lt;/h1&gt;}</code></pre><h3 id="ç”¨-JSX-æŒ‡å®šå±æ€§å€¼"><a href="#ç”¨-JSX-æŒ‡å®šå±æ€§å€¼" class="headerlink" title="ç”¨ JSX æŒ‡å®šå±æ€§å€¼"></a>ç”¨ JSX æŒ‡å®šå±æ€§å€¼</h3><p>å¯ä»¥ä½¿ç”¨åŒå¼•å·æ¥æŒ‡å®šå­—ç¬¦ä¸²å­—é¢é‡ä½œä¸ºå±æ€§å€¼ï¼š</p><pre><code class="Javascript">const element = &lt;div tableIndex=&quot;0&quot;&gt;&lt;/div&gt;</code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·åµŒå…¥ä¸€ä¸ª JavaScript è¡¨è¾¾å¼ä½œä¸ºå±æ€§å€¼ï¼š</p><pre><code class="JavaScript">const element = &lt;img src={user.avatarUrl}&gt;&lt;/img&gt;;</code></pre><p><strong><em>JSX ä½¿ç”¨æ—¶åº”è¯¥æ³¨æ„è‡ªé—­åˆï¼Œclass å…³é”®å­—ç”¨ className æ›¿ä»£ï¼Œå•å®¹å™¨åŒ…è£¹ç­‰ã€‚</em></strong></p><h2 id="Components-amp-Props"><a href="#Components-amp-Props" class="headerlink" title="Components &amp; Props"></a>Components &amp; Props</h2><p>ç»„ä»¶åŒ–å°† UI åˆ†ä¸ºä¸€ä¸ªä¸ªç‹¬ç«‹å¯å¤ç”¨çš„å°éƒ¨ä»¶ã€‚</p><h3 id="å‡½æ•°å¼ç»„ä»¶å’Œç±»ç»„ä»¶"><a href="#å‡½æ•°å¼ç»„ä»¶å’Œç±»ç»„ä»¶" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶å’Œç±»ç»„ä»¶"></a>å‡½æ•°å¼ç»„ä»¶å’Œç±»ç»„ä»¶</h3><p>å®šä¹‰ç»„ä»¶çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯å†™ä¸€ä¸ª JavaScript å‡½æ•°æˆ–æ˜¯ç”¨ ES6 æ¥å®šä¹‰ä¸€ä¸ªç»„ä»¶ã€‚</p><p>ä¸‹é¢è¿™ä¸¤ç§ç»„ä»¶åœ¨ <code>React</code> çœ‹æ¥æ˜¯ç­‰ä»·çš„ã€‚ï¼ˆæ³¨æ„ä¸‹é¢ç»„ä»¶çš„å‘½åï¼Œé¦–å­—æ¯å¤§å†™ï¼‰</p><pre><code class="JavaScript">function Welcome(props) {    return &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;;}</code></pre><pre><code class="JavaScript">class Welcome extends React.Component {    constructor(props) {        super(props);    }    render() {        return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;;    }}</code></pre><h3 id="æ¸²æŸ“ä¸€ä¸ªç»„ä»¶"><a href="#æ¸²æŸ“ä¸€ä¸ªç»„ä»¶" class="headerlink" title="æ¸²æŸ“ä¸€ä¸ªç»„ä»¶"></a>æ¸²æŸ“ä¸€ä¸ªç»„ä»¶</h3><p>React å…ƒç´ å¯ä»¥æ˜¯</p><pre><code class="JavaScript">const element = &lt;div /&gt;;</code></pre><p>ä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç»„ä»¶</p><pre><code class="JavaScript">const element = &lt;Welcome name=&quot;Sara&quot; /&gt;; //æ³¨æ„è‡ªé—­åˆ</code></pre><p>å…¶ä¸­ JSX çš„å±æ€§ä»¥ä¸€ä¸ªå•ç‹¬å¯¹è±¡ <code>props</code> ä¼ é€’ç»™å¯¹åº”çš„ç»„ä»¶ã€‚</p><p><strong><em>Note: <code>props</code> æ˜¯åªè¯»çš„ï¼ŒReact ç»„ä»¶éƒ½å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œå¹¶ä¸”ç¦æ­¢ä¿®æ”¹è‡ªèº« propsã€‚</em></strong></p><h2 id="çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ"><a href="#çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ"></a>çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ</h2><p>æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªç»„ä»¶æ¯ç§’ä¼šæ›´æ–°æ—¶é—´</p><pre><code class="JavaScript">class Clock extends React.Component {    constructor(props) {        super(props);        this.state = {            date: new Date(),            name: &quot;Sara&quot;        };    }    componentDidMount() {        this.timerID = setInterval(            () =&gt; this.tick(),            1000        );    }    componentWillUnmount() {        clearInterval(this.timerID);    }    tick() {        this.setState({date: new Date()})    }    render() {        return (            &lt;div&gt;                &lt;h1&gt;Hello, {this.state.name}.&lt;/h1&gt;                &lt;h2&gt;Time is {this.state.date.toLocalTimeString()}.&lt;/h2&gt;            &lt;/div&gt;        );    }}</code></pre><h3 id="state"><a href="#state" class="headerlink" title="state"></a>state</h3><p>å…³äº state æœ‰ä¸‹é¢å‡ ç‚¹è¦æ³¨æ„</p><h4 id="1-ä¸è¦ç›´æ¥ä¿®æ”¹-state-è€Œæ˜¯è°ƒç”¨-setState-å»æ›´æ–°"><a href="#1-ä¸è¦ç›´æ¥ä¿®æ”¹-state-è€Œæ˜¯è°ƒç”¨-setState-å»æ›´æ–°" class="headerlink" title="1. ä¸è¦ç›´æ¥ä¿®æ”¹ state è€Œæ˜¯è°ƒç”¨ setState å»æ›´æ–°"></a>1. ä¸è¦ç›´æ¥ä¿®æ”¹ state è€Œæ˜¯è°ƒç”¨ setState å»æ›´æ–°</h4><pre><code class="JavaScript">this.state.name = &quot;Bob&quot;; // é”™è¯¯ï¼Œè¿™æ ·è§†å›¾ä¸ä¼šæ›´æ–°this.setState({name: &quot;Bob&quot;}); // OK</code></pre><h4 id="2-state-æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„"><a href="#2-state-æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„" class="headerlink" title="2. state æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„"></a>2. state æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„</h4><p>React ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ä¼šå°†å¤šä¸ª <code>setState()</code> è°ƒç”¨åˆå¹¶ã€‚</p><p><code>this.props</code> å’Œ <code>this.state</code> å¯èƒ½æ˜¯å¼‚æ­¥æ›´æ–°ï¼Œæ‰€ä»¥ä¸èƒ½ä¾èµ–ä»–ä»¬çš„å€¼å»è®¡ç®—ä¸‹ä¸€ä¸ª <strong>state</strong></p><pre><code class="JavaScript">this.setState({    counter: this.state.counter + this.props.increment // å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°å¤±è´¥});/* è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å¦ä¸€ç§ setState çš„å½¢å¼ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°å°†æ¥æ”¶å‰ä¸€ä¸ªçŠ¶æ€ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåº”ç”¨æ›´æ–°æ—¶çš„ prop ä½œä¸ºç¬¬äºŒä¸ªå‚æ•° */this.setState((prevState, props) =&gt; ({    couter: prevSatete.counter + props.increment //OK}))</code></pre><h3 id="ç”Ÿå‘½å‘¨æœŸ-lifecycle"><a href="#ç”Ÿå‘½å‘¨æœŸ-lifecycle" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ lifecycle"></a>ç”Ÿå‘½å‘¨æœŸ lifecycle</h3><p>å—¯å“¼ï¼Œä¸€å›¾èƒœåƒè¨€ã€‚</p><p class="center"><img src="/2018/05/22/å‰ç«¯/React-1/component-lifecycle.jpg" alt="ç”Ÿå‘½å‘¨æœŸ"></p><p class="center">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</p><h2 id="React-çš„æ•°æ®æµå’Œç»„ä»¶é—´çš„é€šä¿¡"><a href="#React-çš„æ•°æ®æµå’Œç»„ä»¶é—´çš„é€šä¿¡" class="headerlink" title="React çš„æ•°æ®æµå’Œç»„ä»¶é—´çš„é€šä¿¡"></a>React çš„æ•°æ®æµå’Œç»„ä»¶é—´çš„é€šä¿¡</h2><p>React æ˜¯å•å‘æ•°æ®æµï¼Œæ•°æ®ä¸»è¦ä»çˆ¶èŠ‚ç‚¹ä¼ é€’åˆ°å­èŠ‚ç‚¹ ï¼ˆ<em>props</em>ï¼‰</p><p>å¦‚æœçˆ¶çº§çš„æŸä¸ª <em>props</em> æ”¹å˜äº†ï¼ŒReact ä¼šé‡æ–°æ¸²æŸ“æ‰€æœ‰çš„å­èŠ‚ç‚¹ã€‚</p><p><strong>props å’Œ state</strong></p><p>å°½å¯èƒ½ä½¿ç”¨ <code>props</code> å½“åšæ•°æ®æºï¼Œ <code>state</code> ç”¨æ¥å­˜æ”¾çŠ¶æ€å€¼</p><p>å³é€šå¸¸ç”¨ <code>props</code> ä¼ é€’å¤§é‡æ•°æ®ï¼Œ <code>state</code> ç”¨äºå­˜æ”¾ç»„ä»¶å†…éƒ¨ä¸€äº›ç®€å•çš„å®šä¹‰æ•°æ®ã€‚</p><h3 id="é‚£ä¹ˆç»„ä»¶é—´æ˜¯æ€ä¹ˆé€šä¿¡çš„å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆç»„ä»¶é—´æ˜¯æ€ä¹ˆé€šä¿¡çš„å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆç»„ä»¶é—´æ˜¯æ€ä¹ˆé€šä¿¡çš„å‘¢ï¼Ÿ"></a>é‚£ä¹ˆç»„ä»¶é—´æ˜¯æ€ä¹ˆé€šä¿¡çš„å‘¢ï¼Ÿ</h3><p>ç»„ä»¶é—´é€šä¿¡æ–¹å¼ä¹Ÿå°±é‚£ä¹ˆå‡ ç§</p><ul><li>props</li><li>props å›è°ƒ</li><li>context å¯¹è±¡</li><li>äº‹ä»¶è®¢é˜…</li></ul><h4 id="1-çˆ¶å­ç»„ä»¶é€šä¿¡"><a href="#1-çˆ¶å­ç»„ä»¶é€šä¿¡" class="headerlink" title="1. çˆ¶å­ç»„ä»¶é€šä¿¡"></a>1. çˆ¶å­ç»„ä»¶é€šä¿¡</h4><ul><li><strong>çˆ¶ç»„ä»¶æ›´æ–°çŠ¶æ€ â€”â€” props â€”â€”&gt; å­ç»„ä»¶æ›´æ–°</strong></li><li><strong>å­ç»„ä»¶æ›´æ–°  â€”â€” props å›è°ƒ â€”â€”&gt; è°ƒç”¨å›è°ƒå‡½æ•°æ›´æ–°</strong></li></ul><h4 id="2-å…„å¼Ÿç»„ä»¶é€šä¿¡"><a href="#2-å…„å¼Ÿç»„ä»¶é€šä¿¡" class="headerlink" title="2. å…„å¼Ÿç»„ä»¶é€šä¿¡"></a>2. å…„å¼Ÿç»„ä»¶é€šä¿¡</h4><ul><li><strong>å…„å¼Ÿç»„ä»¶æ›´æ–°  â€”â€” props å›è°ƒ â€”â€”&gt; è°ƒç”¨å›è°ƒå‡½æ•°æ›´æ–°</strong></li><li><strong>contextæ–¹å¼æ›´æ–°</strong></li><li><strong>äº‹ä»¶è®¢é˜…</strong></li></ul><h2 id="å¤„ç†äº‹ä»¶"><a href="#å¤„ç†äº‹ä»¶" class="headerlink" title="å¤„ç†äº‹ä»¶"></a>å¤„ç†äº‹ä»¶</h2><p>React å¤„ç†äº‹ä»¶ä¸åœ¨ DOM å…ƒç´ ä¸Šå¤„ç†äº‹ä»¶çš„åŒºåˆ«</p><ul><li>React äº‹ä»¶ä½¿ç”¨é©¼å³°å‘½åï¼Œè€Œä¸æ˜¯å…¨å°å†™ã€‚</li><li>é€šè¿‡ JSX ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚</li><li>é˜»æ­¢é»˜è®¤è¡Œä¸ºå¿…é¡»æ˜ç¡®è°ƒç”¨ <em>preventDeafult</em> è€Œä¸æ˜¯ <em>return false</em>ã€‚</li></ul><pre><code class="JavaScript">class Toggle extends React.Component {    constructor(props) {    super(props);        this.state = {isToggleOn: true};        // è¿™ä¸ªç»‘å®šæ˜¯å¿…è¦çš„ï¼Œä½¿`this`åœ¨å›è°ƒä¸­èµ·ä½œç”¨        this.handleClick = this.handleClick.bind(this);    }    handleClick() {        this.setState(prevState =&gt; ({            isToggleOn: !prevState.isToggleOn        }));    }    render() {        return (            &lt;button onClick={this.handleClick}&gt;                {this.state.isToggleOn ? &#39;ON&#39; : &#39;OFF&#39;}            &lt;/button&gt;        );    }}ReactDOM.render(    &lt;Toggle /&gt;,    document.getElementById(&#39;root&#39;));</code></pre><p><strong>åœ¨ JSX å›è°ƒä¸­å¿…é¡»æ³¨æ„ <em>this</em> çš„æŒ‡å‘é—®é¢˜(line 7)</strong></p><h2 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h2><p><a href="https://reactjs.org/docs/conditional-rendering.html" target="_blank" rel="noopener">è®²çœŸæ²¡ä»€ä¹ˆå¯å†™çš„ï¼Œä¸¢ä¸ªé“¾æ¥å§ã€‚</a></p><h2 id="Lists-amp-Key"><a href="#Lists-amp-Key" class="headerlink" title="Lists &amp; Key"></a>Lists &amp; Key</h2><p>JavaScript ä¸­è½¬æ¢åˆ—è¡¨</p><pre><code class="JavaScript">const number = [1, 2, 3, 4, 5];const double = number.map((number) =&gt; number * 2);</code></pre><p>åœ¨ React ä¸­ è½¬æ¢æ•°ç»„ä¸ºå…ƒç´ åˆ—è¡¨çš„æ–¹å¼å’Œä¸Šè¿°æ–¹æ³•åŸºæœ¬ç›¸åŒ</p><h3 id="å¤šç»„ä»¶æ¸²æŸ“"><a href="#å¤šç»„ä»¶æ¸²æŸ“" class="headerlink" title="å¤šç»„ä»¶æ¸²æŸ“"></a>å¤šç»„ä»¶æ¸²æŸ“</h3><pre><code class="JavaScript">const number = [1, 2, 3, 4, 5];const listItems = number.map((number) =&gt; &lt;li&gt;{number}&lt;/li&gt;);ReactDOM.render(    &lt;ul&gt;{listItems}&lt;/ul&gt;,    document.getElementById(&#39;root&#39;))</code></pre><h3 id="åŸºæœ¬åˆ—è¡¨ç»„ä»¶"><a href="#åŸºæœ¬åˆ—è¡¨ç»„ä»¶" class="headerlink" title="åŸºæœ¬åˆ—è¡¨ç»„ä»¶"></a>åŸºæœ¬åˆ—è¡¨ç»„ä»¶</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸€ä¸ªç»„ä»¶ä¸­æ¸²æŸ“åˆ—è¡¨ï¼Œé‡æ„å‰é¢çš„ä¾‹å­åˆ°ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæ¥å—ä¸€ä¸ª numbers æ•°ç»„ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªå…ƒç´ çš„æ— åºåˆ—è¡¨ã€‚</p><pre><code class="JavaScript">function NumberList(props) {  const numbers = props.numbers;  const listItems = numbers.map((number) =&gt;    &lt;li key={number.toString()}&gt;      {number}    &lt;/li&gt;  );  return (    &lt;ul&gt;{listItems}&lt;/ul&gt;  );}const number = [1, 2, 3, 4, 5];ReactDOM.render(    &lt;NumberList numbers={numbers} /&gt;,    document.getElementById(&#39;root&#39;))</code></pre><p><strong>æ³¨æ„ç¬¬4è¡ŒåŠ ä¸Šäº† <em>key</em> å¦‚æœä¸åŠ çš„è¯ä¼šæœ‰ä¸€ä¸ª Wraning: a key should be provided for list items</strong></p><h3 id="Keys"><a href="#Keys" class="headerlink" title="Keys"></a>Keys</h3><p>é”®(Keys) å¸®åŠ© React æ ‡è¯†å“ªä¸ªé¡¹è¢«ä¿®æ”¹ã€æ·»åŠ æˆ–è€…ç§»é™¤äº†ã€‚æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åº”è¯¥æœ‰ä¸€ä¸ªå”¯ä¸€ä¸å˜çš„é”®(Keys)æ¥æ ‡å¿—</p><p>æŒ‘é€‰ key æœ€å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸€ä¸ªåœ¨å®ƒçš„åŒè¾ˆå…ƒç´ ä¸­ä¸é‡å¤çš„æ ‡è¯†å­—ç¬¦ä¸²ã€‚å¤šæ•°æƒ…å†µä½ å¯ä»¥ä½¿ç”¨æ•°æ®ä¸­çš„ id ä½œä¸º keys</p><p>å½“è¦æ¸²æŸ“çš„åˆ—è¡¨é¡¹ä¸­æ²¡æœ‰ç¨³å®šçš„ id æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æ•°æ®é¡¹çš„ç´¢å¼•å€¼ä½œä¸º key çš„æœ€åé€‰æ‹©</p><p>è€Œ keys åªåœ¨æ•°ç»„çš„ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨æ„ä¹‰</p><pre><code class="JavaScript">function ListItem(props) {    const value = props.value;    return (        // é”™è¯¯ï¼ä¸éœ€è¦åœ¨è¿™é‡ŒæŒ‡å®š keyï¼š        &lt;li key={value.toString()}&gt;        {value}        &lt;/li&gt;    );}function NumberList(props) {    const numbers = props.numbers;    const listItems = numbers.map((number) =&gt;    // é”™è¯¯ï¼key åº”è¯¥åœ¨è¿™é‡ŒæŒ‡å®šï¼š        &lt;ListItem value={number} /&gt;    );    return (        &lt;ul&gt;        {listItems}        &lt;/ul&gt;    );}const numbers = [1, 2, 3, 4, 5];ReactDOM.render(    &lt;NumberList numbers={numbers} /&gt;,    document.getElementById(&#39;root&#39;));</code></pre><p><strong>é”®æ˜¯Reactçš„ä¸€ä¸ªå†…éƒ¨æ˜ å°„ï¼Œä½†å…¶ä¸ä¼šä½œä¸º <em>props</em> ä¼ é€’ç»™ç»„ä»¶çš„å†…éƒ¨ã€‚å¦‚æœä½ éœ€è¦åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç›¸åŒçš„å€¼ï¼Œå¯ä»¥æ˜ç¡®ä½¿ç”¨ä¸€ä¸ªä¸åŒåå­—çš„ prop ä¼ å…¥ã€‚å¦‚ï¼š</strong></p><pre><code class="JavaScript">const content = posts.map((post) =&gt;    &lt;Post        key={post.id}        id={post.id}        title={post.title} /&gt;);</code></pre><h2 id="æ–°å¼€ä¸€æ -Q-amp-A"><a href="#æ–°å¼€ä¸€æ -Q-amp-A" class="headerlink" title="æ–°å¼€ä¸€æ  Q&amp;A"></a>æ–°å¼€ä¸€æ  Q&amp;A</h2><p>åœ¨å†™æ–‡ç« çš„æ—¶å€™è¿˜æ˜¯ä¼šæœ‰ä¸€äº›åœ°æ–¹ä¸ç†è§£ã€‚æ¯”å¦‚</p><p id="qa1"><a href="https://hongxuwei.github.io/2018/05/29/%E5%89%8D%E7%AB%AF/Why-is-the-DOM-slow/">1. ä¸ºä»€ä¹ˆå¤§å®¶éƒ½è¯´æ“ä½œ DOM å¾ˆæ…¢ï¼Ÿä½ è¯´æ…¢å°±æ…¢å‘€ï¼Ÿæ…¢åœ¨å“ªé‡Œï¼Ÿ</a></p><p id="qa2"><a href="https://hongxuwei.github.io/2018/06/21/%E7%AE%97%E6%B3%95/React-diff-%E7%AE%97%E6%B3%95/">2. Emâ€¦ <code>React</code> çš„å•¥ diff ç®—æ³•ï¼Ÿç®€å•ç‚¹æ€ä¹ˆå®ç°ï¼Ÿå¦‚ä½•é€šè¿‡ diff ç®—æ³•å»ä¼˜åŒ–æˆ‘ä»¬çš„ç»„ä»¶ï¼Ÿ</a></p><p>åç»­ä¼šå¼€æ–°å‘æŠŠè¿™äº›é—®é¢˜ä¸€ä¸€å¼„æ¸…æ¥šã€‚ç„¶åå’Œè¿™é‡Œé“¾æ¥èµ·æ¥ã€‚</p>]]></content>
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ°´å¹³å‚ç›´å±…ä¸­</title>
      <link href="/2018/05/10/%E5%89%8D%E7%AB%AF/%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD/"/>
      <url>/2018/05/10/%E5%89%8D%E7%AB%AF/%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD/</url>
      <content type="html"><![CDATA[<h1 id="æ°´å¹³å‚ç›´å±…ä¸­"><a href="#æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="æ°´å¹³å‚ç›´å±…ä¸­"></a>æ°´å¹³å‚ç›´å±…ä¸­</h1><p>ä»Šå¤©çœ‹äº†æ°´å¹³å‚ç›´å±…ä¸­çš„å„ç§å®ç°æ–¹å¼ã€‚</p><p>æˆ‘æ•´ç†æˆäº†æ€ç»´å¯¼å›¾çš„å½¢å¼ã€‚</p><p class="center"><img src="/2018/05/10/å‰ç«¯/æ°´å¹³å‚ç›´å±…ä¸­/æ°´å¹³å‚ç›´å±…ä¸­.png" alt="æ°´å¹³å‚ç›´å±…ä¸­"></p><p>ä¸‹é¢æ˜¯è¿™æ˜¯ xmind æ–‡ä»¶</p><p><a href="æ°´å¹³å‚ç›´å±…ä¸­.xmind">æ°´å¹³å‚ç›´å±…ä¸­.xmind</a></p>]]></content>
      
      <categories>
          
          <category> CSS å±…ä¸­ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> å±…ä¸­ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¸¸ç”¨æ’åºç®—æ³•</title>
      <link href="/2018/05/08/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
      <url>/2018/05/08/%E7%AE%97%E6%B3%95/%E5%B8%B8%E7%94%A8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>å¯¹äºJSå®ç°æ’åºçš„ <code>åŠŸèƒ½</code> æ¥è¯´æœ¬ä¸éœ€è¦ä»€ä¹ˆç®—æ³•ã€‚å°±ç”¨è‡ªå¸¦çš„å‡½æ•°<br> <code>Array.sort()</code> ç„¶åæŒ‡å®šå¤„ç†å‡½æ•°å°±å¥½äº†ã€‚<br>å¦‚ä¸‹ï¼š</p><pre><code class="JavaScript">arr.sort(function (i, j){    return i - j;});</code></pre><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><pre><code class="JavaScript">function bubbleSort(arr) {    var len = arr.length,    i, j, tmp;    for (i = 0; i &lt; len; i++) {        for (j = 0; j &lt; len - 1 - i; j++) {             if (arr[j+1] &lt; arr[j]) {                tmp = arr[j];                arr[j] = arr[j+1];                arr[j+1] = tmp;            }        }    }    return arr;}</code></pre><h2 id="è¿›åŒ–ç‰ˆ"><a href="#è¿›åŒ–ç‰ˆ" class="headerlink" title="è¿›åŒ–ç‰ˆ"></a>è¿›åŒ–ç‰ˆ</h2><pre><code class="JavaScript">function bubbleSort(arr) {    var i = arr.length - 1,    j, pos, tmp;    while (i &gt; 0) {        pos = 0;        for (j = 0; j &lt; i; j++) {            if (arr[j] &gt; arr[j+1]) {                pos = j;                tmp = arr[j + 1];                arr[j + 1] = arr[j];                arr[j] = tmp;            }        }    }    return arr;}</code></pre><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><p>æ¯æ¬¡å¾ªç¯æ‰¾å‡ºå½“å‰æœ€å°çš„æ•°å­—</p><pre><code class="JavaScript">function selectionSort(arr) {    var  len = arr.len,    i, j, minNumIndex;    for (i = 0 ; i &lt; len; i++) {        minNumIndex = i;        for ( j = i + 1; j &lt; len; j++) {            if (arr[j] &lt; arr[minNumIndex]) {                minNumIndex = j;            }        }        tmp = arr[j];        arr[i] = arr[minNumIndex];        arr[minNumIndex] = tmp;    }    return arr;}</code></pre><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><pre><code class="JavaScript">function insertionSort(arr) {    var len = arr.length,    i, j, key;    for (i = 1; i &lt; leng; i++) {        key = arr[i];        j = i - 1;        while (arr[j + 1] &gt; key) {            arr[j + 1] = arr[j];            j--;        }        arr[j + 1] = key;    }    return arr;}</code></pre><h2 id="äºŒåˆ†æ’å…¥æ’åº"><a href="#äºŒåˆ†æ’å…¥æ’åº" class="headerlink" title="äºŒåˆ†æ’å…¥æ’åº"></a>äºŒåˆ†æ’å…¥æ’åº</h2><pre><code class="JavaScript">function instertionSortDichotomy(arr) {    var len = arr.length,    i, j, tmp, low, high, mid;    for ( i = 1; i &lt; len; i++) {        tmp = arr[i];        low = 0;        high = i - 1;        while (low &lt;= high) {            mid = parseInt((low + high) / 2, 10);            if (tmp &lt; arr[mid]){                hight = mid - 1;            } else {                low = mid + 1;            }        }        for(j = i - 1; j &gt;= high + 1; j--) {            arr[j + 1] = arr[j];        }        arr[j + 1] = tmp;    }    return arr;}</code></pre><h2 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h2><p>å…ˆå°†æ•´ä¸ªå¾…æ’åºè®°å½•åºåˆ—åˆ†å‰²æˆè‹¥å¹²ä¸ªå­åºåˆ—<br>åœ¨åºåˆ—å†…åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—åŸºæœ¬æœ‰åºæ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¸€æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚</p><pre><code class="JavaScript">function shellSort() {    var len = arr.length,    gap = parseInt(len / 2),    i, j, tmp,    while (gap &gt; 0) {        for (i = gap; i &lt; len; i++) {            tmp = arr[i];            j = i - gap;            while (j &gt;= 0 &amp;&amp; tmp &lt; arr[j]) {                arr[j + gap] = arr[j];                j = j - gap;            }            arr[j + gap] = tmp;        }        gap = parseInt(gap / 2);    }    return arr;}</code></pre><h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><pre><code class="JavaScript">function mergeSort(arr) {    var len = arr.length,    middle, left, right;    if (len &lt; 2) {        return arr;    }    middle = Math.floor(len / 2);    left = arr.slice(0, middle);    right = arr.slice(middle);    return merge(mergeSort(left), mergeSort(right));}function merge(left, right) {    var result = [];    while(left.length &amp;&amp; right.length) {        if(left[0] &lt;= right[0]) {            result.push(left.shift());        } else {            result.push(right.shift());        }    }    while(left.length) {        result.push(left.shift());    }    while(right.length) {        result.push(reight.shift());    }    return result;}</code></pre><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><pre><code class="JavaScript">function quickSort(arr, left, right) {    var x, i, j, tmp;    if (left &lt; right) {        x = arr[right];        i = left - 1;        for (j = left; j &lt;= right; j++) {            if (arr[j] &lt;= x) {                i++                tmp = arr[i];                arr[i] = arr[j];                arr[j] = tmp;            }        }        quickSort(arr, left, i - 1);        quickSort(arr, i + 1, right);    }    return arr;}</code></pre><h2 id="å½¢è±¡ç‰ˆå¿«é€Ÿæ’åº"><a href="#å½¢è±¡ç‰ˆå¿«é€Ÿæ’åº" class="headerlink" title="å½¢è±¡ç‰ˆå¿«é€Ÿæ’åº"></a>å½¢è±¡ç‰ˆå¿«é€Ÿæ’åº</h2><pre><code class="JavaScript">function quickSort(arr) {    if(arr.length &lt;= 1) {        return arr;    }    var pivotIndex = Math.floor(arr.length / 2),    pivot = arr.splice(pivotIndex, 1)[0],    left = [],    right = [],    i;    for (i = 0; i &lt; arr.length; i++) {        if (arr[i] &lt; pivot) {            left.push(arr[i])        } else {            right.push(arr[i])        }    }    return quickSort(left).concat([pivot], quickSort(right));}</code></pre><p>ç–‘æƒ‘ï¼Ÿ</p><p>ä¸ºä»€ä¹ˆæŠŠ <code>arr.length</code> æ”¹ä¸º <code>var len = arr.length;</code> ç„¶åç”¨ <code>len</code> ç»Ÿä¸€æ›¿æ¢å°±ä¼šå‡ºç°æº¢å‡º <code>Maximum call stack size exceeded</code></p>]]></content>
      
      <categories>
          
          <category> JavaScript ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç½‘é¡µåŠ è½½ä¼˜åŒ–</title>
      <link href="/2018/05/04/%E5%89%8D%E7%AB%AF/%E7%BD%91%E9%A1%B5%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2018/05/04/%E5%89%8D%E7%AB%AF/%E7%BD%91%E9%A1%B5%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<h1 id="ç½‘é¡µåŠ è½½é€Ÿåº¦ä¼˜åŒ–"><a href="#ç½‘é¡µåŠ è½½é€Ÿåº¦ä¼˜åŒ–" class="headerlink" title="ç½‘é¡µåŠ è½½é€Ÿåº¦ä¼˜åŒ–"></a>ç½‘é¡µåŠ è½½é€Ÿåº¦ä¼˜åŒ–</h1><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ€è¿‘åšé¡¹ç›®çš„æ—¶å€™ï¼ŒåŸæœ¬æ‰“å¼€æ¯”è¾ƒå¿«çš„ç½‘é¡µç”±äº CUP çš„æ€§èƒ½é—®é¢˜å¯¼è‡´ä¸€æ ·çš„ä»£ç åœ¨å¦ä¸€å—èŠ¯ç‰‡ä¸Šæ‰“å¼€é€Ÿåº¦æ˜æ˜¾å˜æ…¢ã€‚</p><p>è¿™å¥—ä»£ç æ˜¯å°æ¹¾çš„åŒäº‹åšçš„ï¼Œç”±äºæŸäº›åŸå› åšäº†ä¸€åŠè½¬æ¥åˆ°æˆ‘ä»¬æ‰‹ä¸Šã€‚åŸæœ¬ <code>Broadcom</code> èŠ¯ç‰‡çš„æœºå™¨ç½‘é¡µæ‰“å¼€é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œæ¢åˆ°åªæœ‰ä»– <code>1/4</code> å¤„ç†é€Ÿåº¦çš„ <code>Realtek</code> èŠ¯ç‰‡çš„æœºå™¨ä¸Šé¦–å±åŠ è½½ç™½å±æ—¶é—´å˜å¾—æ¯”è¾ƒé•¿ï¼Œè¿™æ‰å¼€å§‹ä¼˜åŒ–ç½‘é¡µä»£ç ç»“æ„ã€‚</p><p>ä½†æ˜¯ç½‘é¡µä¼˜åŒ–æŠ€å·§æ˜¯ç›¸åŒçš„ã€‚æ‰€ä»¥è¿™é‡Œä¹ŸæŠŠäº†è§£çš„ä¸€äº›ç½‘é¡µä¼˜åŒ–çš„æŠ€å·§åšä¸€ä¸ªæ•´ç†ã€‚</p><h2 id="é›…è™ç½‘é¡µä¼˜åŒ–å®ˆåˆ™"><a href="#é›…è™ç½‘é¡µä¼˜åŒ–å®ˆåˆ™" class="headerlink" title="é›…è™ç½‘é¡µä¼˜åŒ–å®ˆåˆ™"></a>é›…è™ç½‘é¡µä¼˜åŒ–å®ˆåˆ™</h2><h3 id="å†…å®¹éƒ¨åˆ†"><a href="#å†…å®¹éƒ¨åˆ†" class="headerlink" title="å†…å®¹éƒ¨åˆ†"></a>å†…å®¹éƒ¨åˆ†</h3><h4 id="1-å°½é‡å‡å°‘HTTPè¯·æ±‚æ¬¡æ•°"><a href="#1-å°½é‡å‡å°‘HTTPè¯·æ±‚æ¬¡æ•°" class="headerlink" title="1. å°½é‡å‡å°‘HTTPè¯·æ±‚æ¬¡æ•°"></a>1. å°½é‡å‡å°‘HTTPè¯·æ±‚æ¬¡æ•°</h4><p><code>HTTP</code> è¯·æ±‚çš„åŸç†å°±ä¸åœ¨è¿™é‡Œå±•å¼€ç»†è¯´ï¼Œæ€»ä¹‹æ¯ä¸€æ¬¡çš„ <code>HTTP</code> å¦‚æœæ²¡æœ‰ <code>Connection: keep-alive</code> çš„è¯ï¼Œå°±æ˜¯é‡æ–°å»ºç«‹ä¸€æ¬¡ <code>TCP</code>ã€‚è¿™ä¸ªå¼€é”€æ˜¯å¯ä»¥é™ä½çš„ã€‚(ä½¿ç”¨ <code>Connection: keep-alive</code> å»ºç«‹ä¸€æ¬¡ <code>TCP</code> è¿æ¥ä¹‹åä¸€ç›´ä½¿ç”¨è¯¥è¿æ¥ä¿æŒä¼šè¯ã€‚ç›´åˆ°è¿æ¥å…³é—­ã€‚)</p><p>ç½‘é¡µçš„åŠ è½½é€Ÿåº¦ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨ä¸‹è½½æˆ–æ˜¯ç­‰å¾…ä¸‹è½½é¡µé¢ä¸Šçš„ä¸åŒç»„ä»¶ï¼šå›¾ç‰‡ï¼Œæ ·å¼ï¼Œè„šæœ¬ç­‰ã€‚å‡å°‘è¿™äº›ç»„ä»¶çš„æ•°é‡å°±èƒ½å¤Ÿå‡å°‘é¡µé¢ <code>HTTP</code> æ•°é‡ã€‚</p><p><strong>a. åˆå¹¶æ–‡ä»¶</strong></p><p>å°†cssï¼Œjsæ–‡ä»¶ç­‰åˆå¹¶</p><p><strong>b. ä½¿ç”¨CSS Sprite</strong></p><p>CSS Sprite å‡å°‘å›¾ç‰‡è¯·æ±‚æ•°é‡ï¼Œå¤šç”¨äºè®¸å¤šå°è€Œç¹å¤šçš„ icon å›¾ç‰‡ã€‚å°†å¤šä¸ªå›¾ç‰‡åˆå¹¶ä¸ºåŒä¸€ä¸ªä½¿ç”¨çš„æ—¶å€™ç”¨  <code>background-image</code> å’Œ <code>background-position</code> æ¥æ§åˆ¶å›¾ç‰‡çš„æ˜¾ç¤ºã€‚</p><p><strong>c. Base64 ç¼–ç å›¾ç‰‡</strong></p><p>è¡Œå†…å›¾ç‰‡<code>Base64ç¼–ç </code>ç”¨ img: src: url() çš„æ–¹å¼æŠŠå›¾ç‰‡åµŒå…¥åˆ°é¡µé¢ä¸­ï¼Œè¿™æ ·ä¼šå¢åŠ  css çš„ä½“ç§¯ä½†æ˜¯å‡å°‘äº† <code>HTTP</code> è¯·æ±‚çš„æ•°é‡ã€‚ä½¿ç”¨ Base64 çš„è¿”å›åªé™ä¸€äº›ä½“ç§¯è¾ƒå°çš„å›¾ç‰‡ã€‚å¦‚æœä½“ç§¯è¾ƒå¤§è½¬ä¸º <code>Base64ç¼–ç </code> åçš„ä½“ç§¯è¿œè¿œå¤§äºåŸå›¾ç‰‡ä½“ç§¯ã€‚å°±ä¼šé€‚å¾—å…¶åã€‚æ‰€ä»¥ä¸€èˆ¬æ¥è¯´è½¬ç åè¶…è¿‡ 1kï¼ˆå–å†³äºä½ å›¢é˜Ÿå¯¹äºcss/js ä½“ç§¯å’Œå¯¹å‡å°‘ HTTP è¯·æ±‚å¸¦æ¥çš„æ•ˆç›Šçš„æƒè¡¡ï¼‰å°±ä¸å¤ªé€‚åˆ <code>Base64ç¼–ç </code>ã€‚</p><h4 id="2-å‡å°‘-DNS-æŸ¥æ‰¾"><a href="#2-å‡å°‘-DNS-æŸ¥æ‰¾" class="headerlink" title="2. å‡å°‘ DNS æŸ¥æ‰¾"></a>2. å‡å°‘ DNS æŸ¥æ‰¾</h4><p>æµè§ˆå™¨ DNS çš„æŸ¥æ‰¾é¡ºåºæ˜¯ æµè§ˆå™¨ç¼“å­˜ â†’ ç³»ç»Ÿç¼“å­˜ â†’ è·¯ç”±å™¨ç¼“å­˜ â†’ ISPï¼ˆäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼‰DNSç¼“å­˜ â†’ æ ¹æœåŠ¡å™¨ â†’ é¡¶çº§åŸŸåæœåŠ¡å™¨ â†’ ä¸»åŸŸåæœåŠ¡å™¨ â†’ ä¿å­˜ç»“æœ</p><p>å…·ä½“è§£æè¿‡ç¨‹å¯ä»¥åç»­å†å¼€ä¸€æ–‡ã€‚</p><p>å‡å°‘ä¸åŒä¸»æœºåçš„æ•°é‡åŒæ—¶ä¹Ÿå‡å°‘äº†é¡µé¢èƒ½å¤Ÿå¹¶è¡Œä¸‹è½½çš„ç»„ä»¶æ•°é‡ï¼Œé¿å…DNSæŸ¥æ‰¾å‰Šå‡äº†å“åº”æ—¶é—´ï¼Œè€Œå‡å°‘å¹¶è¡Œä¸‹è½½æ•°é‡å´å¢åŠ äº†å“åº”æ—¶é—´ã€‚æˆ‘çš„åŸåˆ™æ˜¯æŠŠç»„ä»¶åˆ†æ•£åœ¨2åˆ°4ä¸ªä¸»æœºåä¸‹ï¼Œè¿™æ˜¯åŒæ—¶å‡å°‘DNSæŸ¥æ‰¾å’Œå…è®¸é«˜å¹¶å‘ä¸‹è½½çš„æŠ˜ä¸­æ–¹æ¡ˆã€‚</p><h4 id="3-é¿å…é‡å®šå‘"><a href="#3-é¿å…é‡å®šå‘" class="headerlink" title="3. é¿å…é‡å®šå‘"></a>3. é¿å…é‡å®šå‘</h4><p>é‡å®šå‘ç”¨ 301 å’Œ 302 çŠ¶æ€ç ã€‚<br>ä¸‹é¢æ˜¯ 301 çŠ¶æ€ç çš„ HTTP å¤´:</p><pre><code>HTTP/1.1 301 Moved PermanentlyLocation: http://example.com/Content-Type: text/html</code></pre><p>æµè§ˆå™¨ä¼šè‡ªåŠ¨è·³è½¬åˆ° Location åŸŸæŒ‡æ˜çš„ URLã€‚é‡å®šå‘éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨ HTTP å¤´éƒ¨ï¼Œè€Œå“åº”ä½“ä¸€èˆ¬æ˜¯ç©ºçš„ã€‚å…¶å®é¢å¤–çš„ HTTP å¤´æ¯”å¦‚ Expires å’Œ Cache-Control ä¹Ÿè¡¨ç¤ºé‡å®šå‘ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰åˆ«çš„è·³è½¬æ–¹å¼ï¼Œå¦‚ï¼šrefresh å…ƒæ ‡ç­¾å’Œ javascript, ä½†å¦‚æœå¿…é¡»è¦åšé‡å®šå‘ï¼Œæœ€å¥½ç”¨æ ‡å‡†çš„ 3xx HTTP çŠ¶æ€ç ã€‚</p><p>é‡å®šå‘ä¼šé™ä½ç”¨æˆ·ä½“éªŒï¼Œåœ¨ç”¨æˆ·å’Œ HTML æ–‡æ¡£ä¹‹é—´æ’å…¥é‡å®šå‘ä¼šå»¶è¿Ÿé¡µé¢ä¸Šçš„æ‰€æœ‰ä¸œè¥¿ï¼Œé¡µé¢æ— æ³•æ¸²æŸ“ï¼Œç»„ä»¶ä¹Ÿæ— æ³•ä¸‹è½½ï¼Œç›´åˆ°æµè§ˆå™¨å¾—åˆ° HTML æ–‡æ¡£ã€‚</p><h4 id="4-è®©-Ajax-å¯ä»¥ç¼“å­˜"><a href="#4-è®©-Ajax-å¯ä»¥ç¼“å­˜" class="headerlink" title="4. è®© Ajax å¯ä»¥ç¼“å­˜"></a>4. è®© Ajax å¯ä»¥ç¼“å­˜</h4><p>ç¡®ä¿Ajaxè¯·æ±‚å…·æœ‰é•¿ä¹…çš„Expireså¤´</p><h4 id="5-å»¶è¿ŸåŠ è½½ç»„ä»¶"><a href="#5-å»¶è¿ŸåŠ è½½ç»„ä»¶" class="headerlink" title="5. å»¶è¿ŸåŠ è½½ç»„ä»¶"></a>5. å»¶è¿ŸåŠ è½½ç»„ä»¶</h4><p>å°†é¦–é¡µæ¸²æŸ“æ‰€å¿…é¡»çš„ç»„ä»¶åŠ è½½å‡ºæ¥ï¼Œä¸å¿…é¡»çš„ç»„ä»¶åœ¨é¦–é¡µæ¸²æŸ“å®Œæˆåå†åŠ è½½ã€‚</p><h4 id="6-é¢„åŠ è½½ç»„ä»¶"><a href="#6-é¢„åŠ è½½ç»„ä»¶" class="headerlink" title="6. é¢„åŠ è½½ç»„ä»¶"></a>6. é¢„åŠ è½½ç»„ä»¶</h4><p>é€šè¿‡é¢„åŠ è½½ç»„ä»¶ï¼Œåˆ©ç”¨æµè§ˆå™¨ç©ºé—²æ—¶é—´æ¥è¯·æ±‚å°†æ¥ç”¨æˆ·ä¼šç”¨åˆ°çš„ç»„ä»¶ï¼Œå½“ç”¨æˆ·å¼€å§‹è®¿é—®åç»­æ–‡æ¡£æ—¶ï¼Œè¿™äº›ç»„ä»¶å·²ç»è¢«ç¼“å­˜èµ·æ¥ï¼Œæ‰€ä»¥åœ¨ç”¨æˆ·çœ‹æ¥é¡µé¢ä¼šåŠ è½½å¾—æ›´å¿«ã€‚</p><h4 id="7-å‡å°‘-DOM-å…ƒç´ çš„æ•°é‡"><a href="#7-å‡å°‘-DOM-å…ƒç´ çš„æ•°é‡" class="headerlink" title="7. å‡å°‘ DOM å…ƒç´ çš„æ•°é‡"></a>7. å‡å°‘ DOM å…ƒç´ çš„æ•°é‡</h4><p>ä¸€ä¸ªå¤æ‚çš„é¡µé¢æ„å‘³ç€è¦ä¸‹è½½æ›´å¤šçš„å­—èŠ‚ï¼Œè€Œä¸”ç”¨JavaScriptè®¿é—®DOMä¹Ÿä¼šæ›´æ…¢ã€‚</p><h4 id="8-è·¨åŸŸåˆ†ç¦»ç»„ä»¶"><a href="#8-è·¨åŸŸåˆ†ç¦»ç»„ä»¶" class="headerlink" title="8. è·¨åŸŸåˆ†ç¦»ç»„ä»¶"></a>8. è·¨åŸŸåˆ†ç¦»ç»„ä»¶</h4><p>åˆ†ç¦»ç»„ä»¶å¯ä»¥æœ€å¤§åŒ–å¹¶è¡Œä¸‹è½½ï¼Œä½†è¦ç¡®ä¿åªç”¨ä¸è¶…è¿‡2-4ä¸ªåŸŸï¼Œå› ä¸ºå­˜åœ¨DNSæŸ¥æ‰¾çš„ä»£ä»·ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æŠŠHTMLå’ŒåŠ¨æ€å†…å®¹éƒ¨ç½²åœ¨ <a href="http://www.example.org" target="_blank" rel="noopener">www.example.org</a> ï¼Œè€ŒæŠŠé™æ€ç»„ä»¶åˆ†ç¦»åˆ° static1.example.orgã€‚</p><h4 id="9-å°½é‡å°‘ç”¨-iframe"><a href="#9-å°½é‡å°‘ç”¨-iframe" class="headerlink" title="9. å°½é‡å°‘ç”¨ iframe"></a>9. å°½é‡å°‘ç”¨ iframe</h4><p>ç”¨iframeå¯ä»¥æŠŠä¸€ä¸ªHTMLæ–‡æ¡£æ’å…¥åˆ°çˆ¶æ–‡æ¡£é‡Œï¼Œé‡è¦çš„æ˜¯æ˜ç™½iframeæ˜¯å¦‚ä½•å·¥ä½œçš„å¹¶é«˜æ•ˆåœ°ä½¿ç”¨å®ƒã€‚</p><p><code>iframe</code> çš„ä¼˜ç‚¹ï¼š</p><ul><li>å¼•å…¥ç¼“æ…¢çš„ç¬¬ä¸‰æ–¹å†…å®¹ï¼Œæ¯”å¦‚æ ‡å¿—å’Œå¹¿å‘Š</li><li>å®‰å…¨æ²™ç®±</li><li>å¹¶è¡Œä¸‹è½½è„šæœ¬</li></ul><p><code>iframe</code>çš„ç¼ºç‚¹ï¼š</p><ul><li>ä»£ä»·é«˜æ˜‚ï¼Œå³ä½¿æ˜¯ç©ºç™½çš„iframe</li><li>é˜»å¡é¡µé¢åŠ è½½</li><li>éè¯­ä¹‰</li></ul><h4 id="æœç»-404"><a href="#æœç»-404" class="headerlink" title="æœç» 404"></a>æœç» 404</h4><p>HTTPè¯·æ±‚ä»£ä»·é«˜æ˜‚ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦ç”¨ä¸€ä¸ªHTTPè¯·æ±‚å»è·å–ä¸€ä¸ªæ— ç”¨çš„å“åº”ï¼ˆæ¯”å¦‚404 Not Foundï¼‰ï¼Œåªä¼šæ‹–æ…¢ç”¨æˆ·ä½“éªŒè€Œæ²¡æœ‰ä»»ä½•å¥½å¤„ã€‚</p><h3 id="CSS-éƒ¨åˆ†"><a href="#CSS-éƒ¨åˆ†" class="headerlink" title="CSS éƒ¨åˆ†"></a>CSS éƒ¨åˆ†</h3><p>æˆ‘è§‰å¾—è¿™ä¸€ part å®Œå…¨æ˜¯ä¸ºäº†å¡« IE çš„å‘ã€‚å“ˆå“ˆå“ˆã€‚</p><h4 id="11-é¿å…ä½¿ç”¨-CSS-è¡¨è¾¾å¼ï¼ˆIEï¼‰"><a href="#11-é¿å…ä½¿ç”¨-CSS-è¡¨è¾¾å¼ï¼ˆIEï¼‰" class="headerlink" title="11. é¿å…ä½¿ç”¨ CSS è¡¨è¾¾å¼ï¼ˆIEï¼‰"></a>11. é¿å…ä½¿ç”¨ CSS è¡¨è¾¾å¼ï¼ˆIEï¼‰</h4><p>ç”¨CSSè¡¨è¾¾å¼åŠ¨æ€è®¾ç½®CSSå±æ€§ï¼Œæ˜¯ä¸€ç§å¼ºå¤§åˆå±é™©çš„æ–¹å¼ã€‚ä»IE5å¼€å§‹æ”¯æŒï¼Œä½†ä»IE8èµ·å°±ä¸æ¨èä½¿ç”¨äº†ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨CSSè¡¨è¾¾å¼æŠŠèƒŒæ™¯é¢œè‰²è®¾ç½®æˆæŒ‰å°æ—¶äº¤æ›¿çš„ï¼š</p><pre><code class="css">background-color: expression( (new Date()).getHours()%2 ? &quot;#B8D4FF&quot; : &quot;#F08A00&quot; );</code></pre><p>ï¼ˆä½†æ˜¯ CSS æ–°æ ‡å‡†ä¼¼ä¹æ‰“ç®—ä¸º CSS æä¾›æ¯” <code>calc</code> æ›´å¼ºå¤§çš„èƒ½åŠ›ï¼ŒæœŸå¾…(*â¦Ï‰â¦)ï¼‰</p><h4 id="12-é€‰æ‹©-lt-link-gt-èˆå¼ƒ-importï¼ˆIEï¼‰"><a href="#12-é€‰æ‹©-lt-link-gt-èˆå¼ƒ-importï¼ˆIEï¼‰" class="headerlink" title="12. é€‰æ‹© &lt;link&gt; èˆå¼ƒ @importï¼ˆIEï¼‰"></a>12. é€‰æ‹© <code>&lt;link&gt;</code> èˆå¼ƒ <code>@import</code>ï¼ˆIEï¼‰</h4><p>ä¸ºäº†å®ç°é€æ­¥æ¸²æŸ“ï¼ŒCSSåº”è¯¥æ”¾åœ¨é¡¶éƒ¨ã€‚åœ¨IEä¸­ç”¨@importä¸åœ¨åº•éƒ¨ç”¨ <code>&lt;link&gt;</code> æ•ˆæœä¸€æ ·ï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦ç”¨å®ƒã€‚</p><h4 id="13-é¿å…ä½¿ç”¨æ»¤é•œï¼ˆIEï¼‰"><a href="#13-é¿å…ä½¿ç”¨æ»¤é•œï¼ˆIEï¼‰" class="headerlink" title="13. é¿å…ä½¿ç”¨æ»¤é•œï¼ˆIEï¼‰"></a>13. é¿å…ä½¿ç”¨æ»¤é•œï¼ˆIEï¼‰</h4><p>IEä¸“æœ‰çš„AlphaImageLoaderæ»¤é•œå¯ä»¥ç”¨æ¥ä¿®å¤IE7ä¹‹å‰çš„ç‰ˆæœ¬ä¸­åŠé€æ˜PNGå›¾ç‰‡çš„é—®é¢˜ã€‚åœ¨å›¾ç‰‡åŠ è½½è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªæ»¤é•œä¼šé˜»å¡æ¸²æŸ“ï¼Œå¡ä½æµè§ˆå™¨ï¼Œè¿˜ä¼šå¢åŠ å†…å­˜æ¶ˆè€—è€Œä¸”æ˜¯è¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ çš„ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå›¾ç‰‡ï¼Œæ‰€ä»¥ä¼šå­˜åœ¨ä¸€å¤§å †é—®é¢˜ã€‚</p><p>æœ€å¥½çš„æ–¹æ³•æ˜¯å¹²è„†ä¸è¦ç”¨AlphaImageLoaderï¼Œè€Œä¼˜é›…åœ°é™çº§åˆ°ç”¨åœ¨IEä¸­æ”¯æŒæ€§å¾ˆå¥½çš„PNG8å›¾ç‰‡æ¥ä»£æ›¿ã€‚å¦‚æœéè¦ç”¨AlphaImageLoaderï¼Œåº”è¯¥ç”¨ä¸‹åˆ’çº¿hackï¼š_filteræ¥é¿å…å½±å“IE7åŠæ›´é«˜ç‰ˆæœ¬çš„ç”¨æˆ·ã€‚</p><h4 id="14-æŠŠæ ·å¼æ”¾åœ¨é¡¶éƒ¨"><a href="#14-æŠŠæ ·å¼æ”¾åœ¨é¡¶éƒ¨" class="headerlink" title="14. æŠŠæ ·å¼æ”¾åœ¨é¡¶éƒ¨"></a>14. æŠŠæ ·å¼æ”¾åœ¨é¡¶éƒ¨</h4><p>æŠŠæ ·å¼è¡¨æ”¾åˆ°æ–‡æ¡£çš„HEADéƒ¨åˆ†èƒ½è®©é¡µé¢çœ‹èµ·æ¥åŠ è½½åœ°æ›´å¿«ã€‚è¿™æ˜¯å› ä¸ºæŠŠæ ·å¼è¡¨æ”¾åœ¨headé‡Œèƒ½è®©é¡µé¢é€æ­¥æ¸²æŸ“ã€‚</p><p>å…³æ³¨æ€§èƒ½çš„å‰ç«¯å·¥ç¨‹å¸ˆæƒ³è®©é¡µé¢é€æ­¥æ¸²æŸ“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æƒ³è®©æµè§ˆå™¨å°½å¿«æ˜¾ç¤ºå·²æœ‰å†…å®¹ï¼Œè¿™åœ¨é¡µé¢ä¸Šæœ‰ä¸€å¤§å †å†…å®¹æˆ–è€…ç”¨æˆ·ç½‘é€Ÿå¾ˆæ…¢æ—¶æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p><h3 id="js-éƒ¨åˆ†"><a href="#js-éƒ¨åˆ†" class="headerlink" title="js éƒ¨åˆ†"></a>js éƒ¨åˆ†</h3><h4 id="15-å»é™¤é‡å¤è„šæœ¬"><a href="#15-å»é™¤é‡å¤è„šæœ¬" class="headerlink" title="15. å»é™¤é‡å¤è„šæœ¬"></a>15. å»é™¤é‡å¤è„šæœ¬</h4><p>é¡µé¢å«æœ‰é‡å¤çš„è„šæœ¬æ–‡ä»¶ä¼šå½±å“æ€§èƒ½ï¼ŒIEä¼šäº§ç”Ÿä¸å¿…è¦çš„HTTPè¯·æ±‚ï¼Œåœ¨IEä¸­ï¼Œå¦‚æœä¸€ä¸ªä¸å¯ç¼“å­˜çš„å¤–éƒ¨è„šæœ¬è¢«é¡µé¢å¼•å…¥äº†ä¸¤æ¬¡ï¼Œå®ƒä¼šåœ¨é¡µé¢åŠ è½½æ—¶äº§ç”Ÿä¸¤ä¸ªHTTPè¯·æ±‚ã€‚å³ä½¿è„šæœ¬æ˜¯å¯ç¼“å­˜çš„ï¼Œåœ¨ç”¨æˆ·é‡æ–°åŠ è½½é¡µé¢æ—¶ä¹Ÿä¼šäº§ç”Ÿé¢å¤–çš„HTTPè¯·æ±‚ã€‚</p><h4 id="16-å°½é‡å‡å°‘-DOM-çš„è®¿é—®"><a href="#16-å°½é‡å‡å°‘-DOM-çš„è®¿é—®" class="headerlink" title="16. å°½é‡å‡å°‘ DOM çš„è®¿é—®"></a>16. å°½é‡å‡å°‘ DOM çš„è®¿é—®</h4><p>ç”¨JavaScriptè®¿é—®DOMå…ƒç´ æ˜¯å¾ˆæ…¢çš„ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†è®©é¡µé¢ååº”æ›´è¿…é€Ÿï¼Œåº”è¯¥ï¼š</p><ul><li>ç¼“å­˜å·²è®¿é—®è¿‡çš„å…ƒç´ çš„ç´¢å¼•</li><li>å…ˆâ€œç¦»çº¿â€æ›´æ–°èŠ‚ç‚¹ï¼Œå†æŠŠå®ƒä»¬æ·»åˆ°DOMæ ‘ä¸Š ï¼ˆdocumentFragmentï¼‰</li><li>é¿å…ç”¨JavaScriptä¿®å¤å¸ƒå±€é—®é¢˜</li></ul><h4 id="17-ç”¨æ™ºèƒ½çš„æ—¶é—´å¤„ç†å™¨"><a href="#17-ç”¨æ™ºèƒ½çš„æ—¶é—´å¤„ç†å™¨" class="headerlink" title="17. ç”¨æ™ºèƒ½çš„æ—¶é—´å¤„ç†å™¨"></a>17. ç”¨æ™ºèƒ½çš„æ—¶é—´å¤„ç†å™¨</h4><p>äº‹ä»¶å§”æ‰˜</p><h4 id="18-æŠŠè„šæœ¬æ”¾åœ¨åº•éƒ¨"><a href="#18-æŠŠè„šæœ¬æ”¾åœ¨åº•éƒ¨" class="headerlink" title="18. æŠŠè„šæœ¬æ”¾åœ¨åº•éƒ¨"></a>18. æŠŠè„šæœ¬æ”¾åœ¨åº•éƒ¨</h4><p>è„šæœ¬ä¼šé˜»å¡å¹¶è¡Œä¸‹è½½ï¼ŒHTTP/1.1å®˜æ–¹æ–‡æ¡£å»ºè®®æµè§ˆå™¨æ¯ä¸ªä¸»æœºåä¸‹å¹¶è¡Œä¸‹è½½çš„ç»„ä»¶æ•°ä¸è¦è¶…è¿‡ä¸¤ä¸ªï¼Œå¦‚æœå›¾ç‰‡æ¥è‡ªå¤šä¸ªä¸»æœºåï¼Œå¹¶è¡Œä¸‹è½½çš„æ•°é‡å°±å¯ä»¥è¶…è¿‡ä¸¤ä¸ªã€‚å¦‚æœè„šæœ¬æ­£åœ¨ä¸‹è½½ï¼Œæµè§ˆå™¨å°±ä¸å¼€å§‹ä»»ä½•å…¶å®ƒä¸‹è½½ä»»åŠ¡ï¼Œå³ä½¿æ˜¯åœ¨ä¸åŒä¸»æœºåä¸‹çš„ã€‚</p><p>æœ‰æ—¶å€™ï¼Œå¹¶ä¸å®¹æ˜“æŠŠè„šæœ¬ç§»åŠ¨åˆ°åº•éƒ¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè„šæœ¬æ˜¯ç”¨document.writeæ’å…¥åˆ°é¡µé¢å†…å®¹ä¸­çš„ï¼Œå°±æ²¡åŠæ³•å†å¾€ä¸‹ç§»äº†ã€‚è¿˜å¯èƒ½å­˜åœ¨ä½œç”¨åŸŸé—®é¢˜ï¼Œåœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº›é—®é¢˜éƒ½æ˜¯å¯ä»¥è§£å†³çš„ã€‚</p><p>ä¸€ä¸ªå¸¸è§çš„å»ºè®®æ˜¯ç”¨æ¨è¿Ÿï¼ˆdeferredï¼‰è„šæœ¬ï¼Œæœ‰DEFERå±æ€§çš„è„šæœ¬æ„å‘³ç€ä¸èƒ½å«æœ‰document.writeï¼Œå¹¶ä¸”æç¤ºæµè§ˆå™¨å‘Šè¯‰ä»–ä»¬å¯ä»¥ç»§ç»­æ¸²æŸ“ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒFirefoxä¸æ”¯æŒDEFERå±æ€§ã€‚åœ¨IEä¸­ï¼Œè„šæœ¬å¯èƒ½è¢«æ¨è¿Ÿï¼Œä½†ä¸å°½å¦‚äººæ„ã€‚å¦‚æœè„šæœ¬å¯ä»¥æ¨è¿Ÿï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒæ”¾åˆ°é¡µé¢åº•éƒ¨ï¼Œé¡µé¢å°±å¯ä»¥æ›´å¿«åœ°è½½å…¥ã€‚</p><h4 id="19-æŠŠ-js-å’Œ-CSS-æ”¾åˆ°å¤–é¢"><a href="#19-æŠŠ-js-å’Œ-CSS-æ”¾åˆ°å¤–é¢" class="headerlink" title="19. æŠŠ js å’Œ CSS æ”¾åˆ°å¤–é¢"></a>19. æŠŠ js å’Œ CSS æ”¾åˆ°å¤–é¢</h4><p>ç”¨å¤–éƒ¨æ–‡ä»¶å¯ä»¥è®©é¡µé¢æ›´å¿«ï¼Œå› ä¸ºJavaScriptå’ŒCSSæ–‡ä»¶ä¼šè¢«ç¼“å­˜åœ¨æµè§ˆå™¨ã€‚HTMLæ–‡æ¡£ä¸­çš„è¡Œå†…JavaScriptå’ŒCSSåœ¨æ¯æ¬¡è¯·æ±‚è¯¥HTMLæ–‡æ¡£çš„æ—¶å€™éƒ½ä¼šé‡æ–°ä¸‹è½½ã€‚è¿™æ ·åšå‡å°‘äº†æ‰€éœ€çš„HTTPè¯·æ±‚æ•°ï¼Œä½†å¢åŠ äº†HTMLæ–‡æ¡£çš„å¤§å°ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœJavaScriptå’ŒCSSåœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å·²ç»è¢«æµè§ˆå™¨ç¼“å­˜èµ·æ¥äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æˆåŠŸåœ°æŠŠHTMLæ–‡æ¡£å˜å°äº†ï¼Œè€Œä¸”è¿˜æ²¡æœ‰å¢åŠ HTTPè¯·æ±‚æ•°ã€‚</p><h4 id="20-å‹ç¼©-js-å’Œ-CSS"><a href="#20-å‹ç¼©-js-å’Œ-CSS" class="headerlink" title="20. å‹ç¼© js å’Œ CSS"></a>20. å‹ç¼© js å’Œ CSS</h4><p>å»é™¤ä»£ç ä¸­ä¸å¿…è¦çš„å­—ç¬¦å‡å°‘æ–‡ä»¶ä½“ç§¯ï¼Œæå‡åŠ è½½é€Ÿåº¦ã€‚ Yahoo åœ¨å¯¹ç¾å›½å‰åçš„ç½‘ç«™è°ƒæŸ¥ä¸­ï¼Œå‹ç¼©å¯ä»¥ç¼©å°21%ï¼Œè€Œæ··æ·†èƒ½ç¼©å°25%ã€‚è™½ç„¶æ··æ·†çš„ç¼©å°ç¨‹åº¦æ›´é«˜ï¼Œä½†æ¯”å‹ç¼©é£é™©æ›´å¤§ã€‚</p><p>é™¤äº†å‹ç¼©å¤–éƒ¨è„šæœ¬å’Œæ ·å¼ï¼Œè¡Œå†…çš„ <code>&lt;script&gt;</code> å’Œ <code>&lt;style&gt;</code> å—ä¹Ÿå¯ä»¥å‹ç¼©ã€‚å³ä½¿å¯ç”¨äº†gzipæ¨¡å—ï¼Œå…ˆè¿›è¡Œå‹ç¼©ä¹Ÿèƒ½å¤Ÿç¼©å°5%æˆ–è€…æ›´å¤šçš„å¤§å°ã€‚JavaScriptå’ŒCSSçš„ç”¨å¤„è¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥å‹ç¼©ä»£ç ä¼šæœ‰ä¸é”™çš„æ•ˆæœã€‚</p><h3 id="å›¾ç‰‡éƒ¨åˆ†"><a href="#å›¾ç‰‡éƒ¨åˆ†" class="headerlink" title="å›¾ç‰‡éƒ¨åˆ†"></a>å›¾ç‰‡éƒ¨åˆ†</h3><h4 id="21-ä¼˜åŒ–å›¾ç‰‡"><a href="#21-ä¼˜åŒ–å›¾ç‰‡" class="headerlink" title="21. ä¼˜åŒ–å›¾ç‰‡"></a>21. ä¼˜åŒ–å›¾ç‰‡</h4><p>å°è¯•æŠŠGIFæ ¼å¼è½¬æ¢æˆPNGæ ¼å¼ï¼Œçœ‹çœ‹æ˜¯å¦èŠ‚çœç©ºé—´ã€‚åœ¨æ‰€æœ‰çš„PNGå›¾ç‰‡ä¸Šè¿è¡Œpngcrushï¼ˆæˆ–è€…å…¶å®ƒPNGä¼˜åŒ–å·¥å…·ï¼‰</p><p>å½“ç„¶åœ¨ 2018 å¹´çš„ä»Šå¤©ï¼Œå·²ç»æœ‰äº†æ›´å¤šå¯ä»¥ä¼˜åŒ–çš„ç­–ç•¥ï¼Œwebp? svg? fonticon? â€¦ ç­‰ç­‰</p><h4 id="22-ä¼˜åŒ–-CSS-Sprite"><a href="#22-ä¼˜åŒ–-CSS-Sprite" class="headerlink" title="22. ä¼˜åŒ– CSS Sprite"></a>22. ä¼˜åŒ– CSS Sprite</h4><ul><li>åœ¨Spriteå›¾ç‰‡ä¸­æ¨ªå‘æ’åˆ—ä¸€èˆ¬éƒ½æ¯”çºµå‘æ’åˆ—çš„æœ€ç»ˆæ–‡ä»¶å°</li><li>ç»„åˆSpriteå›¾ç‰‡ä¸­çš„ç›¸ä¼¼é¢œè‰²å¯ä»¥ä¿æŒä½è‰²æ•°ï¼Œæœ€ç†æƒ³çš„æ˜¯256è‰²ä»¥ä¸‹PNG8æ ¼å¼</li><li>â€œå¯¹ç§»åŠ¨ç«¯å‹å¥½â€ï¼Œä¸è¦åœ¨Spriteå›¾ç‰‡ä¸­ç•™ä¸‹å¤ªå¤§çš„ç©ºéš™ã€‚è™½ç„¶ä¸ä¼šåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“å›¾ç‰‡æ–‡ä»¶çš„å¤§å°ï¼Œä½†è¿™æ ·åšå¯ä»¥èŠ‚çœç”¨æˆ·ä»£ç†æŠŠå›¾ç‰‡è§£å‹æˆåƒç´ æ˜ å°„æ—¶æ¶ˆè€—çš„å†…å­˜ã€‚100Ã—100çš„å›¾ç‰‡æ˜¯1ä¸‡ä¸ªåƒç´ ï¼Œè€Œ1000Ã—1000çš„å›¾ç‰‡å°±æ˜¯100ä¸‡ä¸ªåƒç´ äº†ã€‚</li></ul><h4 id="23-ä¸è¦ç”¨HTMLç¼©æ”¾å›¾ç‰‡"><a href="#23-ä¸è¦ç”¨HTMLç¼©æ”¾å›¾ç‰‡" class="headerlink" title="23. ä¸è¦ç”¨HTMLç¼©æ”¾å›¾ç‰‡"></a>23. ä¸è¦ç”¨HTMLç¼©æ”¾å›¾ç‰‡</h4><p>ä¸è¦å› ä¸ºåœ¨HTMLä¸­å¯ä»¥è®¾ç½®å®½é«˜è€Œä½¿ç”¨æœ¬ä¸éœ€è¦çš„å¤§å›¾ã€‚å¦‚æœéœ€è¦</p><pre><code class="HTML">&lt;img width=&quot;100&quot; height=&quot;100&quot; src=&quot;cat.jpg&quot; alt=&quot;Cat&quot; /&gt;</code></pre><p>é‚£ä¹ˆå›¾ç‰‡æœ¬èº«ï¼ˆcat.jpgï¼‰åº”è¯¥æ˜¯100x100pxçš„ï¼Œè€Œä¸æ˜¯å»ç¼©å°500 x 500pxçš„å›¾ç‰‡ã€‚</p><h4 id="24-ç”¨å°çš„å¯ç¼“å­˜çš„-favicon-ico"><a href="#24-ç”¨å°çš„å¯ç¼“å­˜çš„-favicon-ico" class="headerlink" title="24. ç”¨å°çš„å¯ç¼“å­˜çš„ favicon.ico"></a>24. ç”¨å°çš„å¯ç¼“å­˜çš„ favicon.ico</h4><p>favicon.icoæ˜¯æ”¾åœ¨æœåŠ¡å™¨æ ¹ç›®å½•çš„å›¾ç‰‡ï¼Œå®ƒä¼šå¸¦æ¥ä¸€å †éº»çƒ¦ï¼Œå› ä¸ºå³ä¾¿ä½ ä¸ç®¡å®ƒï¼Œæµè§ˆå™¨ä¹Ÿä¼šè‡ªåŠ¨è¯·æ±‚å®ƒï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦ç»™ä¸€ä¸ª404 Not Foundå“åº”ã€‚è€Œä¸”åªè¦åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œæ¯æ¬¡è¯·æ±‚å®ƒæ—¶éƒ½ä¼šå‘é€cookieï¼Œæ­¤å¤–è¿™ä¸ªå›¾ç‰‡è¿˜ä¼šå¹²æ‰°ä¸‹è½½é¡ºåºï¼Œä¾‹å¦‚åœ¨IEä¸­ï¼Œå½“ä½ åœ¨onloadä¸­è¯·æ±‚é¢å¤–ç»„ä»¶æ—¶ï¼Œå°†ä¼šå…ˆä¸‹è½½faviconã€‚</p><p>æ‰€ä»¥ä¸ºäº†ç¼“è§£favicon.icoçš„ç¼ºç‚¹ï¼Œåº”è¯¥ç¡®ä¿ï¼š</p><ul><li>è¶³å¤Ÿå°ï¼Œæœ€å¥½åœ¨1Kä»¥ä¸‹</li><li>è®¾ç½®åˆé€‚çš„æœ‰æ•ˆæœŸHTTPå¤´ï¼ˆä»¥åå¦‚æœæƒ³æ¢çš„è¯å°±ä¸èƒ½é‡å‘½åäº†ï¼‰ï¼ŒæŠŠæœ‰æ•ˆæœŸè®¾ç½®ä¸ºæ¯”è¾ƒå®‰å…¨çš„é•¿åº¦ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥å½“å‰favicon.icoçš„æœ€åä¿®æ”¹æ—¥æœŸæ¥ç¡®ä¿å˜æ›´èƒ½è®©æµè§ˆå™¨çŸ¥é“ã€‚</li></ul><h3 id="cookieéƒ¨åˆ†"><a href="#cookieéƒ¨åˆ†" class="headerlink" title="cookieéƒ¨åˆ†"></a>cookieéƒ¨åˆ†</h3><h4 id="25-ç»™-cookie-å‡è‚¥"><a href="#25-ç»™-cookie-å‡è‚¥" class="headerlink" title="25. ç»™ cookie å‡è‚¥"></a>25. ç»™ cookie å‡è‚¥</h4><p>ä½¿ç”¨cookieçš„åŸå› æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚æˆæƒå’Œä¸ªæ€§åŒ–ã€‚HTTPå¤´ä¸­cookieä¿¡æ¯åœ¨webæœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´äº¤æ¢ã€‚é‡è¦çš„æ˜¯ä¿è¯cookieå°½å¯èƒ½çš„å°ï¼Œä»¥æœ€å°åŒ–å¯¹ç”¨æˆ·å“åº”æ—¶é—´çš„å½±å“ã€‚</p><ul><li>æ¸…é™¤ä¸å¿…è¦çš„cookie</li><li>ä¿è¯cookieå°½å¯èƒ½å°ï¼Œä»¥æœ€å°åŒ–å¯¹ç”¨æˆ·å“åº”æ—¶é—´çš„å½±å“</li><li>æ³¨æ„ç»™cookieè®¾ç½®åˆé€‚çš„åŸŸçº§åˆ«ï¼Œä»¥å…å½±å“å…¶å®ƒå­åŸŸ</li><li>è®¾ç½®åˆé€‚çš„æœ‰æ•ˆæœŸï¼Œæ›´æ—©çš„æœ‰æ•ˆæœŸæˆ–è€…noneå¯ä»¥æ›´å¿«çš„åˆ é™¤cookieï¼Œæé«˜ç”¨æˆ·å“åº”æ—¶é—´</li></ul><h4 id="26-æŠŠç»„ä»¶æ”¾åœ¨ä¸å«-cookie-çš„åŸŸä¸‹"><a href="#26-æŠŠç»„ä»¶æ”¾åœ¨ä¸å«-cookie-çš„åŸŸä¸‹" class="headerlink" title="26. æŠŠç»„ä»¶æ”¾åœ¨ä¸å« cookie çš„åŸŸä¸‹"></a>26. æŠŠç»„ä»¶æ”¾åœ¨ä¸å« cookie çš„åŸŸä¸‹</h4><p>å½“æµè§ˆå™¨å‘é€å¯¹é™æ€å›¾åƒçš„è¯·æ±‚æ—¶ï¼Œcookieä¹Ÿä¼šä¸€èµ·å‘é€ï¼Œè€ŒæœåŠ¡å™¨æ ¹æœ¬ä¸éœ€è¦è¿™äº›cookieã€‚æ‰€ä»¥å®ƒä»¬åªä¼šé€ æˆæ²¡æœ‰æ„ä¹‰çš„ç½‘ç»œé€šä¿¡é‡ï¼Œåº”è¯¥ç¡®ä¿å¯¹é™æ€ç»„ä»¶çš„è¯·æ±‚ä¸å«cookieã€‚å¯ä»¥åˆ›å»ºä¸€ä¸ªå­åŸŸï¼ŒæŠŠæ‰€æœ‰çš„é™æ€ç»„ä»¶éƒ½éƒ¨ç½²åœ¨é‚£å„¿ã€‚</p><p>ã€€ã€€å¦‚æœåŸŸåæ˜¯ <a href="http://www.example.org" target="_blank" rel="noopener">www.example.org</a> ï¼Œå¯ä»¥æŠŠé™æ€ç»„ä»¶éƒ¨ç½²åˆ° static.example.org ã€‚ç„¶è€Œï¼Œå¦‚æœå·²ç»åœ¨é¡¶çº§åŸŸ example.org æˆ–è€… <a href="http://www.example.org" target="_blank" rel="noopener">www.example.org</a> è®¾ç½®äº†cookieï¼Œé‚£ä¹ˆæ‰€æœ‰å¯¹static.example.orgçš„è¯·æ±‚éƒ½ä¼šå«æœ‰è¿™äº›cookieã€‚è¿™æ—¶å€™å¯ä»¥å†ä¹°ä¸€ä¸ªæ–°åŸŸåï¼ŒæŠŠæ‰€æœ‰çš„é™æ€ç»„ä»¶éƒ¨ç½²ä¸Šå»ï¼Œå¹¶ä¿æŒè¿™ä¸ªæ–°åŸŸåä¸å«cookieã€‚Yahoo!ç”¨çš„æ˜¯ yimg.com ï¼ŒYouTubeæ˜¯ ytimg.com ï¼ŒAmazonæ˜¯ images-amazon.com ç­‰ç­‰ã€‚</p><p>ã€€ã€€æŠŠé™æ€ç»„ä»¶éƒ¨ç½²åœ¨ä¸å«cookieçš„åŸŸä¸‹è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯æœ‰äº›ä»£ç†å¯èƒ½ä¼šæ‹’ç»ç¼“å­˜å¸¦cookieçš„ç»„ä»¶ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šå¦‚æœä¸çŸ¥é“åº”è¯¥ç”¨ example.org è¿˜æ˜¯ <a href="http://www.example.org" target="_blank" rel="noopener">www.example.org</a> ä½œä¸ºä¸»é¡µï¼Œå¯ä»¥è€ƒè™‘ä¸€ä¸‹cookieçš„å½±å“ã€‚çœç•¥wwwçš„è¯ï¼Œå°±åªèƒ½æŠŠcookieå†™åˆ°*.example.orgï¼Œæ‰€ä»¥å› ä¸ºæ€§èƒ½åŸå› æœ€å¥½ç”¨wwwå­åŸŸï¼Œå¹¶ä¸”æŠŠcookieå†™åˆ°è¿™ä¸ªå­åŸŸä¸‹ã€‚</p><h3 id="ç§»åŠ¨ç«¯éƒ¨åˆ†"><a href="#ç§»åŠ¨ç«¯éƒ¨åˆ†" class="headerlink" title="ç§»åŠ¨ç«¯éƒ¨åˆ†"></a>ç§»åŠ¨ç«¯éƒ¨åˆ†</h3><h4 id="27-ä¿è¯æ‰€æœ‰ç»„ä»¶éƒ½å°äº25K"><a href="#27-ä¿è¯æ‰€æœ‰ç»„ä»¶éƒ½å°äº25K" class="headerlink" title="27. ä¿è¯æ‰€æœ‰ç»„ä»¶éƒ½å°äº25K"></a>27. ä¿è¯æ‰€æœ‰ç»„ä»¶éƒ½å°äº25K</h4><p>è¿™ä¸ªé™åˆ¶æ˜¯å› ä¸ºiPhoneä¸èƒ½ç¼“å­˜å¤§äº25Kçš„ç»„ä»¶ï¼Œæ³¨æ„è¿™é‡ŒæŒ‡çš„æ˜¯æœªå‹ç¼©çš„å¤§å°ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¼©å‡å†…å®¹æœ¬èº«ä¹Ÿå¾ˆé‡è¦ï¼Œå› ä¸ºå•çº¯çš„gzipå¯èƒ½ä¸å¤Ÿã€‚</p><h4 id="28-æŠŠç»„ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªå¤åˆæ–‡æ¡£é‡Œ"><a href="#28-æŠŠç»„ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªå¤åˆæ–‡æ¡£é‡Œ" class="headerlink" title="28. æŠŠç»„ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªå¤åˆæ–‡æ¡£é‡Œ"></a>28. æŠŠç»„ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªå¤åˆæ–‡æ¡£é‡Œ</h4><p>æŠŠå„ä¸ªç»„ä»¶æ‰“åŒ…æˆä¸€ä¸ªåƒæœ‰é™„ä»¶çš„ç”µå­é‚®ä»¶ä¸€æ ·çš„å¤åˆæ–‡æ¡£é‡Œï¼Œå¯ä»¥ç”¨ä¸€ä¸ªHTTPè¯·æ±‚è·å–å¤šä¸ªç»„ä»¶ï¼ˆè®°ä½ä¸€ç‚¹ï¼šHTTPè¯·æ±‚æ˜¯ä»£ä»·é«˜æ˜‚çš„ï¼‰ã€‚ç”¨è¿™ç§æ–¹å¼çš„æ—¶å€™ï¼Œè¦å…ˆæ£€æŸ¥ç”¨æˆ·ä»£ç†æ˜¯å¦æ”¯æŒï¼ˆiPhoneå°±ä¸æ”¯æŒï¼‰ã€‚</p><h3 id="æœåŠ¡å™¨éƒ¨åˆ†"><a href="#æœåŠ¡å™¨éƒ¨åˆ†" class="headerlink" title="æœåŠ¡å™¨éƒ¨åˆ†"></a>æœåŠ¡å™¨éƒ¨åˆ†</h3><h4 id="29-Gzipç»„ä»¶"><a href="#29-Gzipç»„ä»¶" class="headerlink" title="29. Gzipç»„ä»¶"></a>29. Gzipç»„ä»¶</h4><p>gzip å¯ä»¥å¤§å¹…å‡å°‘æ–‡æœ¬ç±»çš„æ•°æ®å¤§å° html, css, js ç­‰ä½“ç§¯ä¼šå¤§å¹…å‡å°‘ã€‚</p><p>ä»HTTP/1.1å¼€å§‹ï¼Œwebå®¢æˆ·ç«¯å°±æœ‰äº†æ”¯æŒå‹ç¼©çš„Accept-Encoding HTTPè¯·æ±‚å¤´ã€‚</p><pre><code>Accept-Encoding: gzip, deflate</code></pre><p>å¦‚æœwebæœåŠ¡å™¨çœ‹åˆ°è¿™ä¸ªè¯·æ±‚å¤´ï¼Œå®ƒå°±ä¼šç”¨å®¢æˆ·ç«¯åˆ—å‡ºçš„ä¸€ç§æ–¹å¼æ¥å‹ç¼©å“åº”ã€‚webæœåŠ¡å™¨é€šè¿‡Content-Encodingç›¸åº”å¤´æ¥é€šçŸ¥å®¢æˆ·ç«¯ã€‚</p><pre><code>Content-Encoding: gzip</code></pre><h4 id="30-é¿å…å›¾ç‰‡srcå±æ€§ä¸ºç©º"><a href="#30-é¿å…å›¾ç‰‡srcå±æ€§ä¸ºç©º" class="headerlink" title="30. é¿å…å›¾ç‰‡srcå±æ€§ä¸ºç©º"></a>30. é¿å…å›¾ç‰‡srcå±æ€§ä¸ºç©º</h4><p>Image with empty string srcå±æ€§æ˜¯ç©ºå­—ç¬¦ä¸²çš„å›¾ç‰‡å¾ˆå¸¸è§ï¼Œä¸»è¦ä»¥ä¸¤ç§å½¢å¼å‡ºç°ï¼š</p><pre><code class="HTML">&lt;img src=&quot;&quot;&gt;</code></pre><pre><code class="JavaScript">var img = new Image();img.src = &quot;&quot;;</code></pre><p>è¿™ä¸¤ç§å½¢å¼éƒ½ä¼šå¼•èµ·ç›¸åŒçš„é—®é¢˜ï¼šæµè§ˆå™¨ä¼šå‘æœåŠ¡å™¨å‘é€å¦ä¸€ä¸ªè¯·æ±‚ã€‚</p><h4 id="31-é…ç½®-ETags"><a href="#31-é…ç½®-ETags" class="headerlink" title="31. é…ç½® ETags"></a>31. é…ç½® ETags</h4><p>å®ä½“æ ‡ç­¾ï¼ˆETagsï¼‰ï¼Œæ˜¯æœåŠ¡å™¨å’Œæµè§ˆå™¨ç”¨æ¥å†³å®šæµè§ˆå™¨ç¼“å­˜ä¸­ç»„ä»¶ä¸æºæœåŠ¡å™¨ä¸­çš„ç»„ä»¶æ˜¯å¦åŒ¹é…çš„ä¸€ç§æœºåˆ¶ï¼ˆâ€œå®ä½“â€ä¹Ÿå°±æ˜¯ç»„ä»¶ï¼šå›¾ç‰‡ï¼Œè„šæœ¬ï¼Œæ ·å¼è¡¨ç­‰ç­‰ï¼‰ã€‚æ·»åŠ ETagså¯ä»¥æä¾›ä¸€ç§å®ä½“éªŒè¯æœºåˆ¶ï¼Œæ¯”æœ€åä¿®æ”¹æ—¥æœŸæ›´åŠ çµæ´»ã€‚ä¸€ä¸ªETagæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½œä¸ºä¸€ä¸ªç»„ä»¶æŸä¸€å…·ä½“ç‰ˆæœ¬çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚å”¯ä¸€çš„æ ¼å¼çº¦æŸæ˜¯å­—ç¬¦ä¸²å¿…é¡»ç”¨å¼•å·æ‹¬èµ·æ¥ï¼ŒæºæœåŠ¡å™¨ç”¨ç›¸åº”å¤´ä¸­çš„ETagæ¥æŒ‡å®šç»„ä»¶çš„ETagï¼š</p><pre><code>HTTP/1.1 200 OKLast-Modified: Tue, 12 Dec 2006 03:03:59 GMTETag: &quot;10c24bc-4ab-457e1c1f&quot;Content-Length: 12195</code></pre><p>ç„¶åï¼Œå¦‚æœæµè§ˆå™¨å¿…é¡»éªŒè¯ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒç”¨If-None-Matchè¯·æ±‚å¤´æ¥æŠŠETagä¼ å›æºæœåŠ¡å™¨ã€‚å¦‚æœETagsåŒ¹é…æˆåŠŸï¼Œä¼šè¿”å›ä¸€ä¸ª304çŠ¶æ€ç ï¼Œè¿™æ ·å°±å‡å°‘äº†12195ä¸ªå­—èŠ‚çš„å“åº”ä½“ã€‚</p><pre><code>GET /i/yahoo.gif HTTP/1.1Host: us.yimg.comIf-Modified-Since: Tue, 12 Dec 2006 03:03:59 GMTIf-None-Match: &quot;10c24bc-4ab-457e1c1f&quot;HTTP/1.1 304 Not Modified</code></pre><h3 id="å¯¹-Ajax-ä½¿ç”¨-GET-è¯·æ±‚"><a href="#å¯¹-Ajax-ä½¿ç”¨-GET-è¯·æ±‚" class="headerlink" title="å¯¹ Ajax ä½¿ç”¨ GET è¯·æ±‚"></a>å¯¹ Ajax ä½¿ç”¨ GET è¯·æ±‚</h3><p>Yahoo!é‚®ç®±å›¢é˜Ÿå‘ç°ä½¿ç”¨XMLHttpRequestæ—¶ï¼Œæµè§ˆå™¨çš„POSTè¯·æ±‚æ˜¯é€šè¿‡ä¸€ä¸ªä¸¤æ­¥çš„è¿‡ç¨‹æ¥å®ç°çš„ï¼šå…ˆå‘é€HTTPå¤´ï¼Œåœ¨å‘é€æ•°æ®ã€‚æ‰€ä»¥æœ€å¥½ç”¨GETè¯·æ±‚ï¼Œå®ƒåªéœ€è¦å‘é€ä¸€ä¸ªTCPæŠ¥æ–‡ï¼ˆé™¤écookieç‰¹åˆ«å¤šï¼‰ã€‚IEçš„URLé•¿åº¦æœ€å¤§å€¼æ˜¯2Kï¼Œæ‰€ä»¥å¦‚æœè¦å‘é€çš„æ•°æ®è¶…è¿‡2Kå°±æ— æ³•ä½¿ç”¨GETäº†ã€‚</p><p>POSTè¯·æ±‚çš„ä¸€ä¸ªæœ‰è¶£çš„å‰¯ä½œç”¨æ˜¯å®é™…ä¸Šæ²¡æœ‰å‘é€ä»»ä½•æ•°æ®ï¼Œå°±åƒGETè¯·æ±‚ä¸€æ ·ã€‚æ­£å¦‚HTTPè¯´æ˜æ–‡æ¡£ä¸­æè¿°çš„ï¼ŒGETè¯·æ±‚æ˜¯ç”¨æ¥æ£€ç´¢ä¿¡æ¯çš„ã€‚æ‰€ä»¥å®ƒçš„è¯­ä¹‰åªæ˜¯ç”¨GETè¯·æ±‚æ¥è¯·æ±‚æ•°æ®ï¼Œè€Œä¸æ˜¯ç”¨æ¥å‘é€éœ€è¦å­˜å‚¨åˆ°æœåŠ¡å™¨çš„æ•°æ®ã€‚</p><h4 id="33-å°½æ—©æ¸…ç©ºç¼“å†²åŒº"><a href="#33-å°½æ—©æ¸…ç©ºç¼“å†²åŒº" class="headerlink" title="33. å°½æ—©æ¸…ç©ºç¼“å†²åŒº"></a>33. å°½æ—©æ¸…ç©ºç¼“å†²åŒº</h4><p>å½“ç”¨æˆ·è¯·æ±‚ä¸€ä¸ªé¡µé¢æ—¶ï¼ŒæœåŠ¡å™¨éœ€è¦ç”¨å¤§çº¦200åˆ°500æ¯«ç§’æ¥ç»„è£…HTMLé¡µé¢ï¼Œåœ¨è¿™æœŸé—´ï¼Œæµè§ˆå™¨é—²ç­‰ç€æ•°æ®åˆ°è¾¾ã€‚PHPä¸­æœ‰ä¸€ä¸ªflush()å‡½æ•°ï¼Œå…è®¸ç»™æµè§ˆå™¨å‘é€ä¸€éƒ¨åˆ†å·²ç»å‡†å¤‡å®Œæ¯•çš„HTMLå“åº”ï¼Œä»¥ä¾¿æµè§ˆå™¨å¯ä»¥åœ¨åå°å‡†å¤‡å‰©ä½™éƒ¨åˆ†çš„åŒæ—¶å¼€å§‹è·å–ç»„ä»¶ï¼Œå“åº”è€—æ—¶ä¸»è¦åœ¨åå°æ–¹é¢æ—¶ï¼Œè¿™ä¹ˆåšä¼šæ›´æœ‰ä¼˜åŠ¿</p><p>è¾ƒç†æƒ³çš„æ¸…ç©ºç¼“å†²åŒºçš„ä½ç½®æ˜¯HEADåé¢ï¼Œå› ä¸ºHTMLçš„HEADéƒ¨åˆ†é€šå¸¸æ›´å®¹æ˜“ç”Ÿæˆï¼Œå¹¶ä¸”å…è®¸å¼•å…¥ä»»ä½•CSSå’ŒJavaScriptæ–‡ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥è®©æµè§ˆå™¨åœ¨åå°è¿˜åœ¨å¤„ç†çš„æ—¶å€™å°±å¼€å§‹å¹¶è¡Œè·å–ç»„ä»¶ã€‚</p><h4 id="34-ä½¿ç”¨CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰"><a href="#34-ä½¿ç”¨CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰" class="headerlink" title="34. ä½¿ç”¨CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰"></a>34. ä½¿ç”¨CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰</h4><p>ç”¨æˆ·ä¸æœåŠ¡å™¨çš„ç‰©ç†è·ç¦»å¯¹å“åº”æ—¶é—´ä¹Ÿæœ‰å½±å“ã€‚æŠŠå†…å®¹éƒ¨ç½²åœ¨å¤šä¸ªåœ°ç†ä½ç½®åˆ†æ•£çš„æœåŠ¡å™¨ä¸Šèƒ½è®©ç”¨æˆ·æ›´å¿«åœ°è½½å…¥é¡µé¢ã€‚ä½†å…·ä½“è¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>å®ç°å†…å®¹åœ¨åœ°ç†ä½ç½®ä¸Šåˆ†æ•£çš„ç¬¬ä¸€æ­¥æ˜¯ï¼šä¸è¦å°è¯•å»é‡æ–°è®¾è®¡ä½ çš„webåº”ç”¨ç¨‹åºæ¥é€‚åº”åˆ†å¸ƒå¼ç»“æ„ã€‚è¿™å–å†³äºåº”ç”¨ç¨‹åºï¼Œæ”¹å˜ç»“æ„å¯èƒ½åŒ…æ‹¬ä¸€äº›è®©äººæœ›è€Œç”Ÿç•çš„ä»»åŠ¡ï¼Œæ¯”å¦‚åŒæ­¥ä¼šè¯çŠ¶æ€å’Œè·¨æœåŠ¡å™¨å¤åˆ¶æ•°æ®åº“äº‹åŠ¡ï¼ˆç¿»è¯‘å¯èƒ½ä¸å‡†ç¡®ï¼‰ã€‚ç¼©çŸ­ç”¨æˆ·å’Œå†…å®¹ä¹‹é—´è·ç¦»çš„æè®®å¯èƒ½è¢«æ¨è¿Ÿï¼Œæˆ–è€…æ ¹æœ¬ä¸å¯èƒ½é€šè¿‡ï¼Œå°±æ˜¯å› ä¸ºè¿™ä¸ªéš¾é¢˜ã€‚</p><p>è®°ä½ç»ˆç«¯ç”¨æˆ·80%åˆ°90%çš„å“åº”æ—¶é—´éƒ½èŠ±åœ¨ä¸‹è½½é¡µé¢ç»„ä»¶ä¸Šäº†ï¼šå›¾ç‰‡ï¼Œæ ·å¼ï¼Œè„šæœ¬ï¼ŒFlashç­‰ç­‰ï¼Œè¿™æ˜¯ä¸šå±Šé»„é‡‘æ³•åˆ™ã€‚æœ€å¥½å…ˆåˆ†æ•£é™æ€å†…å®¹ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±é‡æ–°è®¾è®¡åº”ç”¨ç¨‹åºç»“æ„ã€‚è¿™ä¸ä»…èƒ½å¤Ÿå¤§å¤§å‡å°‘å“åº”æ—¶é—´ï¼Œè¿˜æ›´å®¹æ˜“è¡¨ç°å‡ºCDNçš„åŠŸåŠ³ã€‚</p><p>å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆCDNï¼‰æ˜¯ä¸€ç»„åˆ†æ•£åœ¨ä¸åŒåœ°ç†ä½ç½®çš„webæœåŠ¡å™¨ï¼Œç”¨æ¥ç»™ç”¨æˆ·æ›´é«˜æ•ˆåœ°å‘é€å†…å®¹ã€‚å…¸å‹åœ°ï¼Œé€‰æ‹©ç”¨æ¥å‘é€å†…å®¹çš„æœåŠ¡å™¨æ˜¯åŸºäºç½‘ç»œè·ç¦»çš„è¡¡é‡æ ‡å‡†çš„ã€‚ä¾‹å¦‚ï¼šé€‰è·³æ•°ï¼ˆhopï¼‰æœ€å°‘çš„æˆ–è€…å“åº”æ—¶é—´æœ€å¿«çš„æœåŠ¡å™¨ã€‚</p><h4 id="35-æ·»ä¸ŠExpiresæˆ–è€…Cache-Control-HTTPå¤´"><a href="#35-æ·»ä¸ŠExpiresæˆ–è€…Cache-Control-HTTPå¤´" class="headerlink" title="35. æ·»ä¸ŠExpiresæˆ–è€…Cache-Control HTTPå¤´"></a>35. æ·»ä¸ŠExpiresæˆ–è€…Cache-Control HTTPå¤´</h4><ul><li>å¯¹äºé™æ€ç»„ä»¶ï¼šé€šè¿‡è®¾ç½®ä¸€ä¸ªé¥è¿œçš„å°†æ¥æ—¶é—´ä½œä¸ºExpiresæ¥å®ç°æ°¸ä¸å¤±æ•ˆ</li><li>å¤šä½™åŠ¨æ€ç»„ä»¶ï¼šç”¨åˆé€‚çš„Cache-ControlHTTPå¤´æ¥è®©æµè§ˆå™¨è¿›è¡Œæ¡ä»¶æ€§çš„è¯·æ±‚</li></ul><p>æµè§ˆå™¨ï¼ˆå’Œä»£ç†ï¼‰ç”¨ç¼“å­˜æ¥å‡å°‘HTTPè¯·æ±‚çš„æ•°ç›®å’Œå¤§å°ï¼Œè®©é¡µé¢èƒ½å¤Ÿæ›´å¿«åŠ è½½ã€‚webæœåŠ¡å™¨é€šè¿‡æœ‰æ•ˆæœŸHTTPå“åº”å¤´æ¥å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œé¡µé¢çš„å„ä¸ªç»„ä»¶åº”è¯¥è¢«ç¼“å­˜å¤šä¹…ã€‚ç”¨ä¸€ä¸ªé¥è¿œçš„å°†æ¥æ—¶é—´åšæœ‰æ•ˆæœŸï¼Œå‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªå“åº”åœ¨2010å¹´4æœˆ15æ—¥å‰ä¸ä¼šæ”¹å˜ã€‚</p>]]></content>
      
      <categories>
          
          <category> é›…è™ç½‘é¡µä¼˜åŒ–æ¡ä¾‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘é¡µ </tag>
            
            <tag> é¦–å±åŠ è½½ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Generator &amp; async (2)</title>
      <link href="/2018/04/25/JavaScript/Generator-async2/"/>
      <url>/2018/04/25/JavaScript/Generator-async2/</url>
      <content type="html"><![CDATA[<h1 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h1><h2 id="4-forâ€¦of-å¾ªç¯"><a href="#4-forâ€¦of-å¾ªç¯" class="headerlink" title="4. forâ€¦of å¾ªç¯"></a>4. forâ€¦of å¾ªç¯</h2><p><code>for...of</code> å¾ªç¯å¯ä»¥è‡ªåŠ¨éå† Gnerator å‡½æ•°ç”Ÿæˆçš„ <code>Iterator</code> å¯¹è±¡ï¼Œè€Œä¸”è¿™ä¸ªæ—¶å€™ä¸éœ€è¦è°ƒç”¨ <code>next</code> æ–¹æ³•ã€‚</p><pre><code class="JavaScript">function* foo() {    yield 1;    yield 2;    yield 3;    return 4}for(let value of foo()) {    console.log(value);}/* 1 2 3 */</code></pre><p>ä¾æ¬¡æ˜¾ç¤º3ä¸ª <code>yield</code> è¡¨è¾¾å¼çš„å€¼ã€‚<br><strong>Note: ä¸€æ—¦ <code>Next</code> æ–¹æ³•è¿”å›çš„å¯¹è±¡ä¸­ <code>done</code> å±æ€§ä¸º <code>true</code>ï¼Œ <code>for...of</code> å¾ªç¯å°±ä¼šç»ˆæ­¢ï¼Œä¸”ä¸åŒ…å«è¯¥è¿”å›å¯¹è±¡ï¼Œæ‰€ä»¥ä¸Šè¿°ä»£ç  <code>return</code> è¯­å¥ä¸­è¿”å›çš„ <code>4</code> ä¸åŒ…å«åœ¨ <code>for...of</code> å¾ªç¯é‡Œ</strong></p><pre><code class="JavaScript">// å¾ªç¯æ‰“å°æ–æ³¢é‚£å¥‘æ•°åˆ—function* fibonacci() {    let [prev, curr] = [0, 1];    for(;;) {        [prev, curr] = [curr, prev + curr];        yield curr;    }}for (let n of fibonacci()) {    if (n &gt; 1000) break;    console.log(n);}</code></pre><p>é™¤äº† forâ€¦of ä¹‹å¤–ï¼Œ æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ã€ç»“æ„èµ‹å€¼å’Œ <code>Array.from</code> æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„éƒ½æ˜¯éå†å™¨æ¥å£ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½å¯ä»¥å°† Generator å‡½æ•°è¿”å›çš„ Iterator å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚</p><pre><code class="JavaScript">function* num() {    yield 1    yield 2    return 3}// æ‰©å±•è¿ç®—ç¬¦[...num()] //[1, 2]Array.from(num()) //[1, 2]let [x, y] = num();x // 1y // 2for (let n of num()) {    console.log(n)}// 1// 2</code></pre><h2 id="5-Generator-prototype-throw"><a href="#5-Generator-prototype-throw" class="headerlink" title="5. Generator.prototype.throw()"></a>5. Generator.prototype.throw()</h2><p>åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œç„¶ååœ¨ Geneartor å‡½æ•°ä½“å†…éƒ¨æ•è·ã€‚</p><p><strong>Note: <code>throw</code> æ–¹æ³•ä¼šé»˜è®¤æ‰§è¡Œä¸€æ¬¡ <code>next</code></strong></p><h2 id="6-Generator-prototype-return"><a href="#6-Generator-prototype-return" class="headerlink" title="6. Generator.prototype.return()"></a>6. Generator.prototype.return()</h2><p>å¯ä»¥è¿”å›ç»™å®šçš„å€¼ï¼Œå¹¶ç»ˆç»“éå† Generator å‡½æ•°ã€‚</p><p><strong>Note: å¦‚æœå‡½æ•°å†…éƒ¨æœ‰ <code>try...finally</code> ä»£ç å—ï¼Œé‚£ä¹ˆ <code>return</code> æ–¹æ³•ä¼šæ¨è¿Ÿåˆ° <code>finally</code> ä»£ç å—æ‰§è¡Œå®Œå†æ‰§è¡Œ</strong></p><h2 id="7-next-throw-return-çš„å…±åŒç‚¹"><a href="#7-next-throw-return-çš„å…±åŒç‚¹" class="headerlink" title="7. next() throw() return() çš„å…±åŒç‚¹"></a>7. next() throw() return() çš„å…±åŒç‚¹</h2><p><code>next()</code> <code>throw()</code> <code>return()</code> ä¸‰ä¸ªæ–¹æ³•æœ¬è´¨æ˜¯åŒä¸€ä»¶äº‹ï¼Œå¯ä»¥æ”¾åœ¨ä¸€èµ·ç†è§£ï¼Œå®ƒä»¬çš„ä½œç”¨éƒ½æ˜¯è®© Generator å‡½æ•°æ¢å¤æ‰§è¡Œï¼Œå¹¶ä¸”ä½¿ç”¨ä¸åŒçš„è¯­å¥æ›¿æ¢ <code>yield</code> è¡¨è¾¾å¼ã€‚</p><p><code>next()</code> æ˜¯å°† <code>yield</code> è¡¨è¾¾å¼æ›¿æ¢æˆä¸€ä¸ªå€¼ã€‚</p><p><code>throw</code> æ˜¯å°† <code>yield</code> è¡¨è¾¾å¼æ›¿æ¢æˆ <code>throw</code> è¯­å¥</p><p><code>return</code> æ˜¯å°† <code>yield</code> è¡¨è¾¾å¼æ›¿æ¢æˆ <code>return</code> è¯­å¥</p><h2 id="8-yield-è¡¨è¾¾å¼"><a href="#8-yield-è¡¨è¾¾å¼" class="headerlink" title="8. yield* è¡¨è¾¾å¼"></a>8. yield* è¡¨è¾¾å¼</h2><p>å¦‚æœåœ¨ Generator å‡½æ•°å†…éƒ¨æŠµç”¨å¦å¤–ä¸€ä¸ª Generator å‡½æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰æ•ˆæœçš„ã€‚è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ° <code>yield*</code> è¡¨è¾¾å¼ï¼Œç”¨æ¥åœ¨ä¸€ä¸ª Generator å‡½æ•°é‡Œé¢æ‰§è¡Œå¦ä¸€ä¸ª Generator å‡½æ•°ã€‚</p><p><strong>ä»»ä½•æ•°æ®ç»“æ„åªè¦æœ‰ Iterator æ¥å£ï¼Œå°±å¯ä»¥è¢«<code>yield*</code> éå†ã€‚</strong></p>]]></content>
      
      <categories>
          
          <category> ES6 Generator async </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Generator </tag>
            
            <tag> async </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Generator &amp; async ï¼ˆ1ï¼‰</title>
      <link href="/2018/04/21/JavaScript/Generator-async/"/>
      <url>/2018/04/21/JavaScript/Generator-async/</url>
      <content type="html"><![CDATA[<h1 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h1><p><code>Generator</code> æ˜¯ ES6 æå‡ºä¸€ç§å¼‚æ­¥è§£å†³æ–¹æ¡ˆã€‚</p><p>å½¢å¼ä¸Š Generator å‡½æ•°å’Œæ™®é€šå‡½æ•°æœ‰ä¸¤ä¸ªä¸åŒç‚¹ã€‚</p><ul><li><code>function</code> å…³é”®å­—å’Œå‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼Œå¦‚ï¼š <code>function* demo</code>;</li><li>å†…éƒ¨å‡½æ•°ä½¿ç”¨ <code>yield</code> è¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ã€‚</li></ul><pre><code class="JavaScript">function* demo(){    yield &#39;hi&#39;;    yield &#39;second&#39;;    return &#39;end&#39;;}var test = demo();test.next(); //{value: &#39;hi&#39;, done: false}test.next(); //{value: &#39;second&#39;, done: false}test.next(); //{value: &#39;end&#39;, done: true}test.next(); //{value: undefined, done: true}</code></pre><p>è°ƒç”¨ <code>demo</code> åå‡½æ•°å¹¶ä¸ä¼šæ‰§è¡Œï¼Œè¿”å›çš„ä¹Ÿä¸æ˜¯å‡½æ•°è¿è¡Œçš„ç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆï¼Œåªæœ‰å½“è°ƒç”¨éå†å™¨å¯¹è±¡çš„ <code>next()</code> æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´æˆ–è€…ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹æ‰§è¡Œï¼ŒçŸ¥é“é‡åˆ°ä¸‹ä¸€ä¸ª yield è¡¨è¾¾å¼æˆ–è€… return è¯­å¥ä¸ºæ­¢ã€‚</p><h2 id="1-yield-è¡¨è¾¾å¼"><a href="#1-yield-è¡¨è¾¾å¼" class="headerlink" title="1. yield è¡¨è¾¾å¼"></a>1. yield è¡¨è¾¾å¼</h2><p>ç±»ä¼¼ Generator å‡½æ•°çš„ä¸€ä¸ªå†…éƒ¨æš‚åœæ ‡å¿—ã€‚</p><p>Generator å‡½æ•°å°±åƒä¸€æ¡é©¬è·¯ï¼Œè€Œ yield æ˜¯è¿™æ¡é©¬è·¯ä¸Šçš„çº¢ç»¿ç¯è·¯å£ï¼Œnext æ–¹æ³•æ˜¯ç«™åœ¨æ¯ä¸ªè·¯å£æŒ‡æŒ¥çš„äº¤è­¦ã€‚åªæœ‰äº¤è­¦åŒæ„è½¦è¾†é€šè¿‡åï¼Œæ‰ä¼šæ‰§è¡Œç›¸åº”çš„å‡½æ•°ã€‚</p><p>next æ–¹æ³•çš„è¿è¡Œé€»è¾‘æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>é‡åˆ° <code>yield</code> å°±æš‚åœåé¢çš„æ“ä½œï¼Œå¹¶å°†ç´§è·Ÿåœ¨ <code>yield</code> åçš„è¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›å¯¹è±¡çš„ <code>value</code> å±æ€§å€¼</li><li>ä¸‹æ¬¡è°ƒç”¨ <code>next</code> æ–¹æ³•æ˜¯ï¼Œå†ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œ çŸ¥é“é‡åˆ°ä¸‹ä¸€ä¸ª <code>yield</code> è¡¨è¾¾å¼æˆ–è€… <code>return</code> è¯­å¥</li><li>å¦‚æœå‡½æ•°æ²¡æœ‰ <code>return</code> è¯­å¥ï¼Œé‚£ä¹ˆè¿”å›å¯¹è±¡çš„ <code>value</code> å±æ€§å€¼ä¸º <code>undefined</code></li></ul><p><code>yield</code> å’Œ <code>return</code> çš„ä¸åŒç‚¹åœ¨äºï¼Œä¸€ä¸ªå‡½æ•°çš„ <code>return</code> è¯­å¥æœ€å¤šåªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œè€Œ <code>yield</code> å¯ä»¥æ‰§è¡Œå¤šæ¬¡ã€‚ <code>yield</code> ä¼šä½¿å‡½æ•°æš‚åœæ‰§è¡Œï¼Œä¸‹æ¬¡æ‰§è¡Œçš„æ—¶å€™ä¼šä»è¯¥ä½ç½®ç»§ç»­å‘åæ‰§è¡Œï¼Œè€Œ <code>return</code> ä¸å…·æœ‰è®°å¿†æ€§ã€‚</p><p><strong>æ³¨æ„ï¼šGenerator å‡½æ•°å¯ä»¥ä¸å¿…ä½¿ç”¨ yieldã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨ yield å°±å¿…é¡»åœ¨ Generator å‡½æ•°é‡Œé¢ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚<br><code>yield</code> è¡¨è¾¾å¼å¦‚æœç”¨åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¹‹ä¸­ï¼Œå¿…é¡»æ·»åŠ åœ¨åœ†æ‹¬å·é‡Œé¢ã€‚ <code>console.log(&#39;Hello&#39; + (yield));</code></strong></p><h2 id="2-Generator-ä¸-Iterator"><a href="#2-Generator-ä¸-Iterator" class="headerlink" title="2. Generator ä¸ Iterator"></a>2. Generator ä¸ Iterator</h2><p>ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„ <code>Symbol.iterator</code> æ–¹æ³•ï¼Œç­‰äºè¯¥å¯¹è±¡çš„éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°ä¼šè¿”å›è¯¥å¯¹è±¡çš„ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚</p><p>Generator å‡½æ•°æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¯¥å¯¹è±¡æœ¬èº«ä¹Ÿå…·æœ‰ <code>Symbol.iterator</code> å±æ€§ï¼Œæ‰§è¡Œåè¿”å›è‡ªèº«ã€‚</p><pre><code class="JavaScript">function* demo(){    // do some thing}var g = demo();g[Symbil.iterator] === g; // true</code></pre><h2 id="3-next-æ–¹æ³•çš„å‚æ•°"><a href="#3-next-æ–¹æ³•çš„å‚æ•°" class="headerlink" title="3. next æ–¹æ³•çš„å‚æ•°"></a>3. next æ–¹æ³•çš„å‚æ•°</h2><p><code>yield</code> è¡¨è¾¾å¼æœ¬çœæ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å› <code>undefined</code>ã€‚ <code>next</code> æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“åšä¸Šä¸€ä¸ª <code>yield</code> è¡¨è¾¾å¼çš„è¿”å›å€¼ã€‚</p><pre><code class="JavaScript">function* f(){    for( var i = 0; true; i++){        var reset = yield i;        if(reset) {            i = -1;        }    }}var g = f();g.next(); // {value: 0, done: false}g.next(); // {value: 1, done: false}g.next(true); // {value: 0, done: false}</code></pre>]]></content>
      
      <categories>
          
          <category> ES6 Generator async </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Generator </tag>
            
            <tag> async </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æƒ³å¼€ä¸ª ES6 çš„å‘</title>
      <link href="/2018/04/20/JavaScript/%E6%83%B3%E5%BC%80%E4%B8%AA-ES6-%E7%9A%84%E5%9D%91/"/>
      <url>/2018/04/20/JavaScript/%E6%83%B3%E5%BC%80%E4%B8%AA-ES6-%E7%9A%84%E5%9D%91/</url>
      <content type="html"><![CDATA[<h1 id="ES6-Promise"><a href="#ES6-Promise" class="headerlink" title="ES6 Promise"></a>ES6 Promise</h1><p><code>Promise</code> æ˜¯ ES6 çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆã€‚</p><p>Promise æœ‰ 3 ç§çŠ¶æ€ <code>pending</code> ï¼ˆæ­£åœ¨è¿›è¡Œï¼‰<code>fulfilled</code> (æˆåŠŸ) <code>rejected</code> (å¤±è´¥)ã€‚ åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœå¯ä»¥å†³å®šçŠ¶æ€ã€‚</p><p>å…¶ä¸­ è¿™3ç§çŠ¶æ€çš„è½¬æ¢å…³ç³»æ˜¯ <code>pending</code> -&gt; <code>fulfilled</code>, <code>pending</code> -&gt; <code>rejected</code>. è€Œ fulfilled å’Œ rejected è¿™ä¸¤ç§çŠ¶æ€ä¸€æ—¦å½¢æˆå°±ä¸å¯æ”¹å˜ã€‚</p><p>ä¸€å›¾èƒœåƒè¨€<br><img src="/2018/04/20/JavaScript/æƒ³å¼€ä¸ª-ES6-çš„å‘/promise.png" alt="Promiseå›¾è§£"></p><h2 id="1-ç”¨æ³•"><a href="#1-ç”¨æ³•" class="headerlink" title="1. ç”¨æ³•"></a>1. ç”¨æ³•</h2><p>Promise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Promise å®ä¾‹ã€‚</p><pre><code class="JavaScript">const promise = new Promise((resolve, reject)=&gt;{    /* do some thing */    if(/* promise success */) {        resolve(value);    } else {        reject(error)    }})</code></pre><p><code>resolve</code> å‡½æ•°å°† <code>Promise</code> å¯¹è±¡çŠ¶æ€ç”± <code>pending</code> å˜ä¸º <code>fulfilled</code> çŠ¶æ€ï¼Œ åœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p><p><code>reject</code> å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°† <code>Promise</code>å¯¹è±¡çš„çŠ¶æ€ä» <code>pending</code> å˜ä¸º <code>rejected</code> çŠ¶æ€ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p><h2 id="2-Promise-prototype-then"><a href="#2-Promise-prototype-then" class="headerlink" title="2. Promise.prototype.then()"></a>2. Promise.prototype.then()</h2><p>Promise å®ä¾‹ç”Ÿæˆä¹‹åå°±å¯ä»¥è°ƒç”¨ then æ–¹æ³•åˆ†åˆ«æŒ‡å®š fulfilled çŠ¶æ€å’Œ rejected çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚</p><pre><code class="JavaScript">promise.then((value)=&gt;{    /* do some thing when success */}, (error)=&gt;{    /* do some thing when failed */})</code></pre><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œthen æ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«å¯¹åº”çš„æ˜¯ <code>fulfilled</code> çŠ¶æ€çš„å›è°ƒå‡½æ•°å’Œ <code>rejected</code> çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚å…¶ä¸­ <code>rejected</code> çŠ¶æ€çš„å›è°ƒå‡½æ•°æ˜¯å¯é€‰å‚æ•°ã€‚</p><h2 id="3-Promise-prototype-catch"><a href="#3-Promise-prototype-catch" class="headerlink" title="3. Promise.prototype.catch()"></a>3. Promise.prototype.catch()</h2><p>ç›¸å½“äº <code>promise.then(null, rejection)</code> ç”¨äºæŒ‡å®šå¼‚æ­¥æ“ä½œå¤±è´¥æ—¶å€™çš„å›è°ƒå‡½æ•°ã€‚</p><p><strong>æ³¨æ„ï¼šå¦‚æœ Promise çš„çŠ¶æ€å·²ç»æ˜¯fulfilledçš„è¯ï¼Œå†æŠ›å‡ºé”™è¯¯åˆ™ä¸ä¼šè°ƒç”¨ rejectionå‡½æ•°</strong></p><p><strong>Promiseå¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼ŒçŸ¥é“è¢«æ•è·ä¸ºæ­¢</strong></p><h2 id="4-Promise-prototype-finnaly"><a href="#4-Promise-prototype-finnaly" class="headerlink" title="4. Promise.prototype.finnaly()"></a>4. Promise.prototype.finnaly()</h2><p><code>finally</code> æ–¹æ³•ç”¨äºä¸è®º Promise å¯¹è±¡çš„çŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚ï¼ˆES2018)</p><h2 id="5-Promise-all"><a href="#5-Promise-all" class="headerlink" title="5. Promise.all()"></a>5. Promise.all()</h2><p>ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚</p><pre><code class="JavaScript">const p = Promise([p1, p2, p3]);</code></pre><p>Promise.all æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œæ•°ç»„å†…éƒ½æ˜¯ Promise å®ä¾‹ã€‚ å¦‚æœä¸æ˜¯å°±ä¼šè°ƒç”¨ Promise.resolve æ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º Promise å®ä¾‹ã€‚</p><p>ï¼ˆå‡è®¾æˆåŠŸä¸ºtrue, å¤±è´¥ä¸ºfalseï¼‰<br><code>p = p1 &amp;&amp; p2 &amp;&amp; p3</code> å³ p1, p2, p3çš„çŠ¶æ€éƒ½æ˜¯ fulfilled æ—¶ p çš„çŠ¶æ€æ‰æ˜¯ fulfilledã€‚åªè¦å…¶ä¸­ä¸€ä¸ªçŠ¶æ€æ˜¯ rejected, é‚£ä¹ˆ p çš„çŠ¶æ€å°±ä¸º rejectedã€‚</p><h2 id="6-Promise-race"><a href="#6-Promise-race" class="headerlink" title="6. Promise.race()"></a>6. Promise.race()</h2><p>Promise.race æ–¹æ³•åŒ Promise.all ç±»ä¼¼ã€‚åªä¸è¿‡æ­£å¦‚æ–¹æ³•åä¸€æ ·ï¼Œç«äº‰æ€çš„ Promiseï¼Œä¸€æ—¦å…¶ä¸­æœ‰ä»»ä½•ä¸€ä¸ª Promise çš„çŠ¶æ€ç¡®å®šäº†ï¼Œæ— è®ºæ˜¯ fulfilled è¿˜æ˜¯ rejected Promise.race çš„çŠ¶æ€ä¹Ÿå°±å’Œå…¶ä¸€æ ·ã€‚</p><h2 id="7-Promise-resolve"><a href="#7-Promise-resolve" class="headerlink" title="7. Promise.resolve()"></a>7. Promise.resolve()</h2><p>å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡</p><ul><li>å‚æ•°æ˜¯ <code>Promise</code> å®ä¾‹ï¼Œè¯¥æ–¹æ³•ä¸åšä»»ä½•å¤„ç†ï¼Œç›´æ¥è¿”å›è¯¥å®ä¾‹ã€‚</li><li>å‚æ•°æ˜¯ä¸€ä¸ª <code>thenable</code> å¯¹è±¡ï¼Œè¯¥æ–¹æ³•ä¼šå°†å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œ thenable å¯¹è±¡çš„ then æ–¹æ³•ã€‚</li><li>å‚æ•°ä¸æ˜¯å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡æˆ–æ ¹æœ¬ä¸æ˜¯å¯¹è±¡ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º <code>fulfilled</code>ã€‚</li><li>æ²¡æœ‰å‚æ•°ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ä¸º <code>fulfilled</code>ã€‚</li></ul><h2 id="8-Promise-reject"><a href="#8-Promise-reject" class="headerlink" title="8. Promise.reject()"></a>8. Promise.reject()</h2><p>è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„çŠ¶æ€ä¸º rejectedã€‚</p><p><strong>æ³¨æ„ï¼šè¯¥æ–¹æ³•çš„å‚æ•°ï¼Œä¼šä½œä¸ºrejectçš„ç†ç”±å˜æˆåç»­æ–¹æ³•çš„å‚æ•°ã€‚</strong></p><pre><code class="JavaScript">const thenable = {    then(resolve, reject) {        reject(&#39;error&#39;);    }}Promise.reject(thenable).catch(e=&gt;{    console.log(e === thenable)})// true</code></pre>]]></content>
      
      <categories>
          
          <category> JavaScript ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Promise </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Gitpage &amp; Hexo</title>
      <link href="/2018/04/18/%E5%89%8D%E7%AB%AF/Hexo-gitpage/"/>
      <url>/2018/04/18/%E5%89%8D%E7%AB%AF/Hexo-gitpage/</url>
      <content type="html"><![CDATA[<h1 id="Gitpage-é…åˆ-Hexo-æ­å»ºè‡ªå·±çš„åšå®¢"><a href="#Gitpage-é…åˆ-Hexo-æ­å»ºè‡ªå·±çš„åšå®¢" class="headerlink" title="Gitpage é…åˆ Hexo æ­å»ºè‡ªå·±çš„åšå®¢"></a>Gitpage é…åˆ Hexo æ­å»ºè‡ªå·±çš„åšå®¢</h1><p>ä¹‹å‰é¢è¯•æ„Ÿè§‰è‡ªå·±çš„æŠ€æœ¯æ²‰æ·€è¿˜æ˜¯ä¸å¤Ÿã€‚ç›®å‰æ‰“ç®—ç”¨åšå®¢è®°å½•è‡ªå·±çš„å­¦ä¹ å¿ƒå¾—ã€‚ä¹‹å‰ä¸€ç›´æ˜¯ç”¨äº‘ç¬”è®°è®°å½•ã€‚ç°åœ¨æ”¹ç”¨gitpage + hexoï¼Œä¸€æ–¹é¢GitHub çš„æäº¤è®°å½•æ–¹ä¾¿è‡ªå·±æŸ¥çœ‹æ›´æ–°çŠ¶æ€ï¼Œèƒ½å¤Ÿå¯¹è‡ªå·±æœ‰ä¸ªå®¡è§†ã€‚å¦ä¸€æ–¹é¢ï¼Œæ”¾åœ¨githubä¸Šæ–¹ä¾¿åˆ«äººé˜…è¯»æŸ¥çœ‹å’Œå…±äº«ã€‚</p><h2 id="1-ç”¨-GitHub-åˆ›å»ºä¸€ä¸ª-Repository"><a href="#1-ç”¨-GitHub-åˆ›å»ºä¸€ä¸ª-Repository" class="headerlink" title="1. ç”¨ GitHub åˆ›å»ºä¸€ä¸ª Repository."></a>1. ç”¨ GitHub åˆ›å»ºä¸€ä¸ª Repository.</h2><ul><li><p>ç™»å½• GitHub ä¸»é¡µã€‚ç‚¹å‡» New Repository</p></li><li><p>Repository name åç§°å¡«ä¸Š GitHub çš„ç”¨æˆ·å + github.ioã€‚ <code>ä¾‹å¦‚ï¼š æˆ‘å« hongxuWei, é‚£ä¹ˆæˆ‘ GitHub ä»“åº“çš„åç§°å°±å¡« hongxuWei.github.io</code></p></li><li><p>ç‚¹å‡» Create repository</p></li></ul><p>å¦‚ä½•æŸ¥çœ‹æ˜¯å¦åˆ›å»ºæˆåŠŸå‘¢ï¼Ÿ</p><p>åœ¨æ–°å»ºçš„ä»“åº“ä¸‹åˆ›å»ºä¸€ä¸ª index.html é™æ€æ–‡ä»¶ã€‚ä»¥æˆ‘è‡ªå·±ä¸ºä¾‹ï¼Œç™»å½• <a href="https://hongxuwei.github.io">https://hongxuwei.github.io</a>  (åè®®ç±»å‹httpsä¸è¦çœç•¥)<br>å¦‚æœå¯ä»¥è®¿é—®é‚£ä¹ˆç¬¬ä¸€æ­¥å°±å®Œæˆäº†ã€‚</p><h2 id="2-æœ¬åœ°ä¸‹è½½-hexo"><a href="#2-æœ¬åœ°ä¸‹è½½-hexo" class="headerlink" title="2. æœ¬åœ°ä¸‹è½½ hexo"></a>2. æœ¬åœ°ä¸‹è½½ hexo</h2><pre><code class="bash">npm install hexo-cli -ghexo init gitpage #è¿™é‡Œ gitpage ä»…ä»…æŒ‡ä½ åšå®¢çš„åç§°cd gitpagenpm installhexo g # markdown æ–‡ä»¶ç”Ÿæˆä¸º html æ–‡ä»¶hexo s # å¼€å¯æœ¬åœ°é¢„è§ˆ http://localhost:4000/</code></pre><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„ç”¨ markdown å†™åšå®¢å•¦ã€‚</p><h2 id="3-éƒ¨ç½²-hexo-åˆ°-gitpage"><a href="#3-éƒ¨ç½²-hexo-åˆ°-gitpage" class="headerlink" title="3. éƒ¨ç½² hexo åˆ° gitpage"></a>3. éƒ¨ç½² hexo åˆ° gitpage</h2><p>å®‰è£…æ’ä»¶</p><pre><code>npm install gexo-deployer-git --save</code></pre><p>ä¿®æ”¹ _config.yml æ–‡ä»¶</p><pre><code>deploy:    type: github    repo: ***.git</code></pre><p>å‘å¸ƒ</p><pre><code>hexo d</code></pre>]]></content>
      
      <categories>
          
          <category> GitHub </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
  
  
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      <content type="html"><![CDATA[]]></content>
    </entry>
    
    <entry>
      <title>links</title>
      <link href="/links/index.html"/>
      <url>/links/index.html</url>
      <content type="html"><![CDATA[]]></content>
    </entry>
    
    <entry>
      <title>timeline</title>
      <link href="/timeline/index.html"/>
      <url>/timeline/index.html</url>
      <content type="html"><![CDATA[]]></content>
    </entry>
    
  
</search>
